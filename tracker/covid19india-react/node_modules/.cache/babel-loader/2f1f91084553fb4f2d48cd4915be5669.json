{"ast":null,"code":"/*!\n * typeahead.js 1.3.1\n * https://github.com/corejavascript/typeahead.js\n * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT\n */\n(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"jquery\"], function (a0) {\n      return root[\"Bloodhound\"] = factory(a0);\n    });\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    root[\"Bloodhound\"] = factory(root[\"jQuery\"]);\n  }\n})(this, function ($) {\n  var _ = function () {\n    \"use strict\";\n\n    return {\n      isMsie: function () {\n        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n      },\n      isBlankString: function (str) {\n        return !str || /^\\s*$/.test(str);\n      },\n      escapeRegExChars: function (str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      },\n      isString: function (obj) {\n        return typeof obj === \"string\";\n      },\n      isNumber: function (obj) {\n        return typeof obj === \"number\";\n      },\n      isArray: $.isArray,\n      isFunction: $.isFunction,\n      isObject: $.isPlainObject,\n      isUndefined: function (obj) {\n        return typeof obj === \"undefined\";\n      },\n      isElement: function (obj) {\n        return !!(obj && obj.nodeType === 1);\n      },\n      isJQuery: function (obj) {\n        return obj instanceof $;\n      },\n      toStr: function toStr(s) {\n        return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n      },\n      bind: $.proxy,\n      each: function (collection, cb) {\n        $.each(collection, reverseArgs);\n\n        function reverseArgs(index, value) {\n          return cb(value, index);\n        }\n      },\n      map: $.map,\n      filter: $.grep,\n      every: function (obj, test) {\n        var result = true;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (!(result = test.call(null, val, key, obj))) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      some: function (obj, test) {\n        var result = false;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (result = test.call(null, val, key, obj)) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      mixin: $.extend,\n      identity: function (x) {\n        return x;\n      },\n      clone: function (obj) {\n        return $.extend(true, {}, obj);\n      },\n      getIdGenerator: function () {\n        var counter = 0;\n        return function () {\n          return counter++;\n        };\n      },\n      templatify: function templatify(obj) {\n        return $.isFunction(obj) ? obj : template;\n\n        function template() {\n          return String(obj);\n        }\n      },\n      defer: function (fn) {\n        setTimeout(fn, 0);\n      },\n      debounce: function (func, wait, immediate) {\n        var timeout, result;\n        return function () {\n          var context = this,\n              args = arguments,\n              later,\n              callNow;\n\n          later = function () {\n            timeout = null;\n\n            if (!immediate) {\n              result = func.apply(context, args);\n            }\n          };\n\n          callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n\n          if (callNow) {\n            result = func.apply(context, args);\n          }\n\n          return result;\n        };\n      },\n      throttle: function (func, wait) {\n        var context, args, timeout, result, previous, later;\n        previous = 0;\n\n        later = function () {\n          previous = new Date();\n          timeout = null;\n          result = func.apply(context, args);\n        };\n\n        return function () {\n          var now = new Date(),\n              remaining = wait - (now - previous);\n          context = this;\n          args = arguments;\n\n          if (remaining <= 0) {\n            clearTimeout(timeout);\n            timeout = null;\n            previous = now;\n            result = func.apply(context, args);\n          } else if (!timeout) {\n            timeout = setTimeout(later, remaining);\n          }\n\n          return result;\n        };\n      },\n      stringify: function (val) {\n        return _.isString(val) ? val : JSON.stringify(val);\n      },\n      guid: function () {\n        function _p8(s) {\n          var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n          return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n        }\n\n        return \"tt-\" + _p8() + _p8(true) + _p8(true) + _p8();\n      },\n      noop: function () {}\n    };\n  }();\n\n  var VERSION = \"1.3.1\";\n\n  var tokenizers = function () {\n    \"use strict\";\n\n    return {\n      nonword: nonword,\n      whitespace: whitespace,\n      ngram: ngram,\n      obj: {\n        nonword: getObjTokenizer(nonword),\n        whitespace: getObjTokenizer(whitespace),\n        ngram: getObjTokenizer(ngram)\n      }\n    };\n\n    function whitespace(str) {\n      str = _.toStr(str);\n      return str ? str.split(/\\s+/) : [];\n    }\n\n    function nonword(str) {\n      str = _.toStr(str);\n      return str ? str.split(/\\W+/) : [];\n    }\n\n    function ngram(str) {\n      str = _.toStr(str);\n      var tokens = [],\n          word = \"\";\n\n      _.each(str.split(\"\"), function (char) {\n        if (char.match(/\\s+/)) {\n          word = \"\";\n        } else {\n          tokens.push(word + char);\n          word += char;\n        }\n      });\n\n      return tokens;\n    }\n\n    function getObjTokenizer(tokenizer) {\n      return function setKey(keys) {\n        keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n        return function tokenize(o) {\n          var tokens = [];\n\n          _.each(keys, function (k) {\n            tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n          });\n\n          return tokens;\n        };\n      };\n    }\n  }();\n\n  var LruCache = function () {\n    \"use strict\";\n\n    function LruCache(maxSize) {\n      this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n      this.reset();\n\n      if (this.maxSize <= 0) {\n        this.set = this.get = $.noop;\n      }\n    }\n\n    _.mixin(LruCache.prototype, {\n      set: function set(key, val) {\n        var tailItem = this.list.tail,\n            node;\n\n        if (this.size >= this.maxSize) {\n          this.list.remove(tailItem);\n          delete this.hash[tailItem.key];\n          this.size--;\n        }\n\n        if (node = this.hash[key]) {\n          node.val = val;\n          this.list.moveToFront(node);\n        } else {\n          node = new Node(key, val);\n          this.list.add(node);\n          this.hash[key] = node;\n          this.size++;\n        }\n      },\n      get: function get(key) {\n        var node = this.hash[key];\n\n        if (node) {\n          this.list.moveToFront(node);\n          return node.val;\n        }\n      },\n      reset: function reset() {\n        this.size = 0;\n        this.hash = {};\n        this.list = new List();\n      }\n    });\n\n    function List() {\n      this.head = this.tail = null;\n    }\n\n    _.mixin(List.prototype, {\n      add: function add(node) {\n        if (this.head) {\n          node.next = this.head;\n          this.head.prev = node;\n        }\n\n        this.head = node;\n        this.tail = this.tail || node;\n      },\n      remove: function remove(node) {\n        node.prev ? node.prev.next = node.next : this.head = node.next;\n        node.next ? node.next.prev = node.prev : this.tail = node.prev;\n      },\n      moveToFront: function (node) {\n        this.remove(node);\n        this.add(node);\n      }\n    });\n\n    function Node(key, val) {\n      this.key = key;\n      this.val = val;\n      this.prev = this.next = null;\n    }\n\n    return LruCache;\n  }();\n\n  var PersistentStorage = function () {\n    \"use strict\";\n\n    var LOCAL_STORAGE;\n\n    try {\n      LOCAL_STORAGE = window.localStorage;\n      LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n      LOCAL_STORAGE.removeItem(\"~~~\");\n    } catch (err) {\n      LOCAL_STORAGE = null;\n    }\n\n    function PersistentStorage(namespace, override) {\n      this.prefix = [\"__\", namespace, \"__\"].join(\"\");\n      this.ttlKey = \"__ttl__\";\n      this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n      this.ls = override || LOCAL_STORAGE;\n      !this.ls && this._noop();\n    }\n\n    _.mixin(PersistentStorage.prototype, {\n      _prefix: function (key) {\n        return this.prefix + key;\n      },\n      _ttlKey: function (key) {\n        return this._prefix(key) + this.ttlKey;\n      },\n      _noop: function () {\n        this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n      },\n      _safeSet: function (key, val) {\n        try {\n          this.ls.setItem(key, val);\n        } catch (err) {\n          if (err.name === \"QuotaExceededError\") {\n            this.clear();\n\n            this._noop();\n          }\n        }\n      },\n      get: function (key) {\n        if (this.isExpired(key)) {\n          this.remove(key);\n        }\n\n        return decode(this.ls.getItem(this._prefix(key)));\n      },\n      set: function (key, val, ttl) {\n        if (_.isNumber(ttl)) {\n          this._safeSet(this._ttlKey(key), encode(now() + ttl));\n        } else {\n          this.ls.removeItem(this._ttlKey(key));\n        }\n\n        return this._safeSet(this._prefix(key), encode(val));\n      },\n      remove: function (key) {\n        this.ls.removeItem(this._ttlKey(key));\n        this.ls.removeItem(this._prefix(key));\n        return this;\n      },\n      clear: function () {\n        var i,\n            keys = gatherMatchingKeys(this.keyMatcher);\n\n        for (i = keys.length; i--;) {\n          this.remove(keys[i]);\n        }\n\n        return this;\n      },\n      isExpired: function (key) {\n        var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n        return _.isNumber(ttl) && now() > ttl ? true : false;\n      }\n    });\n\n    return PersistentStorage;\n\n    function now() {\n      return new Date().getTime();\n    }\n\n    function encode(val) {\n      return JSON.stringify(_.isUndefined(val) ? null : val);\n    }\n\n    function decode(val) {\n      return $.parseJSON(val);\n    }\n\n    function gatherMatchingKeys(keyMatcher) {\n      var i,\n          key,\n          keys = [],\n          len = LOCAL_STORAGE.length;\n\n      for (i = 0; i < len; i++) {\n        if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n          keys.push(key.replace(keyMatcher, \"\"));\n        }\n      }\n\n      return keys;\n    }\n  }();\n\n  var Transport = function () {\n    \"use strict\";\n\n    var pendingRequestsCount = 0,\n        pendingRequests = {},\n        sharedCache = new LruCache(10);\n\n    function Transport(o) {\n      o = o || {};\n      this.maxPendingRequests = o.maxPendingRequests || 6;\n      this.cancelled = false;\n      this.lastReq = null;\n      this._send = o.transport;\n      this._get = o.limiter ? o.limiter(this._get) : this._get;\n      this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n    }\n\n    Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n      this.maxPendingRequests = num;\n    };\n\n    Transport.resetCache = function resetCache() {\n      sharedCache.reset();\n    };\n\n    _.mixin(Transport.prototype, {\n      _fingerprint: function fingerprint(o) {\n        o = o || {};\n        return o.url + o.type + $.param(o.data || {});\n      },\n      _get: function (o, cb) {\n        var that = this,\n            fingerprint,\n            jqXhr;\n        fingerprint = this._fingerprint(o);\n\n        if (this.cancelled || fingerprint !== this.lastReq) {\n          return;\n        }\n\n        if (jqXhr = pendingRequests[fingerprint]) {\n          jqXhr.done(done).fail(fail);\n        } else if (pendingRequestsCount < this.maxPendingRequests) {\n          pendingRequestsCount++;\n          pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n        } else {\n          this.onDeckRequestArgs = [].slice.call(arguments, 0);\n        }\n\n        function done(resp) {\n          cb(null, resp);\n\n          that._cache.set(fingerprint, resp);\n        }\n\n        function fail() {\n          cb(true);\n        }\n\n        function always() {\n          pendingRequestsCount--;\n          delete pendingRequests[fingerprint];\n\n          if (that.onDeckRequestArgs) {\n            that._get.apply(that, that.onDeckRequestArgs);\n\n            that.onDeckRequestArgs = null;\n          }\n        }\n      },\n      get: function (o, cb) {\n        var resp, fingerprint;\n        cb = cb || $.noop;\n        o = _.isString(o) ? {\n          url: o\n        } : o || {};\n        fingerprint = this._fingerprint(o);\n        this.cancelled = false;\n        this.lastReq = fingerprint;\n\n        if (resp = this._cache.get(fingerprint)) {\n          cb(null, resp);\n        } else {\n          this._get(o, cb);\n        }\n      },\n      cancel: function () {\n        this.cancelled = true;\n      }\n    });\n\n    return Transport;\n  }();\n\n  var SearchIndex = window.SearchIndex = function () {\n    \"use strict\";\n\n    var CHILDREN = \"c\",\n        IDS = \"i\";\n\n    function SearchIndex(o) {\n      o = o || {};\n\n      if (!o.datumTokenizer || !o.queryTokenizer) {\n        $.error(\"datumTokenizer and queryTokenizer are both required\");\n      }\n\n      this.identify = o.identify || _.stringify;\n      this.datumTokenizer = o.datumTokenizer;\n      this.queryTokenizer = o.queryTokenizer;\n      this.matchAnyQueryToken = o.matchAnyQueryToken;\n      this.reset();\n    }\n\n    _.mixin(SearchIndex.prototype, {\n      bootstrap: function bootstrap(o) {\n        this.datums = o.datums;\n        this.trie = o.trie;\n      },\n      add: function (data) {\n        var that = this;\n        data = _.isArray(data) ? data : [data];\n\n        _.each(data, function (datum) {\n          var id, tokens;\n          that.datums[id = that.identify(datum)] = datum;\n          tokens = normalizeTokens(that.datumTokenizer(datum));\n\n          _.each(tokens, function (token) {\n            var node, chars, ch;\n            node = that.trie;\n            chars = token.split(\"\");\n\n            while (ch = chars.shift()) {\n              node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n              node[IDS].push(id);\n            }\n          });\n        });\n      },\n      get: function get(ids) {\n        var that = this;\n        return _.map(ids, function (id) {\n          return that.datums[id];\n        });\n      },\n      search: function search(query) {\n        var that = this,\n            tokens,\n            matches;\n        tokens = normalizeTokens(this.queryTokenizer(query));\n\n        _.each(tokens, function (token) {\n          var node, chars, ch, ids;\n\n          if (matches && matches.length === 0 && !that.matchAnyQueryToken) {\n            return false;\n          }\n\n          node = that.trie;\n          chars = token.split(\"\");\n\n          while (node && (ch = chars.shift())) {\n            node = node[CHILDREN][ch];\n          }\n\n          if (node && chars.length === 0) {\n            ids = node[IDS].slice(0);\n            matches = matches ? getIntersection(matches, ids) : ids;\n          } else {\n            if (!that.matchAnyQueryToken) {\n              matches = [];\n              return false;\n            }\n          }\n        });\n\n        return matches ? _.map(unique(matches), function (id) {\n          return that.datums[id];\n        }) : [];\n      },\n      all: function all() {\n        var values = [];\n\n        for (var key in this.datums) {\n          values.push(this.datums[key]);\n        }\n\n        return values;\n      },\n      reset: function reset() {\n        this.datums = {};\n        this.trie = newNode();\n      },\n      serialize: function serialize() {\n        return {\n          datums: this.datums,\n          trie: this.trie\n        };\n      }\n    });\n\n    return SearchIndex;\n\n    function normalizeTokens(tokens) {\n      tokens = _.filter(tokens, function (token) {\n        return !!token;\n      });\n      tokens = _.map(tokens, function (token) {\n        return token.toLowerCase();\n      });\n      return tokens;\n    }\n\n    function newNode() {\n      var node = {};\n      node[IDS] = [];\n      node[CHILDREN] = {};\n      return node;\n    }\n\n    function unique(array) {\n      var seen = {},\n          uniques = [];\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (!seen[array[i]]) {\n          seen[array[i]] = true;\n          uniques.push(array[i]);\n        }\n      }\n\n      return uniques;\n    }\n\n    function getIntersection(arrayA, arrayB) {\n      var ai = 0,\n          bi = 0,\n          intersection = [];\n      arrayA = arrayA.sort();\n      arrayB = arrayB.sort();\n      var lenArrayA = arrayA.length,\n          lenArrayB = arrayB.length;\n\n      while (ai < lenArrayA && bi < lenArrayB) {\n        if (arrayA[ai] < arrayB[bi]) {\n          ai++;\n        } else if (arrayA[ai] > arrayB[bi]) {\n          bi++;\n        } else {\n          intersection.push(arrayA[ai]);\n          ai++;\n          bi++;\n        }\n      }\n\n      return intersection;\n    }\n  }();\n\n  var Prefetch = function () {\n    \"use strict\";\n\n    var keys;\n    keys = {\n      data: \"data\",\n      protocol: \"protocol\",\n      thumbprint: \"thumbprint\"\n    };\n\n    function Prefetch(o) {\n      this.url = o.url;\n      this.ttl = o.ttl;\n      this.cache = o.cache;\n      this.prepare = o.prepare;\n      this.transform = o.transform;\n      this.transport = o.transport;\n      this.thumbprint = o.thumbprint;\n      this.storage = new PersistentStorage(o.cacheKey);\n    }\n\n    _.mixin(Prefetch.prototype, {\n      _settings: function settings() {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      store: function store(data) {\n        if (!this.cache) {\n          return;\n        }\n\n        this.storage.set(keys.data, data, this.ttl);\n        this.storage.set(keys.protocol, location.protocol, this.ttl);\n        this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n      },\n      fromCache: function fromCache() {\n        var stored = {},\n            isExpired;\n\n        if (!this.cache) {\n          return null;\n        }\n\n        stored.data = this.storage.get(keys.data);\n        stored.protocol = this.storage.get(keys.protocol);\n        stored.thumbprint = this.storage.get(keys.thumbprint);\n        isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n        return stored.data && !isExpired ? stored.data : null;\n      },\n      fromNetwork: function (cb) {\n        var that = this,\n            settings;\n\n        if (!cb) {\n          return;\n        }\n\n        settings = this.prepare(this._settings());\n        this.transport(settings).fail(onError).done(onResponse);\n\n        function onError() {\n          cb(true);\n        }\n\n        function onResponse(resp) {\n          cb(null, that.transform(resp));\n        }\n      },\n      clear: function clear() {\n        this.storage.clear();\n        return this;\n      }\n    });\n\n    return Prefetch;\n  }();\n\n  var Remote = function () {\n    \"use strict\";\n\n    function Remote(o) {\n      this.url = o.url;\n      this.prepare = o.prepare;\n      this.transform = o.transform;\n      this.indexResponse = o.indexResponse;\n      this.transport = new Transport({\n        cache: o.cache,\n        limiter: o.limiter,\n        transport: o.transport,\n        maxPendingRequests: o.maxPendingRequests\n      });\n    }\n\n    _.mixin(Remote.prototype, {\n      _settings: function settings() {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      get: function get(query, cb) {\n        var that = this,\n            settings;\n\n        if (!cb) {\n          return;\n        }\n\n        query = query || \"\";\n        settings = this.prepare(query, this._settings());\n        return this.transport.get(settings, onResponse);\n\n        function onResponse(err, resp) {\n          err ? cb([]) : cb(that.transform(resp));\n        }\n      },\n      cancelLastRequest: function cancelLastRequest() {\n        this.transport.cancel();\n      }\n    });\n\n    return Remote;\n  }();\n\n  var oParser = function () {\n    \"use strict\";\n\n    return function parse(o) {\n      var defaults, sorter;\n      defaults = {\n        initialize: true,\n        identify: _.stringify,\n        datumTokenizer: null,\n        queryTokenizer: null,\n        matchAnyQueryToken: false,\n        sufficient: 5,\n        indexRemote: false,\n        sorter: null,\n        local: [],\n        prefetch: null,\n        remote: null\n      };\n      o = _.mixin(defaults, o || {});\n      !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n      !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n      sorter = o.sorter;\n      o.sorter = sorter ? function (x) {\n        return x.sort(sorter);\n      } : _.identity;\n      o.local = _.isFunction(o.local) ? o.local() : o.local;\n      o.prefetch = parsePrefetch(o.prefetch);\n      o.remote = parseRemote(o.remote);\n      return o;\n    };\n\n    function parsePrefetch(o) {\n      var defaults;\n\n      if (!o) {\n        return null;\n      }\n\n      defaults = {\n        url: null,\n        ttl: 24 * 60 * 60 * 1e3,\n        cache: true,\n        cacheKey: null,\n        thumbprint: \"\",\n        prepare: _.identity,\n        transform: _.identity,\n        transport: null\n      };\n      o = _.isString(o) ? {\n        url: o\n      } : o;\n      o = _.mixin(defaults, o);\n      !o.url && $.error(\"prefetch requires url to be set\");\n      o.transform = o.filter || o.transform;\n      o.cacheKey = o.cacheKey || o.url;\n      o.thumbprint = VERSION + o.thumbprint;\n      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n      return o;\n    }\n\n    function parseRemote(o) {\n      var defaults;\n\n      if (!o) {\n        return;\n      }\n\n      defaults = {\n        url: null,\n        cache: true,\n        prepare: null,\n        replace: null,\n        wildcard: null,\n        limiter: null,\n        rateLimitBy: \"debounce\",\n        rateLimitWait: 300,\n        transform: _.identity,\n        transport: null\n      };\n      o = _.isString(o) ? {\n        url: o\n      } : o;\n      o = _.mixin(defaults, o);\n      !o.url && $.error(\"remote requires url to be set\");\n      o.transform = o.filter || o.transform;\n      o.prepare = toRemotePrepare(o);\n      o.limiter = toLimiter(o);\n      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n      delete o.replace;\n      delete o.wildcard;\n      delete o.rateLimitBy;\n      delete o.rateLimitWait;\n      return o;\n    }\n\n    function toRemotePrepare(o) {\n      var prepare, replace, wildcard;\n      prepare = o.prepare;\n      replace = o.replace;\n      wildcard = o.wildcard;\n\n      if (prepare) {\n        return prepare;\n      }\n\n      if (replace) {\n        prepare = prepareByReplace;\n      } else if (o.wildcard) {\n        prepare = prepareByWildcard;\n      } else {\n        prepare = identityPrepare;\n      }\n\n      return prepare;\n\n      function prepareByReplace(query, settings) {\n        settings.url = replace(settings.url, query);\n        return settings;\n      }\n\n      function prepareByWildcard(query, settings) {\n        settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n        return settings;\n      }\n\n      function identityPrepare(query, settings) {\n        return settings;\n      }\n    }\n\n    function toLimiter(o) {\n      var limiter, method, wait;\n      limiter = o.limiter;\n      method = o.rateLimitBy;\n      wait = o.rateLimitWait;\n\n      if (!limiter) {\n        limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n      }\n\n      return limiter;\n\n      function debounce(wait) {\n        return function debounce(fn) {\n          return _.debounce(fn, wait);\n        };\n      }\n\n      function throttle(wait) {\n        return function throttle(fn) {\n          return _.throttle(fn, wait);\n        };\n      }\n    }\n\n    function callbackToDeferred(fn) {\n      return function wrapper(o) {\n        var deferred = $.Deferred();\n        fn(o, onSuccess, onError);\n        return deferred;\n\n        function onSuccess(resp) {\n          _.defer(function () {\n            deferred.resolve(resp);\n          });\n        }\n\n        function onError(err) {\n          _.defer(function () {\n            deferred.reject(err);\n          });\n        }\n      };\n    }\n  }();\n\n  var Bloodhound = function () {\n    \"use strict\";\n\n    var old;\n    old = window && window.Bloodhound;\n\n    function Bloodhound(o) {\n      o = oParser(o);\n      this.sorter = o.sorter;\n      this.identify = o.identify;\n      this.sufficient = o.sufficient;\n      this.indexRemote = o.indexRemote;\n      this.local = o.local;\n      this.remote = o.remote ? new Remote(o.remote) : null;\n      this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n      this.index = new SearchIndex({\n        identify: this.identify,\n        datumTokenizer: o.datumTokenizer,\n        queryTokenizer: o.queryTokenizer\n      });\n      o.initialize !== false && this.initialize();\n    }\n\n    Bloodhound.noConflict = function noConflict() {\n      window && (window.Bloodhound = old);\n      return Bloodhound;\n    };\n\n    Bloodhound.tokenizers = tokenizers;\n\n    _.mixin(Bloodhound.prototype, {\n      __ttAdapter: function ttAdapter() {\n        var that = this;\n        return this.remote ? withAsync : withoutAsync;\n\n        function withAsync(query, sync, async) {\n          return that.search(query, sync, async);\n        }\n\n        function withoutAsync(query, sync) {\n          return that.search(query, sync);\n        }\n      },\n      _loadPrefetch: function loadPrefetch() {\n        var that = this,\n            deferred,\n            serialized;\n        deferred = $.Deferred();\n\n        if (!this.prefetch) {\n          deferred.resolve();\n        } else if (serialized = this.prefetch.fromCache()) {\n          this.index.bootstrap(serialized);\n          deferred.resolve();\n        } else {\n          this.prefetch.fromNetwork(done);\n        }\n\n        return deferred.promise();\n\n        function done(err, data) {\n          if (err) {\n            return deferred.reject();\n          }\n\n          that.add(data);\n          that.prefetch.store(that.index.serialize());\n          deferred.resolve();\n        }\n      },\n      _initialize: function initialize() {\n        var that = this,\n            deferred;\n        this.clear();\n\n        (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n\n        return this.initPromise;\n\n        function addLocalToIndex() {\n          that.add(that.local);\n        }\n      },\n      initialize: function initialize(force) {\n        return !this.initPromise || force ? this._initialize() : this.initPromise;\n      },\n      add: function add(data) {\n        this.index.add(data);\n        return this;\n      },\n      get: function get(ids) {\n        ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n        return this.index.get(ids);\n      },\n      search: function search(query, sync, async) {\n        var that = this,\n            local;\n        sync = sync || _.noop;\n        async = async || _.noop;\n        local = this.sorter(this.index.search(query));\n        sync(this.remote ? local.slice() : local);\n\n        if (this.remote && local.length < this.sufficient) {\n          this.remote.get(query, processRemote);\n        } else if (this.remote) {\n          this.remote.cancelLastRequest();\n        }\n\n        return this;\n\n        function processRemote(remote) {\n          var nonDuplicates = [];\n\n          _.each(remote, function (r) {\n            !_.some(local, function (l) {\n              return that.identify(r) === that.identify(l);\n            }) && nonDuplicates.push(r);\n          });\n\n          that.indexRemote && that.add(nonDuplicates);\n          async(nonDuplicates);\n        }\n      },\n      all: function all() {\n        return this.index.all();\n      },\n      clear: function clear() {\n        this.index.reset();\n        return this;\n      },\n      clearPrefetchCache: function clearPrefetchCache() {\n        this.prefetch && this.prefetch.clear();\n        return this;\n      },\n      clearRemoteCache: function clearRemoteCache() {\n        Transport.resetCache();\n        return this;\n      },\n      ttAdapter: function ttAdapter() {\n        return this.__ttAdapter();\n      }\n    });\n\n    return Bloodhound;\n  }();\n\n  return Bloodhound;\n});\n\n(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([\"jquery\"], function (a0) {\n      return factory(a0);\n    });\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    factory(root[\"jQuery\"]);\n  }\n})(this, function ($) {\n  var _ = function () {\n    \"use strict\";\n\n    return {\n      isMsie: function () {\n        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n      },\n      isBlankString: function (str) {\n        return !str || /^\\s*$/.test(str);\n      },\n      escapeRegExChars: function (str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      },\n      isString: function (obj) {\n        return typeof obj === \"string\";\n      },\n      isNumber: function (obj) {\n        return typeof obj === \"number\";\n      },\n      isArray: $.isArray,\n      isFunction: $.isFunction,\n      isObject: $.isPlainObject,\n      isUndefined: function (obj) {\n        return typeof obj === \"undefined\";\n      },\n      isElement: function (obj) {\n        return !!(obj && obj.nodeType === 1);\n      },\n      isJQuery: function (obj) {\n        return obj instanceof $;\n      },\n      toStr: function toStr(s) {\n        return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n      },\n      bind: $.proxy,\n      each: function (collection, cb) {\n        $.each(collection, reverseArgs);\n\n        function reverseArgs(index, value) {\n          return cb(value, index);\n        }\n      },\n      map: $.map,\n      filter: $.grep,\n      every: function (obj, test) {\n        var result = true;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (!(result = test.call(null, val, key, obj))) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      some: function (obj, test) {\n        var result = false;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (result = test.call(null, val, key, obj)) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      mixin: $.extend,\n      identity: function (x) {\n        return x;\n      },\n      clone: function (obj) {\n        return $.extend(true, {}, obj);\n      },\n      getIdGenerator: function () {\n        var counter = 0;\n        return function () {\n          return counter++;\n        };\n      },\n      templatify: function templatify(obj) {\n        return $.isFunction(obj) ? obj : template;\n\n        function template() {\n          return String(obj);\n        }\n      },\n      defer: function (fn) {\n        setTimeout(fn, 0);\n      },\n      debounce: function (func, wait, immediate) {\n        var timeout, result;\n        return function () {\n          var context = this,\n              args = arguments,\n              later,\n              callNow;\n\n          later = function () {\n            timeout = null;\n\n            if (!immediate) {\n              result = func.apply(context, args);\n            }\n          };\n\n          callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n\n          if (callNow) {\n            result = func.apply(context, args);\n          }\n\n          return result;\n        };\n      },\n      throttle: function (func, wait) {\n        var context, args, timeout, result, previous, later;\n        previous = 0;\n\n        later = function () {\n          previous = new Date();\n          timeout = null;\n          result = func.apply(context, args);\n        };\n\n        return function () {\n          var now = new Date(),\n              remaining = wait - (now - previous);\n          context = this;\n          args = arguments;\n\n          if (remaining <= 0) {\n            clearTimeout(timeout);\n            timeout = null;\n            previous = now;\n            result = func.apply(context, args);\n          } else if (!timeout) {\n            timeout = setTimeout(later, remaining);\n          }\n\n          return result;\n        };\n      },\n      stringify: function (val) {\n        return _.isString(val) ? val : JSON.stringify(val);\n      },\n      guid: function () {\n        function _p8(s) {\n          var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n          return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n        }\n\n        return \"tt-\" + _p8() + _p8(true) + _p8(true) + _p8();\n      },\n      noop: function () {}\n    };\n  }();\n\n  var WWW = function () {\n    \"use strict\";\n\n    var defaultClassNames = {\n      wrapper: \"twitter-typeahead\",\n      input: \"tt-input\",\n      hint: \"tt-hint\",\n      menu: \"tt-menu\",\n      dataset: \"tt-dataset\",\n      suggestion: \"tt-suggestion\",\n      selectable: \"tt-selectable\",\n      empty: \"tt-empty\",\n      open: \"tt-open\",\n      cursor: \"tt-cursor\",\n      highlight: \"tt-highlight\"\n    };\n    return build;\n\n    function build(o) {\n      var www, classes;\n      classes = _.mixin({}, defaultClassNames, o);\n      www = {\n        css: buildCss(),\n        classes: classes,\n        html: buildHtml(classes),\n        selectors: buildSelectors(classes)\n      };\n      return {\n        css: www.css,\n        html: www.html,\n        classes: www.classes,\n        selectors: www.selectors,\n        mixin: function (o) {\n          _.mixin(o, www);\n        }\n      };\n    }\n\n    function buildHtml(c) {\n      return {\n        wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n        menu: '<div role=\"listbox\" class=\"' + c.menu + '\"></div>'\n      };\n    }\n\n    function buildSelectors(classes) {\n      var selectors = {};\n\n      _.each(classes, function (v, k) {\n        selectors[k] = \".\" + v;\n      });\n\n      return selectors;\n    }\n\n    function buildCss() {\n      var css = {\n        wrapper: {\n          position: \"relative\",\n          display: \"inline-block\"\n        },\n        hint: {\n          position: \"absolute\",\n          top: \"0\",\n          left: \"0\",\n          borderColor: \"transparent\",\n          boxShadow: \"none\",\n          opacity: \"1\"\n        },\n        input: {\n          position: \"relative\",\n          verticalAlign: \"top\",\n          backgroundColor: \"transparent\"\n        },\n        inputWithNoHint: {\n          position: \"relative\",\n          verticalAlign: \"top\"\n        },\n        menu: {\n          position: \"absolute\",\n          top: \"100%\",\n          left: \"0\",\n          zIndex: \"100\",\n          display: \"none\"\n        },\n        ltr: {\n          left: \"0\",\n          right: \"auto\"\n        },\n        rtl: {\n          left: \"auto\",\n          right: \" 0\"\n        }\n      };\n\n      if (_.isMsie()) {\n        _.mixin(css.input, {\n          backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n        });\n      }\n\n      return css;\n    }\n  }();\n\n  var EventBus = function () {\n    \"use strict\";\n\n    var namespace, deprecationMap;\n    namespace = \"typeahead:\";\n    deprecationMap = {\n      render: \"rendered\",\n      cursorchange: \"cursorchanged\",\n      select: \"selected\",\n      autocomplete: \"autocompleted\"\n    };\n\n    function EventBus(o) {\n      if (!o || !o.el) {\n        $.error(\"EventBus initialized without el\");\n      }\n\n      this.$el = $(o.el);\n    }\n\n    _.mixin(EventBus.prototype, {\n      _trigger: function (type, args) {\n        var $e = $.Event(namespace + type);\n        this.$el.trigger.call(this.$el, $e, args || []);\n        return $e;\n      },\n      before: function (type) {\n        var args, $e;\n        args = [].slice.call(arguments, 1);\n        $e = this._trigger(\"before\" + type, args);\n        return $e.isDefaultPrevented();\n      },\n      trigger: function (type) {\n        var deprecatedType;\n\n        this._trigger(type, [].slice.call(arguments, 1));\n\n        if (deprecatedType = deprecationMap[type]) {\n          this._trigger(deprecatedType, [].slice.call(arguments, 1));\n        }\n      }\n    });\n\n    return EventBus;\n  }();\n\n  var EventEmitter = function () {\n    \"use strict\";\n\n    var splitter = /\\s+/,\n        nextTick = getNextTick();\n    return {\n      onSync: onSync,\n      onAsync: onAsync,\n      off: off,\n      trigger: trigger\n    };\n\n    function on(method, types, cb, context) {\n      var type;\n\n      if (!cb) {\n        return this;\n      }\n\n      types = types.split(splitter);\n      cb = context ? bindContext(cb, context) : cb;\n      this._callbacks = this._callbacks || {};\n\n      while (type = types.shift()) {\n        this._callbacks[type] = this._callbacks[type] || {\n          sync: [],\n          async: []\n        };\n\n        this._callbacks[type][method].push(cb);\n      }\n\n      return this;\n    }\n\n    function onAsync(types, cb, context) {\n      return on.call(this, \"async\", types, cb, context);\n    }\n\n    function onSync(types, cb, context) {\n      return on.call(this, \"sync\", types, cb, context);\n    }\n\n    function off(types) {\n      var type;\n\n      if (!this._callbacks) {\n        return this;\n      }\n\n      types = types.split(splitter);\n\n      while (type = types.shift()) {\n        delete this._callbacks[type];\n      }\n\n      return this;\n    }\n\n    function trigger(types) {\n      var type, callbacks, args, syncFlush, asyncFlush;\n\n      if (!this._callbacks) {\n        return this;\n      }\n\n      types = types.split(splitter);\n      args = [].slice.call(arguments, 1);\n\n      while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n        syncFlush = getFlush(callbacks.sync, this, [type].concat(args));\n        asyncFlush = getFlush(callbacks.async, this, [type].concat(args));\n        syncFlush() && nextTick(asyncFlush);\n      }\n\n      return this;\n    }\n\n    function getFlush(callbacks, context, args) {\n      return flush;\n\n      function flush() {\n        var cancelled;\n\n        for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n          cancelled = callbacks[i].apply(context, args) === false;\n        }\n\n        return !cancelled;\n      }\n    }\n\n    function getNextTick() {\n      var nextTickFn;\n\n      if (window.setImmediate) {\n        nextTickFn = function nextTickSetImmediate(fn) {\n          setImmediate(function () {\n            fn();\n          });\n        };\n      } else {\n        nextTickFn = function nextTickSetTimeout(fn) {\n          setTimeout(function () {\n            fn();\n          }, 0);\n        };\n      }\n\n      return nextTickFn;\n    }\n\n    function bindContext(fn, context) {\n      return fn.bind ? fn.bind(context) : function () {\n        fn.apply(context, [].slice.call(arguments, 0));\n      };\n    }\n  }();\n\n  var highlight = function (doc) {\n    \"use strict\";\n\n    var defaults = {\n      node: null,\n      pattern: null,\n      tagName: \"strong\",\n      className: null,\n      wordsOnly: false,\n      caseSensitive: false,\n      diacriticInsensitive: false\n    };\n    var accented = {\n      A: \"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]\",\n      B: \"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]\",\n      C: \"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]\",\n      D: \"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]\",\n      E: \"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]\",\n      F: \"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]\",\n      G: \"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]\",\n      H: \"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]\",\n      I: \"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]\",\n      J: \"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]\",\n      K: \"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]\",\n      L: \"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]\",\n      M: \"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]\",\n      N: \"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]\",\n      O: \"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]\",\n      P: \"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]\",\n      Q: \"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]\",\n      R: \"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]\",\n      S: \"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]\",\n      T: \"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]\",\n      U: \"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]\",\n      V: \"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]\",\n      W: \"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]\",\n      X: \"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]\",\n      Y: \"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]\",\n      Z: \"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]\"\n    };\n    return function hightlight(o) {\n      var regex;\n      o = _.mixin({}, defaults, o);\n\n      if (!o.node || !o.pattern) {\n        return;\n      }\n\n      o.pattern = _.isArray(o.pattern) ? o.pattern : [o.pattern];\n      regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly, o.diacriticInsensitive);\n      traverse(o.node, hightlightTextNode);\n\n      function hightlightTextNode(textNode) {\n        var match, patternNode, wrapperNode;\n\n        if (match = regex.exec(textNode.data)) {\n          wrapperNode = doc.createElement(o.tagName);\n          o.className && (wrapperNode.className = o.className);\n          patternNode = textNode.splitText(match.index);\n          patternNode.splitText(match[0].length);\n          wrapperNode.appendChild(patternNode.cloneNode(true));\n          textNode.parentNode.replaceChild(wrapperNode, patternNode);\n        }\n\n        return !!match;\n      }\n\n      function traverse(el, hightlightTextNode) {\n        var childNode,\n            TEXT_NODE_TYPE = 3;\n\n        for (var i = 0; i < el.childNodes.length; i++) {\n          childNode = el.childNodes[i];\n\n          if (childNode.nodeType === TEXT_NODE_TYPE) {\n            i += hightlightTextNode(childNode) ? 1 : 0;\n          } else {\n            traverse(childNode, hightlightTextNode);\n          }\n        }\n      }\n    };\n\n    function accent_replacer(chr) {\n      return accented[chr.toUpperCase()] || chr;\n    }\n\n    function getRegex(patterns, caseSensitive, wordsOnly, diacriticInsensitive) {\n      var escapedPatterns = [],\n          regexStr;\n\n      for (var i = 0, len = patterns.length; i < len; i++) {\n        var escapedWord = _.escapeRegExChars(patterns[i]);\n\n        if (diacriticInsensitive) {\n          escapedWord = escapedWord.replace(/\\S/g, accent_replacer);\n        }\n\n        escapedPatterns.push(escapedWord);\n      }\n\n      regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n      return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n    }\n  }(window.document);\n\n  var Input = function () {\n    \"use strict\";\n\n    var specialKeyCodeMap;\n    specialKeyCodeMap = {\n      9: \"tab\",\n      27: \"esc\",\n      37: \"left\",\n      39: \"right\",\n      13: \"enter\",\n      38: \"up\",\n      40: \"down\"\n    };\n\n    function Input(o, www) {\n      var id;\n      o = o || {};\n\n      if (!o.input) {\n        $.error(\"input is missing\");\n      }\n\n      www.mixin(this);\n      this.$hint = $(o.hint);\n      this.$input = $(o.input);\n      this.$menu = $(o.menu);\n      id = this.$input.attr(\"id\") || _.guid();\n      this.$menu.attr(\"id\", id + \"_listbox\");\n      this.$hint.attr({\n        \"aria-hidden\": true\n      });\n      this.$input.attr({\n        \"aria-owns\": id + \"_listbox\",\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-expanded\": false\n      });\n      this.query = this.$input.val();\n      this.queryWhenFocused = this.hasFocus() ? this.query : null;\n      this.$overflowHelper = buildOverflowHelper(this.$input);\n\n      this._checkLanguageDirection();\n\n      if (this.$hint.length === 0) {\n        this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n      }\n\n      this.onSync(\"cursorchange\", this._updateDescendent);\n    }\n\n    Input.normalizeQuery = function (str) {\n      return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n    };\n\n    _.mixin(Input.prototype, EventEmitter, {\n      _onBlur: function onBlur() {\n        this.resetInputValue();\n        this.trigger(\"blurred\");\n      },\n      _onFocus: function onFocus() {\n        this.queryWhenFocused = this.query;\n        this.trigger(\"focused\");\n      },\n      _onKeydown: function onKeydown($e) {\n        var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n\n        this._managePreventDefault(keyName, $e);\n\n        if (keyName && this._shouldTrigger(keyName, $e)) {\n          this.trigger(keyName + \"Keyed\", $e);\n        }\n      },\n      _onInput: function onInput() {\n        this._setQuery(this.getInputValue());\n\n        this.clearHintIfInvalid();\n\n        this._checkLanguageDirection();\n      },\n      _managePreventDefault: function managePreventDefault(keyName, $e) {\n        var preventDefault;\n\n        switch (keyName) {\n          case \"up\":\n          case \"down\":\n            preventDefault = !withModifier($e);\n            break;\n\n          default:\n            preventDefault = false;\n        }\n\n        preventDefault && $e.preventDefault();\n      },\n      _shouldTrigger: function shouldTrigger(keyName, $e) {\n        var trigger;\n\n        switch (keyName) {\n          case \"tab\":\n            trigger = !withModifier($e);\n            break;\n\n          default:\n            trigger = true;\n        }\n\n        return trigger;\n      },\n      _checkLanguageDirection: function checkLanguageDirection() {\n        var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n\n        if (this.dir !== dir) {\n          this.dir = dir;\n          this.$hint.attr(\"dir\", dir);\n          this.trigger(\"langDirChanged\", dir);\n        }\n      },\n      _setQuery: function setQuery(val, silent) {\n        var areEquivalent, hasDifferentWhitespace;\n        areEquivalent = areQueriesEquivalent(val, this.query);\n        hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n        this.query = val;\n\n        if (!silent && !areEquivalent) {\n          this.trigger(\"queryChanged\", this.query);\n        } else if (!silent && hasDifferentWhitespace) {\n          this.trigger(\"whitespaceChanged\", this.query);\n        }\n      },\n      _updateDescendent: function updateDescendent(event, id) {\n        this.$input.attr(\"aria-activedescendant\", id);\n      },\n      bind: function () {\n        var that = this,\n            onBlur,\n            onFocus,\n            onKeydown,\n            onInput;\n        onBlur = _.bind(this._onBlur, this);\n        onFocus = _.bind(this._onFocus, this);\n        onKeydown = _.bind(this._onKeydown, this);\n        onInput = _.bind(this._onInput, this);\n        this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n\n        if (!_.isMsie() || _.isMsie() > 9) {\n          this.$input.on(\"input.tt\", onInput);\n        } else {\n          this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function ($e) {\n            if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n              return;\n            }\n\n            _.defer(_.bind(that._onInput, that, $e));\n          });\n        }\n\n        return this;\n      },\n      focus: function focus() {\n        this.$input.focus();\n      },\n      blur: function blur() {\n        this.$input.blur();\n      },\n      getLangDir: function getLangDir() {\n        return this.dir;\n      },\n      getQuery: function getQuery() {\n        return this.query || \"\";\n      },\n      setQuery: function setQuery(val, silent) {\n        this.setInputValue(val);\n\n        this._setQuery(val, silent);\n      },\n      hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n        return this.query !== this.queryWhenFocused;\n      },\n      getInputValue: function getInputValue() {\n        return this.$input.val();\n      },\n      setInputValue: function setInputValue(value) {\n        this.$input.val(value);\n        this.clearHintIfInvalid();\n\n        this._checkLanguageDirection();\n      },\n      resetInputValue: function resetInputValue() {\n        this.setInputValue(this.query);\n      },\n      getHint: function getHint() {\n        return this.$hint.val();\n      },\n      setHint: function setHint(value) {\n        this.$hint.val(value);\n      },\n      clearHint: function clearHint() {\n        this.setHint(\"\");\n      },\n      clearHintIfInvalid: function clearHintIfInvalid() {\n        var val, hint, valIsPrefixOfHint, isValid;\n        val = this.getInputValue();\n        hint = this.getHint();\n        valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n        isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n        !isValid && this.clearHint();\n      },\n      hasFocus: function hasFocus() {\n        return this.$input.is(\":focus\");\n      },\n      hasOverflow: function hasOverflow() {\n        var constraint = this.$input.width() - 2;\n        this.$overflowHelper.text(this.getInputValue());\n        return this.$overflowHelper.width() >= constraint;\n      },\n      isCursorAtEnd: function () {\n        var valueLength, selectionStart, range;\n        valueLength = this.$input.val().length;\n        selectionStart = this.$input[0].selectionStart;\n\n        if (_.isNumber(selectionStart)) {\n          return selectionStart === valueLength;\n        } else if (document.selection) {\n          range = document.selection.createRange();\n          range.moveStart(\"character\", -valueLength);\n          return valueLength === range.text.length;\n        }\n\n        return true;\n      },\n      destroy: function destroy() {\n        this.$hint.off(\".tt\");\n        this.$input.off(\".tt\");\n        this.$overflowHelper.remove();\n        this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n      },\n      setAriaExpanded: function setAriaExpanded(value) {\n        this.$input.attr(\"aria-expanded\", value);\n      }\n    });\n\n    return Input;\n\n    function buildOverflowHelper($input) {\n      return $('<pre aria-hidden=\"true\"></pre>').css({\n        position: \"absolute\",\n        visibility: \"hidden\",\n        whiteSpace: \"pre\",\n        fontFamily: $input.css(\"font-family\"),\n        fontSize: $input.css(\"font-size\"),\n        fontStyle: $input.css(\"font-style\"),\n        fontVariant: $input.css(\"font-variant\"),\n        fontWeight: $input.css(\"font-weight\"),\n        wordSpacing: $input.css(\"word-spacing\"),\n        letterSpacing: $input.css(\"letter-spacing\"),\n        textIndent: $input.css(\"text-indent\"),\n        textRendering: $input.css(\"text-rendering\"),\n        textTransform: $input.css(\"text-transform\")\n      }).insertAfter($input);\n    }\n\n    function areQueriesEquivalent(a, b) {\n      return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n    }\n\n    function withModifier($e) {\n      return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n    }\n  }();\n\n  var Dataset = function () {\n    \"use strict\";\n\n    var keys, nameGenerator;\n    keys = {\n      dataset: \"tt-selectable-dataset\",\n      val: \"tt-selectable-display\",\n      obj: \"tt-selectable-object\"\n    };\n    nameGenerator = _.getIdGenerator();\n\n    function Dataset(o, www) {\n      o = o || {};\n      o.templates = o.templates || {};\n      o.templates.notFound = o.templates.notFound || o.templates.empty;\n\n      if (!o.source) {\n        $.error(\"missing source\");\n      }\n\n      if (!o.node) {\n        $.error(\"missing node\");\n      }\n\n      if (o.name && !isValidName(o.name)) {\n        $.error(\"invalid dataset name: \" + o.name);\n      }\n\n      www.mixin(this);\n      this.highlight = !!o.highlight;\n      this.name = _.toStr(o.name || nameGenerator());\n      this.limit = o.limit || 5;\n      this.displayFn = getDisplayFn(o.display || o.displayKey);\n      this.templates = getTemplates(o.templates, this.displayFn);\n      this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n      this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n\n      this._resetLastSuggestion();\n\n      this.$el = $(o.node).attr(\"role\", \"presentation\").addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n    }\n\n    Dataset.extractData = function extractData(el) {\n      var $el = $(el);\n\n      if ($el.data(keys.obj)) {\n        return {\n          dataset: $el.data(keys.dataset) || \"\",\n          val: $el.data(keys.val) || \"\",\n          obj: $el.data(keys.obj) || null\n        };\n      }\n\n      return null;\n    };\n\n    _.mixin(Dataset.prototype, EventEmitter, {\n      _overwrite: function overwrite(query, suggestions) {\n        suggestions = suggestions || [];\n\n        if (suggestions.length) {\n          this._renderSuggestions(query, suggestions);\n        } else if (this.async && this.templates.pending) {\n          this._renderPending(query);\n        } else if (!this.async && this.templates.notFound) {\n          this._renderNotFound(query);\n        } else {\n          this._empty();\n        }\n\n        this.trigger(\"rendered\", suggestions, false, this.name);\n      },\n      _append: function append(query, suggestions) {\n        suggestions = suggestions || [];\n\n        if (suggestions.length && this.$lastSuggestion.length) {\n          this._appendSuggestions(query, suggestions);\n        } else if (suggestions.length) {\n          this._renderSuggestions(query, suggestions);\n        } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n          this._renderNotFound(query);\n        }\n\n        this.trigger(\"rendered\", suggestions, true, this.name);\n      },\n      _renderSuggestions: function renderSuggestions(query, suggestions) {\n        var $fragment;\n        $fragment = this._getSuggestionsFragment(query, suggestions);\n        this.$lastSuggestion = $fragment.children().last();\n        this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n      },\n      _appendSuggestions: function appendSuggestions(query, suggestions) {\n        var $fragment, $lastSuggestion;\n        $fragment = this._getSuggestionsFragment(query, suggestions);\n        $lastSuggestion = $fragment.children().last();\n        this.$lastSuggestion.after($fragment);\n        this.$lastSuggestion = $lastSuggestion;\n      },\n      _renderPending: function renderPending(query) {\n        var template = this.templates.pending;\n\n        this._resetLastSuggestion();\n\n        template && this.$el.html(template({\n          query: query,\n          dataset: this.name\n        }));\n      },\n      _renderNotFound: function renderNotFound(query) {\n        var template = this.templates.notFound;\n\n        this._resetLastSuggestion();\n\n        template && this.$el.html(template({\n          query: query,\n          dataset: this.name\n        }));\n      },\n      _empty: function empty() {\n        this.$el.empty();\n\n        this._resetLastSuggestion();\n      },\n      _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n        var that = this,\n            fragment;\n        fragment = document.createDocumentFragment();\n\n        _.each(suggestions, function getSuggestionNode(suggestion) {\n          var $el, context;\n          context = that._injectQuery(query, suggestion);\n          $el = $(that.templates.suggestion(context)).data(keys.dataset, that.name).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n          fragment.appendChild($el[0]);\n        });\n\n        this.highlight && highlight({\n          className: this.classes.highlight,\n          node: fragment,\n          pattern: query\n        });\n        return $(fragment);\n      },\n      _getFooter: function getFooter(query, suggestions) {\n        return this.templates.footer ? this.templates.footer({\n          query: query,\n          suggestions: suggestions,\n          dataset: this.name\n        }) : null;\n      },\n      _getHeader: function getHeader(query, suggestions) {\n        return this.templates.header ? this.templates.header({\n          query: query,\n          suggestions: suggestions,\n          dataset: this.name\n        }) : null;\n      },\n      _resetLastSuggestion: function resetLastSuggestion() {\n        this.$lastSuggestion = $();\n      },\n      _injectQuery: function injectQuery(query, obj) {\n        return _.isObject(obj) ? _.mixin({\n          _query: query\n        }, obj) : obj;\n      },\n      update: function update(query) {\n        var that = this,\n            canceled = false,\n            syncCalled = false,\n            rendered = 0;\n        this.cancel();\n\n        this.cancel = function cancel() {\n          canceled = true;\n          that.cancel = $.noop;\n          that.async && that.trigger(\"asyncCanceled\", query, that.name);\n        };\n\n        this.source(query, sync, async);\n        !syncCalled && sync([]);\n\n        function sync(suggestions) {\n          if (syncCalled) {\n            return;\n          }\n\n          syncCalled = true;\n          suggestions = (suggestions || []).slice(0, that.limit);\n          rendered = suggestions.length;\n\n          that._overwrite(query, suggestions);\n\n          if (rendered < that.limit && that.async) {\n            that.trigger(\"asyncRequested\", query, that.name);\n          }\n        }\n\n        function async(suggestions) {\n          suggestions = suggestions || [];\n\n          if (!canceled && rendered < that.limit) {\n            that.cancel = $.noop;\n            var idx = Math.abs(rendered - that.limit);\n            rendered += idx;\n\n            that._append(query, suggestions.slice(0, idx));\n\n            that.async && that.trigger(\"asyncReceived\", query, that.name);\n          }\n        }\n      },\n      cancel: $.noop,\n      clear: function clear() {\n        this._empty();\n\n        this.cancel();\n        this.trigger(\"cleared\");\n      },\n      isEmpty: function isEmpty() {\n        return this.$el.is(\":empty\");\n      },\n      destroy: function destroy() {\n        this.$el = $(\"<div>\");\n      }\n    });\n\n    return Dataset;\n\n    function getDisplayFn(display) {\n      display = display || _.stringify;\n      return _.isFunction(display) ? display : displayFn;\n\n      function displayFn(obj) {\n        return obj[display];\n      }\n    }\n\n    function getTemplates(templates, displayFn) {\n      return {\n        notFound: templates.notFound && _.templatify(templates.notFound),\n        pending: templates.pending && _.templatify(templates.pending),\n        header: templates.header && _.templatify(templates.header),\n        footer: templates.footer && _.templatify(templates.footer),\n        suggestion: templates.suggestion ? userSuggestionTemplate : suggestionTemplate\n      };\n\n      function userSuggestionTemplate(context) {\n        var template = templates.suggestion;\n        return $(template(context)).attr(\"id\", _.guid());\n      }\n\n      function suggestionTemplate(context) {\n        return $('<div role=\"option\">').attr(\"id\", _.guid()).text(displayFn(context));\n      }\n    }\n\n    function isValidName(str) {\n      return /^[_a-zA-Z0-9-]+$/.test(str);\n    }\n  }();\n\n  var Menu = function () {\n    \"use strict\";\n\n    function Menu(o, www) {\n      var that = this;\n      o = o || {};\n\n      if (!o.node) {\n        $.error(\"node is required\");\n      }\n\n      www.mixin(this);\n      this.$node = $(o.node);\n      this.query = null;\n      this.datasets = _.map(o.datasets, initializeDataset);\n\n      function initializeDataset(oDataset) {\n        var node = that.$node.find(oDataset.node).first();\n        oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n        return new Dataset(oDataset, www);\n      }\n    }\n\n    _.mixin(Menu.prototype, EventEmitter, {\n      _onSelectableClick: function onSelectableClick($e) {\n        this.trigger(\"selectableClicked\", $($e.currentTarget));\n      },\n      _onRendered: function onRendered(type, dataset, suggestions, async) {\n        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n        this.trigger(\"datasetRendered\", dataset, suggestions, async);\n      },\n      _onCleared: function onCleared() {\n        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n        this.trigger(\"datasetCleared\");\n      },\n      _propagate: function propagate() {\n        this.trigger.apply(this, arguments);\n      },\n      _allDatasetsEmpty: function allDatasetsEmpty() {\n        return _.every(this.datasets, _.bind(function isDatasetEmpty(dataset) {\n          var isEmpty = dataset.isEmpty();\n          this.$node.attr(\"aria-expanded\", !isEmpty);\n          return isEmpty;\n        }, this));\n      },\n      _getSelectables: function getSelectables() {\n        return this.$node.find(this.selectors.selectable);\n      },\n      _removeCursor: function _removeCursor() {\n        var $selectable = this.getActiveSelectable();\n        $selectable && $selectable.removeClass(this.classes.cursor);\n      },\n      _ensureVisible: function ensureVisible($el) {\n        var elTop, elBottom, nodeScrollTop, nodeHeight;\n        elTop = $el.position().top;\n        elBottom = elTop + $el.outerHeight(true);\n        nodeScrollTop = this.$node.scrollTop();\n        nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n\n        if (elTop < 0) {\n          this.$node.scrollTop(nodeScrollTop + elTop);\n        } else if (nodeHeight < elBottom) {\n          this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n        }\n      },\n      bind: function () {\n        var that = this,\n            onSelectableClick;\n        onSelectableClick = _.bind(this._onSelectableClick, this);\n        this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n        this.$node.on(\"mouseover\", this.selectors.selectable, function () {\n          that.setCursor($(this));\n        });\n        this.$node.on(\"mouseleave\", function () {\n          that._removeCursor();\n        });\n\n        _.each(this.datasets, function (dataset) {\n          dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n        });\n\n        return this;\n      },\n      isOpen: function isOpen() {\n        return this.$node.hasClass(this.classes.open);\n      },\n      open: function open() {\n        this.$node.scrollTop(0);\n        this.$node.addClass(this.classes.open);\n      },\n      close: function close() {\n        this.$node.attr(\"aria-expanded\", false);\n        this.$node.removeClass(this.classes.open);\n\n        this._removeCursor();\n      },\n      setLanguageDirection: function setLanguageDirection(dir) {\n        this.$node.attr(\"dir\", dir);\n      },\n      selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n        var $selectables, $oldCursor, oldIndex, newIndex;\n        $oldCursor = this.getActiveSelectable();\n        $selectables = this._getSelectables();\n        oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n        newIndex = oldIndex + delta;\n        newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n        newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n        return newIndex === -1 ? null : $selectables.eq(newIndex);\n      },\n      setCursor: function setCursor($selectable) {\n        this._removeCursor();\n\n        if ($selectable = $selectable && $selectable.first()) {\n          $selectable.addClass(this.classes.cursor);\n\n          this._ensureVisible($selectable);\n        }\n      },\n      getSelectableData: function getSelectableData($el) {\n        return $el && $el.length ? Dataset.extractData($el) : null;\n      },\n      getActiveSelectable: function getActiveSelectable() {\n        var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n\n        return $selectable.length ? $selectable : null;\n      },\n      getTopSelectable: function getTopSelectable() {\n        var $selectable = this._getSelectables().first();\n\n        return $selectable.length ? $selectable : null;\n      },\n      update: function update(query) {\n        var isValidUpdate = query !== this.query;\n\n        if (isValidUpdate) {\n          this.query = query;\n\n          _.each(this.datasets, updateDataset);\n        }\n\n        return isValidUpdate;\n\n        function updateDataset(dataset) {\n          dataset.update(query);\n        }\n      },\n      empty: function empty() {\n        _.each(this.datasets, clearDataset);\n\n        this.query = null;\n        this.$node.addClass(this.classes.empty);\n\n        function clearDataset(dataset) {\n          dataset.clear();\n        }\n      },\n      destroy: function destroy() {\n        this.$node.off(\".tt\");\n        this.$node = $(\"<div>\");\n\n        _.each(this.datasets, destroyDataset);\n\n        function destroyDataset(dataset) {\n          dataset.destroy();\n        }\n      }\n    });\n\n    return Menu;\n  }();\n\n  var Status = function () {\n    \"use strict\";\n\n    function Status(options) {\n      this.$el = $(\"<span></span>\", {\n        role: \"status\",\n        \"aria-live\": \"polite\"\n      }).css({\n        position: \"absolute\",\n        padding: \"0\",\n        border: \"0\",\n        height: \"1px\",\n        width: \"1px\",\n        \"margin-bottom\": \"-1px\",\n        \"margin-right\": \"-1px\",\n        overflow: \"hidden\",\n        clip: \"rect(0 0 0 0)\",\n        \"white-space\": \"nowrap\"\n      });\n      options.$input.after(this.$el);\n\n      _.each(options.menu.datasets, _.bind(function (dataset) {\n        if (dataset.onSync) {\n          dataset.onSync(\"rendered\", _.bind(this.update, this));\n          dataset.onSync(\"cleared\", _.bind(this.cleared, this));\n        }\n      }, this));\n    }\n\n    _.mixin(Status.prototype, {\n      update: function update(event, suggestions) {\n        var length = suggestions.length;\n        var words;\n\n        if (length === 1) {\n          words = {\n            result: \"result\",\n            is: \"is\"\n          };\n        } else {\n          words = {\n            result: \"results\",\n            is: \"are\"\n          };\n        }\n\n        this.$el.text(length + \" \" + words.result + \" \" + words.is + \" available, use up and down arrow keys to navigate.\");\n      },\n      cleared: function () {\n        this.$el.text(\"\");\n      }\n    });\n\n    return Status;\n  }();\n\n  var DefaultMenu = function () {\n    \"use strict\";\n\n    var s = Menu.prototype;\n\n    function DefaultMenu() {\n      Menu.apply(this, [].slice.call(arguments, 0));\n    }\n\n    _.mixin(DefaultMenu.prototype, Menu.prototype, {\n      open: function open() {\n        !this._allDatasetsEmpty() && this._show();\n        return s.open.apply(this, [].slice.call(arguments, 0));\n      },\n      close: function close() {\n        this._hide();\n\n        return s.close.apply(this, [].slice.call(arguments, 0));\n      },\n      _onRendered: function onRendered() {\n        if (this._allDatasetsEmpty()) {\n          this._hide();\n        } else {\n          this.isOpen() && this._show();\n        }\n\n        return s._onRendered.apply(this, [].slice.call(arguments, 0));\n      },\n      _onCleared: function onCleared() {\n        if (this._allDatasetsEmpty()) {\n          this._hide();\n        } else {\n          this.isOpen() && this._show();\n        }\n\n        return s._onCleared.apply(this, [].slice.call(arguments, 0));\n      },\n      setLanguageDirection: function setLanguageDirection(dir) {\n        this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n        return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n      },\n      _hide: function hide() {\n        this.$node.hide();\n      },\n      _show: function show() {\n        this.$node.css(\"display\", \"block\");\n      }\n    });\n\n    return DefaultMenu;\n  }();\n\n  var Typeahead = function () {\n    \"use strict\";\n\n    function Typeahead(o, www) {\n      var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n      o = o || {};\n\n      if (!o.input) {\n        $.error(\"missing input\");\n      }\n\n      if (!o.menu) {\n        $.error(\"missing menu\");\n      }\n\n      if (!o.eventBus) {\n        $.error(\"missing event bus\");\n      }\n\n      www.mixin(this);\n      this.eventBus = o.eventBus;\n      this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n      this.input = o.input;\n      this.menu = o.menu;\n      this.enabled = true;\n      this.autoselect = !!o.autoselect;\n      this.active = false;\n      this.input.hasFocus() && this.activate();\n      this.dir = this.input.getLangDir();\n\n      this._hacks();\n\n      this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n      onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n      onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n      onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n      onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n      onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n      onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n      onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n      onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n      onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n      onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n      onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n      this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n    }\n\n    _.mixin(Typeahead.prototype, {\n      _hacks: function hacks() {\n        var $input, $menu;\n        $input = this.input.$input || $(\"<div>\");\n        $menu = this.menu.$node || $(\"<div>\");\n        $input.on(\"blur.tt\", function ($e) {\n          var active, isActive, hasActive;\n          active = document.activeElement;\n          isActive = $menu.is(active);\n          hasActive = $menu.has(active).length > 0;\n\n          if (_.isMsie() && (isActive || hasActive)) {\n            $e.preventDefault();\n            $e.stopImmediatePropagation();\n\n            _.defer(function () {\n              $input.focus();\n            });\n          }\n        });\n        $menu.on(\"mousedown.tt\", function ($e) {\n          $e.preventDefault();\n        });\n      },\n      _onSelectableClicked: function onSelectableClicked(type, $el) {\n        this.select($el);\n      },\n      _onDatasetCleared: function onDatasetCleared() {\n        this._updateHint();\n      },\n      _onDatasetRendered: function onDatasetRendered(type, suggestions, async, dataset) {\n        this._updateHint();\n\n        if (this.autoselect) {\n          var cursorClass = this.selectors.cursor.substr(1);\n          this.menu.$node.find(this.selectors.suggestion).first().addClass(cursorClass);\n        }\n\n        this.eventBus.trigger(\"render\", suggestions, async, dataset);\n      },\n      _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n        this.eventBus.trigger(\"asyncrequest\", query, dataset);\n      },\n      _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n        this.eventBus.trigger(\"asynccancel\", query, dataset);\n      },\n      _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n        this.eventBus.trigger(\"asyncreceive\", query, dataset);\n      },\n      _onFocused: function onFocused() {\n        this._minLengthMet() && this.menu.update(this.input.getQuery());\n      },\n      _onBlurred: function onBlurred() {\n        if (this.input.hasQueryChangedSinceLastFocus()) {\n          this.eventBus.trigger(\"change\", this.input.getQuery());\n        }\n      },\n      _onEnterKeyed: function onEnterKeyed(type, $e) {\n        var $selectable;\n\n        if ($selectable = this.menu.getActiveSelectable()) {\n          if (this.select($selectable)) {\n            $e.preventDefault();\n            $e.stopPropagation();\n          }\n        } else if (this.autoselect) {\n          if (this.select(this.menu.getTopSelectable())) {\n            $e.preventDefault();\n            $e.stopPropagation();\n          }\n        }\n      },\n      _onTabKeyed: function onTabKeyed(type, $e) {\n        var $selectable;\n\n        if ($selectable = this.menu.getActiveSelectable()) {\n          this.select($selectable) && $e.preventDefault();\n        } else if (this.autoselect) {\n          if ($selectable = this.menu.getTopSelectable()) {\n            this.autocomplete($selectable) && $e.preventDefault();\n          }\n        }\n      },\n      _onEscKeyed: function onEscKeyed() {\n        this.close();\n      },\n      _onUpKeyed: function onUpKeyed() {\n        this.moveCursor(-1);\n      },\n      _onDownKeyed: function onDownKeyed() {\n        this.moveCursor(+1);\n      },\n      _onLeftKeyed: function onLeftKeyed() {\n        if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());\n        }\n      },\n      _onRightKeyed: function onRightKeyed() {\n        if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n          this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());\n        }\n      },\n      _onQueryChanged: function onQueryChanged(e, query) {\n        this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n      },\n      _onWhitespaceChanged: function onWhitespaceChanged() {\n        this._updateHint();\n      },\n      _onLangDirChanged: function onLangDirChanged(e, dir) {\n        if (this.dir !== dir) {\n          this.dir = dir;\n          this.menu.setLanguageDirection(dir);\n        }\n      },\n      _openIfActive: function openIfActive() {\n        this.isActive() && this.open();\n      },\n      _minLengthMet: function minLengthMet(query) {\n        query = _.isString(query) ? query : this.input.getQuery() || \"\";\n        return query.length >= this.minLength;\n      },\n      _updateHint: function updateHint() {\n        var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n        $selectable = this.menu.getTopSelectable();\n        data = this.menu.getSelectableData($selectable);\n        val = this.input.getInputValue();\n\n        if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n          query = Input.normalizeQuery(val);\n          escapedQuery = _.escapeRegExChars(query);\n          frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n          match = frontMatchRegEx.exec(data.val);\n          match && this.input.setHint(val + match[1]);\n        } else {\n          this.input.clearHint();\n        }\n      },\n      isEnabled: function isEnabled() {\n        return this.enabled;\n      },\n      enable: function enable() {\n        this.enabled = true;\n      },\n      disable: function disable() {\n        this.enabled = false;\n      },\n      isActive: function isActive() {\n        return this.active;\n      },\n      activate: function activate() {\n        if (this.isActive()) {\n          return true;\n        } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n          return false;\n        } else {\n          this.active = true;\n          this.eventBus.trigger(\"active\");\n          return true;\n        }\n      },\n      deactivate: function deactivate() {\n        if (!this.isActive()) {\n          return true;\n        } else if (this.eventBus.before(\"idle\")) {\n          return false;\n        } else {\n          this.active = false;\n          this.close();\n          this.eventBus.trigger(\"idle\");\n          return true;\n        }\n      },\n      isOpen: function isOpen() {\n        return this.menu.isOpen();\n      },\n      open: function open() {\n        if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n          this.input.setAriaExpanded(true);\n          this.menu.open();\n\n          this._updateHint();\n\n          this.eventBus.trigger(\"open\");\n        }\n\n        return this.isOpen();\n      },\n      close: function close() {\n        if (this.isOpen() && !this.eventBus.before(\"close\")) {\n          this.input.setAriaExpanded(false);\n          this.menu.close();\n          this.input.clearHint();\n          this.input.resetInputValue();\n          this.eventBus.trigger(\"close\");\n        }\n\n        return !this.isOpen();\n      },\n      setVal: function setVal(val) {\n        this.input.setQuery(_.toStr(val));\n      },\n      getVal: function getVal() {\n        return this.input.getQuery();\n      },\n      select: function select($selectable) {\n        var data = this.menu.getSelectableData($selectable);\n\n        if (data && !this.eventBus.before(\"select\", data.obj, data.dataset)) {\n          this.input.setQuery(data.val, true);\n          this.eventBus.trigger(\"select\", data.obj, data.dataset);\n          this.close();\n          return true;\n        }\n\n        return false;\n      },\n      autocomplete: function autocomplete($selectable) {\n        var query, data, isValid;\n        query = this.input.getQuery();\n        data = this.menu.getSelectableData($selectable);\n        isValid = data && query !== data.val;\n\n        if (isValid && !this.eventBus.before(\"autocomplete\", data.obj, data.dataset)) {\n          this.input.setQuery(data.val);\n          this.eventBus.trigger(\"autocomplete\", data.obj, data.dataset);\n          return true;\n        }\n\n        return false;\n      },\n      moveCursor: function moveCursor(delta) {\n        var query, $candidate, data, suggestion, datasetName, cancelMove, id;\n        query = this.input.getQuery();\n        $candidate = this.menu.selectableRelativeToCursor(delta);\n        data = this.menu.getSelectableData($candidate);\n        suggestion = data ? data.obj : null;\n        datasetName = data ? data.dataset : null;\n        id = $candidate ? $candidate.attr(\"id\") : null;\n        this.input.trigger(\"cursorchange\", id);\n        cancelMove = this._minLengthMet() && this.menu.update(query);\n\n        if (!cancelMove && !this.eventBus.before(\"cursorchange\", suggestion, datasetName)) {\n          this.menu.setCursor($candidate);\n\n          if (data) {\n            if (typeof data.val === \"string\") {\n              this.input.setInputValue(data.val);\n            }\n          } else {\n            this.input.resetInputValue();\n\n            this._updateHint();\n          }\n\n          this.eventBus.trigger(\"cursorchange\", suggestion, datasetName);\n          return true;\n        }\n\n        return false;\n      },\n      destroy: function destroy() {\n        this.input.destroy();\n        this.menu.destroy();\n      }\n    });\n\n    return Typeahead;\n\n    function c(ctx) {\n      var methods = [].slice.call(arguments, 1);\n      return function () {\n        var args = [].slice.call(arguments);\n\n        _.each(methods, function (method) {\n          return ctx[method].apply(ctx, args);\n        });\n      };\n    }\n  }();\n\n  (function () {\n    \"use strict\";\n\n    var old, keys, methods;\n    old = $.fn.typeahead;\n    keys = {\n      www: \"tt-www\",\n      attrs: \"tt-attrs\",\n      typeahead: \"tt-typeahead\"\n    };\n    methods = {\n      initialize: function initialize(o, datasets) {\n        var www;\n        datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n        o = o || {};\n        www = WWW(o.classNames);\n        return this.each(attach);\n\n        function attach() {\n          var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, status, typeahead, MenuConstructor;\n\n          _.each(datasets, function (d) {\n            d.highlight = !!o.highlight;\n          });\n\n          $input = $(this);\n          $wrapper = $(www.html.wrapper);\n          $hint = $elOrNull(o.hint);\n          $menu = $elOrNull(o.menu);\n          defaultHint = o.hint !== false && !$hint;\n          defaultMenu = o.menu !== false && !$menu;\n          defaultHint && ($hint = buildHintFromInput($input, www));\n          defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n          $hint && $hint.val(\"\");\n          $input = prepInput($input, www);\n\n          if (defaultHint || defaultMenu) {\n            $wrapper.css(www.css.wrapper);\n            $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n            $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n          }\n\n          MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n          eventBus = new EventBus({\n            el: $input\n          });\n          input = new Input({\n            hint: $hint,\n            input: $input,\n            menu: $menu\n          }, www);\n          menu = new MenuConstructor({\n            node: $menu,\n            datasets: datasets\n          }, www);\n          status = new Status({\n            $input: $input,\n            menu: menu\n          });\n          typeahead = new Typeahead({\n            input: input,\n            menu: menu,\n            eventBus: eventBus,\n            minLength: o.minLength,\n            autoselect: o.autoselect\n          }, www);\n          $input.data(keys.www, www);\n          $input.data(keys.typeahead, typeahead);\n        }\n      },\n      isEnabled: function isEnabled() {\n        var enabled;\n        ttEach(this.first(), function (t) {\n          enabled = t.isEnabled();\n        });\n        return enabled;\n      },\n      enable: function enable() {\n        ttEach(this, function (t) {\n          t.enable();\n        });\n        return this;\n      },\n      disable: function disable() {\n        ttEach(this, function (t) {\n          t.disable();\n        });\n        return this;\n      },\n      isActive: function isActive() {\n        var active;\n        ttEach(this.first(), function (t) {\n          active = t.isActive();\n        });\n        return active;\n      },\n      activate: function activate() {\n        ttEach(this, function (t) {\n          t.activate();\n        });\n        return this;\n      },\n      deactivate: function deactivate() {\n        ttEach(this, function (t) {\n          t.deactivate();\n        });\n        return this;\n      },\n      isOpen: function isOpen() {\n        var open;\n        ttEach(this.first(), function (t) {\n          open = t.isOpen();\n        });\n        return open;\n      },\n      open: function open() {\n        ttEach(this, function (t) {\n          t.open();\n        });\n        return this;\n      },\n      close: function close() {\n        ttEach(this, function (t) {\n          t.close();\n        });\n        return this;\n      },\n      select: function select(el) {\n        var success = false,\n            $el = $(el);\n        ttEach(this.first(), function (t) {\n          success = t.select($el);\n        });\n        return success;\n      },\n      autocomplete: function autocomplete(el) {\n        var success = false,\n            $el = $(el);\n        ttEach(this.first(), function (t) {\n          success = t.autocomplete($el);\n        });\n        return success;\n      },\n      moveCursor: function moveCursoe(delta) {\n        var success = false;\n        ttEach(this.first(), function (t) {\n          success = t.moveCursor(delta);\n        });\n        return success;\n      },\n      val: function val(newVal) {\n        var query;\n\n        if (!arguments.length) {\n          ttEach(this.first(), function (t) {\n            query = t.getVal();\n          });\n          return query;\n        } else {\n          ttEach(this, function (t) {\n            t.setVal(_.toStr(newVal));\n          });\n          return this;\n        }\n      },\n      destroy: function destroy() {\n        ttEach(this, function (typeahead, $input) {\n          revert($input);\n          typeahead.destroy();\n        });\n        return this;\n      }\n    };\n\n    $.fn.typeahead = function (method) {\n      if (methods[method]) {\n        return methods[method].apply(this, [].slice.call(arguments, 1));\n      } else {\n        return methods.initialize.apply(this, arguments);\n      }\n    };\n\n    $.fn.typeahead.noConflict = function noConflict() {\n      $.fn.typeahead = old;\n      return this;\n    };\n\n    function ttEach($els, fn) {\n      $els.each(function () {\n        var $input = $(this),\n            typeahead;\n        (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n      });\n    }\n\n    function buildHintFromInput($input, www) {\n      return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop({\n        readonly: true,\n        required: false\n      }).removeAttr(\"id name placeholder\").removeClass(\"required\").attr({\n        spellcheck: \"false\",\n        tabindex: -1\n      });\n    }\n\n    function prepInput($input, www) {\n      $input.data(keys.attrs, {\n        dir: $input.attr(\"dir\"),\n        autocomplete: $input.attr(\"autocomplete\"),\n        spellcheck: $input.attr(\"spellcheck\"),\n        style: $input.attr(\"style\")\n      });\n      $input.addClass(www.classes.input).attr({\n        spellcheck: false\n      });\n\n      try {\n        !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n      } catch (e) {}\n\n      return $input;\n    }\n\n    function getBackgroundStyles($el) {\n      return {\n        backgroundAttachment: $el.css(\"background-attachment\"),\n        backgroundClip: $el.css(\"background-clip\"),\n        backgroundColor: $el.css(\"background-color\"),\n        backgroundImage: $el.css(\"background-image\"),\n        backgroundOrigin: $el.css(\"background-origin\"),\n        backgroundPosition: $el.css(\"background-position\"),\n        backgroundRepeat: $el.css(\"background-repeat\"),\n        backgroundSize: $el.css(\"background-size\")\n      };\n    }\n\n    function revert($input) {\n      var www, $wrapper;\n      www = $input.data(keys.www);\n      $wrapper = $input.parent().filter(www.selectors.wrapper);\n\n      _.each($input.data(keys.attrs), function (val, key) {\n        _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n      });\n\n      $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n\n      if ($wrapper.length) {\n        $input.detach().insertAfter($wrapper);\n        $wrapper.remove();\n      }\n    }\n\n    function $elOrNull(obj) {\n      var isValid, $el;\n      isValid = _.isJQuery(obj) || _.isElement(obj);\n      $el = isValid ? $(obj).first() : [];\n      return $el.length ? $el : null;\n    }\n  })();\n});","map":{"version":3,"sources":["/home/ubuntu/myprojectdir/tracker/covid19india-react/node_modules/corejs-typeahead/dist/typeahead.bundle.js"],"names":["root","factory","define","amd","a0","module","exports","require","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","reverseArgs","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","template","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","context","args","arguments","later","callNow","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","guid","_p8","p","Math","random","toString","substr","noop","VERSION","tokenizers","nonword","whitespace","ngram","getObjTokenizer","split","tokens","word","char","push","tokenizer","setKey","keys","slice","tokenize","o","k","concat","LruCache","maxSize","reset","set","get","prototype","tailItem","list","tail","node","size","remove","hash","moveToFront","Node","add","List","head","next","prev","PersistentStorage","LOCAL_STORAGE","window","localStorage","setItem","removeItem","err","namespace","override","prefix","join","ttlKey","keyMatcher","RegExp","ls","_noop","_prefix","_ttlKey","clear","isExpired","_safeSet","name","decode","getItem","ttl","encode","i","gatherMatchingKeys","length","getTime","parseJSON","len","Transport","pendingRequestsCount","pendingRequests","sharedCache","maxPendingRequests","cancelled","lastReq","_send","transport","_get","limiter","_cache","cache","setMaxPendingRequests","num","resetCache","_fingerprint","fingerprint","url","type","param","data","that","jqXhr","done","fail","always","onDeckRequestArgs","resp","cancel","SearchIndex","CHILDREN","IDS","datumTokenizer","queryTokenizer","error","identify","matchAnyQueryToken","bootstrap","datums","trie","datum","id","normalizeTokens","token","chars","ch","shift","newNode","ids","search","query","matches","getIntersection","unique","all","values","serialize","toLowerCase","array","seen","uniques","arrayA","arrayB","ai","bi","intersection","sort","lenArrayA","lenArrayB","Prefetch","protocol","thumbprint","prepare","transform","storage","cacheKey","_settings","settings","dataType","store","location","fromCache","stored","fromNetwork","onError","onResponse","Remote","indexResponse","cancelLastRequest","oParser","parse","defaults","sorter","initialize","sufficient","indexRemote","local","prefetch","remote","parsePrefetch","parseRemote","callbackToDeferred","ajax","wildcard","rateLimitBy","rateLimitWait","toRemotePrepare","toLimiter","prepareByReplace","prepareByWildcard","identityPrepare","encodeURIComponent","method","wrapper","deferred","Deferred","onSuccess","resolve","reject","Bloodhound","old","noConflict","__ttAdapter","ttAdapter","withAsync","withoutAsync","sync","async","_loadPrefetch","loadPrefetch","serialized","promise","_initialize","initPromise","addLocalToIndex","force","processRemote","nonDuplicates","r","l","clearPrefetchCache","clearRemoteCache","WWW","defaultClassNames","input","hint","menu","dataset","suggestion","selectable","empty","open","cursor","highlight","build","www","classes","css","buildCss","html","buildHtml","selectors","buildSelectors","c","v","position","display","top","left","borderColor","boxShadow","opacity","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","EventBus","deprecationMap","render","cursorchange","select","autocomplete","el","$el","_trigger","$e","Event","trigger","before","isDefaultPrevented","deprecatedType","EventEmitter","splitter","nextTick","getNextTick","onSync","onAsync","off","on","types","bindContext","_callbacks","callbacks","syncFlush","asyncFlush","getFlush","flush","nextTickFn","setImmediate","nextTickSetImmediate","nextTickSetTimeout","doc","pattern","tagName","className","wordsOnly","caseSensitive","diacriticInsensitive","accented","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","hightlight","regex","getRegex","traverse","hightlightTextNode","textNode","patternNode","wrapperNode","exec","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","childNode","TEXT_NODE_TYPE","childNodes","accent_replacer","chr","toUpperCase","patterns","escapedPatterns","regexStr","escapedWord","document","Input","specialKeyCodeMap","$hint","$input","$menu","attr","role","queryWhenFocused","hasFocus","$overflowHelper","buildOverflowHelper","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","_updateDescendent","normalizeQuery","_onBlur","onBlur","resetInputValue","_onFocus","onFocus","_onKeydown","onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","onInput","_setQuery","getInputValue","managePreventDefault","preventDefault","withModifier","shouldTrigger","checkLanguageDirection","dir","setQuery","silent","areEquivalent","hasDifferentWhitespace","areQueriesEquivalent","updateDescendent","event","focus","blur","getLangDir","getQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","isValid","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","setAriaExpanded","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","a","b","altKey","ctrlKey","metaKey","shiftKey","Dataset","nameGenerator","templates","notFound","source","isValidName","limit","displayFn","getDisplayFn","displayKey","getTemplates","_resetLastSuggestion","addClass","extractData","_overwrite","overwrite","suggestions","_renderSuggestions","pending","_renderPending","_renderNotFound","_empty","_append","append","$lastSuggestion","_appendSuggestions","renderSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","_getFooter","appendSuggestions","after","renderPending","renderNotFound","getSuggestionsFragment","fragment","createDocumentFragment","getSuggestionNode","_injectQuery","getFooter","footer","getHeader","header","resetLastSuggestion","injectQuery","_query","update","canceled","syncCalled","rendered","idx","abs","isEmpty","userSuggestionTemplate","suggestionTemplate","Menu","$node","datasets","initializeDataset","oDataset","find","first","appendTo","_onSelectableClick","onSelectableClick","currentTarget","_onRendered","onRendered","toggleClass","_allDatasetsEmpty","_onCleared","onCleared","_propagate","propagate","allDatasetsEmpty","isDatasetEmpty","_getSelectables","getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","setCursor","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","oldIndex","newIndex","eq","getSelectableData","getTopSelectable","isValidUpdate","updateDataset","clearDataset","destroyDataset","Status","options","padding","border","overflow","clip","cleared","words","DefaultMenu","_show","_hide","hide","show","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","autoselect","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","hacks","isActive","hasActive","activeElement","has","stopImmediatePropagation","onSelectableClicked","onDatasetCleared","_updateHint","onDatasetRendered","cursorClass","onAsyncRequested","onAsyncCanceled","onAsyncReceived","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","stopPropagation","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","onLangDirChanged","_openIfActive","openIfActive","minLengthMet","updateHint","escapedQuery","frontMatchRegEx","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","datasetName","cancelMove","ctx","methods","typeahead","attrs","classNames","attach","$wrapper","defaultHint","defaultMenu","status","MenuConstructor","d","$elOrNull","buildHintFromInput","prepInput","wrap","parent","ttEach","t","success","moveCursoe","newVal","revert","$els","removeData","getBackgroundStyles","prop","readonly","required","removeAttr","spellcheck","tabindex","style","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","detach"],"mappings":"AAAA;;;;;AAOA,CAAC,UAASA,IAAT,EAAeC,OAAf,EAAwB;AACrB,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AAC5CD,IAAAA,MAAM,CAAC,CAAE,QAAF,CAAD,EAAe,UAASE,EAAT,EAAa;AAC9B,aAAOJ,IAAI,CAAC,YAAD,CAAJ,GAAqBC,OAAO,CAACG,EAAD,CAAnC;AACH,KAFK,CAAN;AAGH,GAJD,MAIO,IAAI,OAAOC,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACC,OAAzC,EAAkD;AACrDD,IAAAA,MAAM,CAACC,OAAP,GAAiBL,OAAO,CAACM,OAAO,CAAC,QAAD,CAAR,CAAxB;AACH,GAFM,MAEA;AACHP,IAAAA,IAAI,CAAC,YAAD,CAAJ,GAAqBC,OAAO,CAACD,IAAI,CAAC,QAAD,CAAL,CAA5B;AACH;AACJ,CAVD,EAUG,IAVH,EAUS,UAASQ,CAAT,EAAY;AACjB,MAAIC,CAAC,GAAG,YAAW;AACf;;AACA,WAAO;AACHC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,kBAAkBC,IAAlB,CAAuBC,SAAS,CAACC,SAAjC,IAA8CD,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,0BAA1B,EAAsD,CAAtD,CAA9C,GAAyG,KAAhH;AACH,OAHE;AAIHC,MAAAA,aAAa,EAAE,UAASC,GAAT,EAAc;AACzB,eAAO,CAACA,GAAD,IAAQ,QAAQL,IAAR,CAAaK,GAAb,CAAf;AACH,OANE;AAOHC,MAAAA,gBAAgB,EAAE,UAASD,GAAT,EAAc;AAC5B,eAAOA,GAAG,CAACE,OAAJ,CAAY,qCAAZ,EAAmD,MAAnD,CAAP;AACH,OATE;AAUHC,MAAAA,QAAQ,EAAE,UAASC,GAAT,EAAc;AACpB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACH,OAZE;AAaHC,MAAAA,QAAQ,EAAE,UAASD,GAAT,EAAc;AACpB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACH,OAfE;AAgBHE,MAAAA,OAAO,EAAEd,CAAC,CAACc,OAhBR;AAiBHC,MAAAA,UAAU,EAAEf,CAAC,CAACe,UAjBX;AAkBHC,MAAAA,QAAQ,EAAEhB,CAAC,CAACiB,aAlBT;AAmBHC,MAAAA,WAAW,EAAE,UAASN,GAAT,EAAc;AACvB,eAAO,OAAOA,GAAP,KAAe,WAAtB;AACH,OArBE;AAsBHO,MAAAA,SAAS,EAAE,UAASP,GAAT,EAAc;AACrB,eAAO,CAAC,EAAEA,GAAG,IAAIA,GAAG,CAACQ,QAAJ,KAAiB,CAA1B,CAAR;AACH,OAxBE;AAyBHC,MAAAA,QAAQ,EAAE,UAAST,GAAT,EAAc;AACpB,eAAOA,GAAG,YAAYZ,CAAtB;AACH,OA3BE;AA4BHsB,MAAAA,KAAK,EAAE,SAASA,KAAT,CAAeC,CAAf,EAAkB;AACrB,eAAOtB,CAAC,CAACiB,WAAF,CAAcK,CAAd,KAAoBA,CAAC,KAAK,IAA1B,GAAiC,EAAjC,GAAsCA,CAAC,GAAG,EAAjD;AACH,OA9BE;AA+BHC,MAAAA,IAAI,EAAExB,CAAC,CAACyB,KA/BL;AAgCHC,MAAAA,IAAI,EAAE,UAASC,UAAT,EAAqBC,EAArB,EAAyB;AAC3B5B,QAAAA,CAAC,CAAC0B,IAAF,CAAOC,UAAP,EAAmBE,WAAnB;;AACA,iBAASA,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AAC/B,iBAAOH,EAAE,CAACG,KAAD,EAAQD,KAAR,CAAT;AACH;AACJ,OArCE;AAsCHE,MAAAA,GAAG,EAAEhC,CAAC,CAACgC,GAtCJ;AAuCHC,MAAAA,MAAM,EAAEjC,CAAC,CAACkC,IAvCP;AAwCHC,MAAAA,KAAK,EAAE,UAASvB,GAAT,EAAcT,IAAd,EAAoB;AACvB,YAAIiC,MAAM,GAAG,IAAb;;AACA,YAAI,CAACxB,GAAL,EAAU;AACN,iBAAOwB,MAAP;AACH;;AACDpC,QAAAA,CAAC,CAAC0B,IAAF,CAAOd,GAAP,EAAY,UAASyB,GAAT,EAAcC,GAAd,EAAmB;AAC3B,cAAI,EAAEF,MAAM,GAAGjC,IAAI,CAACoC,IAAL,CAAU,IAAV,EAAgBD,GAAhB,EAAqBD,GAArB,EAA0BzB,GAA1B,CAAX,CAAJ,EAAgD;AAC5C,mBAAO,KAAP;AACH;AACJ,SAJD;AAKA,eAAO,CAAC,CAACwB,MAAT;AACH,OAnDE;AAoDHI,MAAAA,IAAI,EAAE,UAAS5B,GAAT,EAAcT,IAAd,EAAoB;AACtB,YAAIiC,MAAM,GAAG,KAAb;;AACA,YAAI,CAACxB,GAAL,EAAU;AACN,iBAAOwB,MAAP;AACH;;AACDpC,QAAAA,CAAC,CAAC0B,IAAF,CAAOd,GAAP,EAAY,UAASyB,GAAT,EAAcC,GAAd,EAAmB;AAC3B,cAAIF,MAAM,GAAGjC,IAAI,CAACoC,IAAL,CAAU,IAAV,EAAgBD,GAAhB,EAAqBD,GAArB,EAA0BzB,GAA1B,CAAb,EAA6C;AACzC,mBAAO,KAAP;AACH;AACJ,SAJD;AAKA,eAAO,CAAC,CAACwB,MAAT;AACH,OA/DE;AAgEHK,MAAAA,KAAK,EAAEzC,CAAC,CAAC0C,MAhEN;AAiEHC,MAAAA,QAAQ,EAAE,UAASC,CAAT,EAAY;AAClB,eAAOA,CAAP;AACH,OAnEE;AAoEHC,MAAAA,KAAK,EAAE,UAASjC,GAAT,EAAc;AACjB,eAAOZ,CAAC,CAAC0C,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmB9B,GAAnB,CAAP;AACH,OAtEE;AAuEHkC,MAAAA,cAAc,EAAE,YAAW;AACvB,YAAIC,OAAO,GAAG,CAAd;AACA,eAAO,YAAW;AACd,iBAAOA,OAAO,EAAd;AACH,SAFD;AAGH,OA5EE;AA6EHC,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBpC,GAApB,EAAyB;AACjC,eAAOZ,CAAC,CAACe,UAAF,CAAaH,GAAb,IAAoBA,GAApB,GAA0BqC,QAAjC;;AACA,iBAASA,QAAT,GAAoB;AAChB,iBAAOC,MAAM,CAACtC,GAAD,CAAb;AACH;AACJ,OAlFE;AAmFHuC,MAAAA,KAAK,EAAE,UAASC,EAAT,EAAa;AAChBC,QAAAA,UAAU,CAACD,EAAD,EAAK,CAAL,CAAV;AACH,OArFE;AAsFHE,MAAAA,QAAQ,EAAE,UAASC,IAAT,EAAeC,IAAf,EAAqBC,SAArB,EAAgC;AACtC,YAAIC,OAAJ,EAAatB,MAAb;AACA,eAAO,YAAW;AACd,cAAIuB,OAAO,GAAG,IAAd;AAAA,cAAoBC,IAAI,GAAGC,SAA3B;AAAA,cAAsCC,KAAtC;AAAA,cAA6CC,OAA7C;;AACAD,UAAAA,KAAK,GAAG,YAAW;AACfJ,YAAAA,OAAO,GAAG,IAAV;;AACA,gBAAI,CAACD,SAAL,EAAgB;AACZrB,cAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH;AACJ,WALD;;AAMAG,UAAAA,OAAO,GAAGN,SAAS,IAAI,CAACC,OAAxB;AACAO,UAAAA,YAAY,CAACP,OAAD,CAAZ;AACAA,UAAAA,OAAO,GAAGL,UAAU,CAACS,KAAD,EAAQN,IAAR,CAApB;;AACA,cAAIO,OAAJ,EAAa;AACT3B,YAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH;;AACD,iBAAOxB,MAAP;AACH,SAfD;AAgBH,OAxGE;AAyGH8B,MAAAA,QAAQ,EAAE,UAASX,IAAT,EAAeC,IAAf,EAAqB;AAC3B,YAAIG,OAAJ,EAAaC,IAAb,EAAmBF,OAAnB,EAA4BtB,MAA5B,EAAoC+B,QAApC,EAA8CL,KAA9C;AACAK,QAAAA,QAAQ,GAAG,CAAX;;AACAL,QAAAA,KAAK,GAAG,YAAW;AACfK,UAAAA,QAAQ,GAAG,IAAIC,IAAJ,EAAX;AACAV,UAAAA,OAAO,GAAG,IAAV;AACAtB,UAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH,SAJD;;AAKA,eAAO,YAAW;AACd,cAAIS,GAAG,GAAG,IAAID,IAAJ,EAAV;AAAA,cAAsBE,SAAS,GAAGd,IAAI,IAAIa,GAAG,GAAGF,QAAV,CAAtC;AACAR,UAAAA,OAAO,GAAG,IAAV;AACAC,UAAAA,IAAI,GAAGC,SAAP;;AACA,cAAIS,SAAS,IAAI,CAAjB,EAAoB;AAChBL,YAAAA,YAAY,CAACP,OAAD,CAAZ;AACAA,YAAAA,OAAO,GAAG,IAAV;AACAS,YAAAA,QAAQ,GAAGE,GAAX;AACAjC,YAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH,WALD,MAKO,IAAI,CAACF,OAAL,EAAc;AACjBA,YAAAA,OAAO,GAAGL,UAAU,CAACS,KAAD,EAAQQ,SAAR,CAApB;AACH;;AACD,iBAAOlC,MAAP;AACH,SAbD;AAcH,OA/HE;AAgIHmC,MAAAA,SAAS,EAAE,UAASjC,GAAT,EAAc;AACrB,eAAOrC,CAAC,CAACU,QAAF,CAAW2B,GAAX,IAAkBA,GAAlB,GAAwBkC,IAAI,CAACD,SAAL,CAAejC,GAAf,CAA/B;AACH,OAlIE;AAmIHmC,MAAAA,IAAI,EAAE,YAAW;AACb,iBAASC,GAAT,CAAanD,CAAb,EAAgB;AACZ,cAAIoD,CAAC,GAAG,CAACC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,IAA6B,WAA9B,EAA2CC,MAA3C,CAAkD,CAAlD,EAAqD,CAArD,CAAR;AACA,iBAAOxD,CAAC,GAAG,MAAMoD,CAAC,CAACI,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAN,GAAuB,GAAvB,GAA6BJ,CAAC,CAACI,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAhC,GAAiDJ,CAAzD;AACH;;AACD,eAAO,QAAQD,GAAG,EAAX,GAAgBA,GAAG,CAAC,IAAD,CAAnB,GAA4BA,GAAG,CAAC,IAAD,CAA/B,GAAwCA,GAAG,EAAlD;AACH,OAzIE;AA0IHM,MAAAA,IAAI,EAAE,YAAW,CAAE;AA1IhB,KAAP;AA4IH,GA9IO,EAAR;;AA+IA,MAAIC,OAAO,GAAG,OAAd;;AACA,MAAIC,UAAU,GAAG,YAAW;AACxB;;AACA,WAAO;AACHC,MAAAA,OAAO,EAAEA,OADN;AAEHC,MAAAA,UAAU,EAAEA,UAFT;AAGHC,MAAAA,KAAK,EAAEA,KAHJ;AAIHzE,MAAAA,GAAG,EAAE;AACDuE,QAAAA,OAAO,EAAEG,eAAe,CAACH,OAAD,CADvB;AAEDC,QAAAA,UAAU,EAAEE,eAAe,CAACF,UAAD,CAF1B;AAGDC,QAAAA,KAAK,EAAEC,eAAe,CAACD,KAAD;AAHrB;AAJF,KAAP;;AAUA,aAASD,UAAT,CAAoB5E,GAApB,EAAyB;AACrBA,MAAAA,GAAG,GAAGP,CAAC,CAACqB,KAAF,CAAQd,GAAR,CAAN;AACA,aAAOA,GAAG,GAAGA,GAAG,CAAC+E,KAAJ,CAAU,KAAV,CAAH,GAAsB,EAAhC;AACH;;AACD,aAASJ,OAAT,CAAiB3E,GAAjB,EAAsB;AAClBA,MAAAA,GAAG,GAAGP,CAAC,CAACqB,KAAF,CAAQd,GAAR,CAAN;AACA,aAAOA,GAAG,GAAGA,GAAG,CAAC+E,KAAJ,CAAU,KAAV,CAAH,GAAsB,EAAhC;AACH;;AACD,aAASF,KAAT,CAAe7E,GAAf,EAAoB;AAChBA,MAAAA,GAAG,GAAGP,CAAC,CAACqB,KAAF,CAAQd,GAAR,CAAN;AACA,UAAIgF,MAAM,GAAG,EAAb;AAAA,UAAiBC,IAAI,GAAG,EAAxB;;AACAxF,MAAAA,CAAC,CAACyB,IAAF,CAAOlB,GAAG,CAAC+E,KAAJ,CAAU,EAAV,CAAP,EAAsB,UAASG,IAAT,EAAe;AACjC,YAAIA,IAAI,CAACpF,KAAL,CAAW,KAAX,CAAJ,EAAuB;AACnBmF,UAAAA,IAAI,GAAG,EAAP;AACH,SAFD,MAEO;AACHD,UAAAA,MAAM,CAACG,IAAP,CAAYF,IAAI,GAAGC,IAAnB;AACAD,UAAAA,IAAI,IAAIC,IAAR;AACH;AACJ,OAPD;;AAQA,aAAOF,MAAP;AACH;;AACD,aAASF,eAAT,CAAyBM,SAAzB,EAAoC;AAChC,aAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AACzBA,QAAAA,IAAI,GAAG7F,CAAC,CAACa,OAAF,CAAUgF,IAAV,IAAkBA,IAAlB,GAAyB,GAAGC,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAhC;AACA,eAAO,SAASmC,QAAT,CAAkBC,CAAlB,EAAqB;AACxB,cAAIT,MAAM,GAAG,EAAb;;AACAvF,UAAAA,CAAC,CAACyB,IAAF,CAAOoE,IAAP,EAAa,UAASI,CAAT,EAAY;AACrBV,YAAAA,MAAM,GAAGA,MAAM,CAACW,MAAP,CAAcP,SAAS,CAAC3F,CAAC,CAACqB,KAAF,CAAQ2E,CAAC,CAACC,CAAD,CAAT,CAAD,CAAvB,CAAT;AACH,WAFD;;AAGA,iBAAOV,MAAP;AACH,SAND;AAOH,OATD;AAUH;AACJ,GA7CgB,EAAjB;;AA8CA,MAAIY,QAAQ,GAAG,YAAW;AACtB;;AACA,aAASA,QAAT,CAAkBC,OAAlB,EAA2B;AACvB,WAAKA,OAAL,GAAepG,CAAC,CAACY,QAAF,CAAWwF,OAAX,IAAsBA,OAAtB,GAAgC,GAA/C;AACA,WAAKC,KAAL;;AACA,UAAI,KAAKD,OAAL,IAAgB,CAApB,EAAuB;AACnB,aAAKE,GAAL,GAAW,KAAKC,GAAL,GAAWxG,CAAC,CAACgF,IAAxB;AACH;AACJ;;AACD/E,IAAAA,CAAC,CAACwC,KAAF,CAAQ2D,QAAQ,CAACK,SAAjB,EAA4B;AACxBF,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAalE,GAAb,EAAkBC,GAAlB,EAAuB;AACxB,YAAIoE,QAAQ,GAAG,KAAKC,IAAL,CAAUC,IAAzB;AAAA,YAA+BC,IAA/B;;AACA,YAAI,KAAKC,IAAL,IAAa,KAAKT,OAAtB,EAA+B;AAC3B,eAAKM,IAAL,CAAUI,MAAV,CAAiBL,QAAjB;AACA,iBAAO,KAAKM,IAAL,CAAUN,QAAQ,CAACrE,GAAnB,CAAP;AACA,eAAKyE,IAAL;AACH;;AACD,YAAID,IAAI,GAAG,KAAKG,IAAL,CAAU3E,GAAV,CAAX,EAA2B;AACvBwE,UAAAA,IAAI,CAACvE,GAAL,GAAWA,GAAX;AACA,eAAKqE,IAAL,CAAUM,WAAV,CAAsBJ,IAAtB;AACH,SAHD,MAGO;AACHA,UAAAA,IAAI,GAAG,IAAIK,IAAJ,CAAS7E,GAAT,EAAcC,GAAd,CAAP;AACA,eAAKqE,IAAL,CAAUQ,GAAV,CAAcN,IAAd;AACA,eAAKG,IAAL,CAAU3E,GAAV,IAAiBwE,IAAjB;AACA,eAAKC,IAAL;AACH;AACJ,OAjBuB;AAkBxBN,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAanE,GAAb,EAAkB;AACnB,YAAIwE,IAAI,GAAG,KAAKG,IAAL,CAAU3E,GAAV,CAAX;;AACA,YAAIwE,IAAJ,EAAU;AACN,eAAKF,IAAL,CAAUM,WAAV,CAAsBJ,IAAtB;AACA,iBAAOA,IAAI,CAACvE,GAAZ;AACH;AACJ,OAxBuB;AAyBxBgE,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKQ,IAAL,GAAY,CAAZ;AACA,aAAKE,IAAL,GAAY,EAAZ;AACA,aAAKL,IAAL,GAAY,IAAIS,IAAJ,EAAZ;AACH;AA7BuB,KAA5B;;AA+BA,aAASA,IAAT,GAAgB;AACZ,WAAKC,IAAL,GAAY,KAAKT,IAAL,GAAY,IAAxB;AACH;;AACD3G,IAAAA,CAAC,CAACwC,KAAF,CAAQ2E,IAAI,CAACX,SAAb,EAAwB;AACpBU,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAaN,IAAb,EAAmB;AACpB,YAAI,KAAKQ,IAAT,EAAe;AACXR,UAAAA,IAAI,CAACS,IAAL,GAAY,KAAKD,IAAjB;AACA,eAAKA,IAAL,CAAUE,IAAV,GAAiBV,IAAjB;AACH;;AACD,aAAKQ,IAAL,GAAYR,IAAZ;AACA,aAAKD,IAAL,GAAY,KAAKA,IAAL,IAAaC,IAAzB;AACH,OARmB;AASpBE,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBF,IAAhB,EAAsB;AAC1BA,QAAAA,IAAI,CAACU,IAAL,GAAYV,IAAI,CAACU,IAAL,CAAUD,IAAV,GAAiBT,IAAI,CAACS,IAAlC,GAAyC,KAAKD,IAAL,GAAYR,IAAI,CAACS,IAA1D;AACAT,QAAAA,IAAI,CAACS,IAAL,GAAYT,IAAI,CAACS,IAAL,CAAUC,IAAV,GAAiBV,IAAI,CAACU,IAAlC,GAAyC,KAAKX,IAAL,GAAYC,IAAI,CAACU,IAA1D;AACH,OAZmB;AAapBN,MAAAA,WAAW,EAAE,UAASJ,IAAT,EAAe;AACxB,aAAKE,MAAL,CAAYF,IAAZ;AACA,aAAKM,GAAL,CAASN,IAAT;AACH;AAhBmB,KAAxB;;AAkBA,aAASK,IAAT,CAAc7E,GAAd,EAAmBC,GAAnB,EAAwB;AACpB,WAAKD,GAAL,GAAWA,GAAX;AACA,WAAKC,GAAL,GAAWA,GAAX;AACA,WAAKiF,IAAL,GAAY,KAAKD,IAAL,GAAY,IAAxB;AACH;;AACD,WAAOlB,QAAP;AACH,GAnEc,EAAf;;AAoEA,MAAIoB,iBAAiB,GAAG,YAAW;AAC/B;;AACA,QAAIC,aAAJ;;AACA,QAAI;AACAA,MAAAA,aAAa,GAAGC,MAAM,CAACC,YAAvB;AACAF,MAAAA,aAAa,CAACG,OAAd,CAAsB,KAAtB,EAA6B,GAA7B;AACAH,MAAAA,aAAa,CAACI,UAAd,CAAyB,KAAzB;AACH,KAJD,CAIE,OAAOC,GAAP,EAAY;AACVL,MAAAA,aAAa,GAAG,IAAhB;AACH;;AACD,aAASD,iBAAT,CAA2BO,SAA3B,EAAsCC,QAAtC,EAAgD;AAC5C,WAAKC,MAAL,GAAc,CAAE,IAAF,EAAQF,SAAR,EAAmB,IAAnB,EAA0BG,IAA1B,CAA+B,EAA/B,CAAd;AACA,WAAKC,MAAL,GAAc,SAAd;AACA,WAAKC,UAAL,GAAkB,IAAIC,MAAJ,CAAW,MAAMpI,CAAC,CAACQ,gBAAF,CAAmB,KAAKwH,MAAxB,CAAjB,CAAlB;AACA,WAAKK,EAAL,GAAUN,QAAQ,IAAIP,aAAtB;AACA,OAAC,KAAKa,EAAN,IAAY,KAAKC,KAAL,EAAZ;AACH;;AACDtI,IAAAA,CAAC,CAACwC,KAAF,CAAQ+E,iBAAiB,CAACf,SAA1B,EAAqC;AACjC+B,MAAAA,OAAO,EAAE,UAASnG,GAAT,EAAc;AACnB,eAAO,KAAK4F,MAAL,GAAc5F,GAArB;AACH,OAHgC;AAIjCoG,MAAAA,OAAO,EAAE,UAASpG,GAAT,EAAc;AACnB,eAAO,KAAKmG,OAAL,CAAanG,GAAb,IAAoB,KAAK8F,MAAhC;AACH,OANgC;AAOjCI,MAAAA,KAAK,EAAE,YAAW;AACd,aAAK/B,GAAL,GAAW,KAAKD,GAAL,GAAW,KAAKQ,MAAL,GAAc,KAAK2B,KAAL,GAAa,KAAKC,SAAL,GAAiB1I,CAAC,CAAC+E,IAApE;AACH,OATgC;AAUjC4D,MAAAA,QAAQ,EAAE,UAASvG,GAAT,EAAcC,GAAd,EAAmB;AACzB,YAAI;AACA,eAAKgG,EAAL,CAAQV,OAAR,CAAgBvF,GAAhB,EAAqBC,GAArB;AACH,SAFD,CAEE,OAAOwF,GAAP,EAAY;AACV,cAAIA,GAAG,CAACe,IAAJ,KAAa,oBAAjB,EAAuC;AACnC,iBAAKH,KAAL;;AACA,iBAAKH,KAAL;AACH;AACJ;AACJ,OAnBgC;AAoBjC/B,MAAAA,GAAG,EAAE,UAASnE,GAAT,EAAc;AACf,YAAI,KAAKsG,SAAL,CAAetG,GAAf,CAAJ,EAAyB;AACrB,eAAK0E,MAAL,CAAY1E,GAAZ;AACH;;AACD,eAAOyG,MAAM,CAAC,KAAKR,EAAL,CAAQS,OAAR,CAAgB,KAAKP,OAAL,CAAanG,GAAb,CAAhB,CAAD,CAAb;AACH,OAzBgC;AA0BjCkE,MAAAA,GAAG,EAAE,UAASlE,GAAT,EAAcC,GAAd,EAAmB0G,GAAnB,EAAwB;AACzB,YAAI/I,CAAC,CAACY,QAAF,CAAWmI,GAAX,CAAJ,EAAqB;AACjB,eAAKJ,QAAL,CAAc,KAAKH,OAAL,CAAapG,GAAb,CAAd,EAAiC4G,MAAM,CAAC5E,GAAG,KAAK2E,GAAT,CAAvC;AACH,SAFD,MAEO;AACH,eAAKV,EAAL,CAAQT,UAAR,CAAmB,KAAKY,OAAL,CAAapG,GAAb,CAAnB;AACH;;AACD,eAAO,KAAKuG,QAAL,CAAc,KAAKJ,OAAL,CAAanG,GAAb,CAAd,EAAiC4G,MAAM,CAAC3G,GAAD,CAAvC,CAAP;AACH,OAjCgC;AAkCjCyE,MAAAA,MAAM,EAAE,UAAS1E,GAAT,EAAc;AAClB,aAAKiG,EAAL,CAAQT,UAAR,CAAmB,KAAKY,OAAL,CAAapG,GAAb,CAAnB;AACA,aAAKiG,EAAL,CAAQT,UAAR,CAAmB,KAAKW,OAAL,CAAanG,GAAb,CAAnB;AACA,eAAO,IAAP;AACH,OAtCgC;AAuCjCqG,MAAAA,KAAK,EAAE,YAAW;AACd,YAAIQ,CAAJ;AAAA,YAAOpD,IAAI,GAAGqD,kBAAkB,CAAC,KAAKf,UAAN,CAAhC;;AACA,aAAKc,CAAC,GAAGpD,IAAI,CAACsD,MAAd,EAAsBF,CAAC,EAAvB,GAA6B;AACzB,eAAKnC,MAAL,CAAYjB,IAAI,CAACoD,CAAD,CAAhB;AACH;;AACD,eAAO,IAAP;AACH,OA7CgC;AA8CjCP,MAAAA,SAAS,EAAE,UAAStG,GAAT,EAAc;AACrB,YAAI2G,GAAG,GAAGF,MAAM,CAAC,KAAKR,EAAL,CAAQS,OAAR,CAAgB,KAAKN,OAAL,CAAapG,GAAb,CAAhB,CAAD,CAAhB;AACA,eAAOpC,CAAC,CAACY,QAAF,CAAWmI,GAAX,KAAmB3E,GAAG,KAAK2E,GAA3B,GAAiC,IAAjC,GAAwC,KAA/C;AACH;AAjDgC,KAArC;;AAmDA,WAAOxB,iBAAP;;AACA,aAASnD,GAAT,GAAe;AACX,aAAO,IAAID,IAAJ,GAAWiF,OAAX,EAAP;AACH;;AACD,aAASJ,MAAT,CAAgB3G,GAAhB,EAAqB;AACjB,aAAOkC,IAAI,CAACD,SAAL,CAAetE,CAAC,CAACiB,WAAF,CAAcoB,GAAd,IAAqB,IAArB,GAA4BA,GAA3C,CAAP;AACH;;AACD,aAASwG,MAAT,CAAgBxG,GAAhB,EAAqB;AACjB,aAAOtC,CAAC,CAACsJ,SAAF,CAAYhH,GAAZ,CAAP;AACH;;AACD,aAAS6G,kBAAT,CAA4Bf,UAA5B,EAAwC;AACpC,UAAIc,CAAJ;AAAA,UAAO7G,GAAP;AAAA,UAAYyD,IAAI,GAAG,EAAnB;AAAA,UAAuByD,GAAG,GAAG9B,aAAa,CAAC2B,MAA3C;;AACA,WAAKF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGK,GAAhB,EAAqBL,CAAC,EAAtB,EAA0B;AACtB,YAAI,CAAC7G,GAAG,GAAGoF,aAAa,CAACpF,GAAd,CAAkB6G,CAAlB,CAAP,EAA6B5I,KAA7B,CAAmC8H,UAAnC,CAAJ,EAAoD;AAChDtC,UAAAA,IAAI,CAACH,IAAL,CAAUtD,GAAG,CAAC3B,OAAJ,CAAY0H,UAAZ,EAAwB,EAAxB,CAAV;AACH;AACJ;;AACD,aAAOtC,IAAP;AACH;AACJ,GAvFuB,EAAxB;;AAwFA,MAAI0D,SAAS,GAAG,YAAW;AACvB;;AACA,QAAIC,oBAAoB,GAAG,CAA3B;AAAA,QAA8BC,eAAe,GAAG,EAAhD;AAAA,QAAoDC,WAAW,GAAG,IAAIvD,QAAJ,CAAa,EAAb,CAAlE;;AACA,aAASoD,SAAT,CAAmBvD,CAAnB,EAAsB;AAClBA,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;AACA,WAAK2D,kBAAL,GAA0B3D,CAAC,CAAC2D,kBAAF,IAAwB,CAAlD;AACA,WAAKC,SAAL,GAAiB,KAAjB;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,KAAL,GAAa9D,CAAC,CAAC+D,SAAf;AACA,WAAKC,IAAL,GAAYhE,CAAC,CAACiE,OAAF,GAAYjE,CAAC,CAACiE,OAAF,CAAU,KAAKD,IAAf,CAAZ,GAAmC,KAAKA,IAApD;AACA,WAAKE,MAAL,GAAclE,CAAC,CAACmE,KAAF,KAAY,KAAZ,GAAoB,IAAIhE,QAAJ,CAAa,CAAb,CAApB,GAAsCuD,WAApD;AACH;;AACDH,IAAAA,SAAS,CAACa,qBAAV,GAAkC,SAASA,qBAAT,CAA+BC,GAA/B,EAAoC;AAClE,WAAKV,kBAAL,GAA0BU,GAA1B;AACH,KAFD;;AAGAd,IAAAA,SAAS,CAACe,UAAV,GAAuB,SAASA,UAAT,GAAsB;AACzCZ,MAAAA,WAAW,CAACrD,KAAZ;AACH,KAFD;;AAGArG,IAAAA,CAAC,CAACwC,KAAF,CAAQ+G,SAAS,CAAC/C,SAAlB,EAA6B;AACzB+D,MAAAA,YAAY,EAAE,SAASC,WAAT,CAAqBxE,CAArB,EAAwB;AAClCA,QAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;AACA,eAAOA,CAAC,CAACyE,GAAF,GAAQzE,CAAC,CAAC0E,IAAV,GAAiB3K,CAAC,CAAC4K,KAAF,CAAQ3E,CAAC,CAAC4E,IAAF,IAAU,EAAlB,CAAxB;AACH,OAJwB;AAKzBZ,MAAAA,IAAI,EAAE,UAAShE,CAAT,EAAYrE,EAAZ,EAAgB;AAClB,YAAIkJ,IAAI,GAAG,IAAX;AAAA,YAAiBL,WAAjB;AAAA,YAA8BM,KAA9B;AACAN,QAAAA,WAAW,GAAG,KAAKD,YAAL,CAAkBvE,CAAlB,CAAd;;AACA,YAAI,KAAK4D,SAAL,IAAkBY,WAAW,KAAK,KAAKX,OAA3C,EAAoD;AAChD;AACH;;AACD,YAAIiB,KAAK,GAAGrB,eAAe,CAACe,WAAD,CAA3B,EAA0C;AACtCM,UAAAA,KAAK,CAACC,IAAN,CAAWA,IAAX,EAAiBC,IAAjB,CAAsBA,IAAtB;AACH,SAFD,MAEO,IAAIxB,oBAAoB,GAAG,KAAKG,kBAAhC,EAAoD;AACvDH,UAAAA,oBAAoB;AACpBC,UAAAA,eAAe,CAACe,WAAD,CAAf,GAA+B,KAAKV,KAAL,CAAW9D,CAAX,EAAc+E,IAAd,CAAmBA,IAAnB,EAAyBC,IAAzB,CAA8BA,IAA9B,EAAoCC,MAApC,CAA2CA,MAA3C,CAA/B;AACH,SAHM,MAGA;AACH,eAAKC,iBAAL,GAAyB,GAAGpF,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAzB;AACH;;AACD,iBAASmH,IAAT,CAAcI,IAAd,EAAoB;AAChBxJ,UAAAA,EAAE,CAAC,IAAD,EAAOwJ,IAAP,CAAF;;AACAN,UAAAA,IAAI,CAACX,MAAL,CAAY5D,GAAZ,CAAgBkE,WAAhB,EAA6BW,IAA7B;AACH;;AACD,iBAASH,IAAT,GAAgB;AACZrJ,UAAAA,EAAE,CAAC,IAAD,CAAF;AACH;;AACD,iBAASsJ,MAAT,GAAkB;AACdzB,UAAAA,oBAAoB;AACpB,iBAAOC,eAAe,CAACe,WAAD,CAAtB;;AACA,cAAIK,IAAI,CAACK,iBAAT,EAA4B;AACxBL,YAAAA,IAAI,CAACb,IAAL,CAAUjG,KAAV,CAAgB8G,IAAhB,EAAsBA,IAAI,CAACK,iBAA3B;;AACAL,YAAAA,IAAI,CAACK,iBAAL,GAAyB,IAAzB;AACH;AACJ;AACJ,OAlCwB;AAmCzB3E,MAAAA,GAAG,EAAE,UAASP,CAAT,EAAYrE,EAAZ,EAAgB;AACjB,YAAIwJ,IAAJ,EAAUX,WAAV;AACA7I,QAAAA,EAAE,GAAGA,EAAE,IAAI5B,CAAC,CAACgF,IAAb;AACAiB,QAAAA,CAAC,GAAGhG,CAAC,CAACU,QAAF,CAAWsF,CAAX,IAAgB;AAChByE,UAAAA,GAAG,EAAEzE;AADW,SAAhB,GAEAA,CAAC,IAAI,EAFT;AAGAwE,QAAAA,WAAW,GAAG,KAAKD,YAAL,CAAkBvE,CAAlB,CAAd;AACA,aAAK4D,SAAL,GAAiB,KAAjB;AACA,aAAKC,OAAL,GAAeW,WAAf;;AACA,YAAIW,IAAI,GAAG,KAAKjB,MAAL,CAAY3D,GAAZ,CAAgBiE,WAAhB,CAAX,EAAyC;AACrC7I,UAAAA,EAAE,CAAC,IAAD,EAAOwJ,IAAP,CAAF;AACH,SAFD,MAEO;AACH,eAAKnB,IAAL,CAAUhE,CAAV,EAAarE,EAAb;AACH;AACJ,OAjDwB;AAkDzByJ,MAAAA,MAAM,EAAE,YAAW;AACf,aAAKxB,SAAL,GAAiB,IAAjB;AACH;AApDwB,KAA7B;;AAsDA,WAAOL,SAAP;AACH,GAzEe,EAAhB;;AA0EA,MAAI8B,WAAW,GAAG5D,MAAM,CAAC4D,WAAP,GAAqB,YAAW;AAC9C;;AACA,QAAIC,QAAQ,GAAG,GAAf;AAAA,QAAoBC,GAAG,GAAG,GAA1B;;AACA,aAASF,WAAT,CAAqBrF,CAArB,EAAwB;AACpBA,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;;AACA,UAAI,CAACA,CAAC,CAACwF,cAAH,IAAqB,CAACxF,CAAC,CAACyF,cAA5B,EAA4C;AACxC1L,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,qDAAR;AACH;;AACD,WAAKC,QAAL,GAAgB3F,CAAC,CAAC2F,QAAF,IAAc3L,CAAC,CAACsE,SAAhC;AACA,WAAKkH,cAAL,GAAsBxF,CAAC,CAACwF,cAAxB;AACA,WAAKC,cAAL,GAAsBzF,CAAC,CAACyF,cAAxB;AACA,WAAKG,kBAAL,GAA0B5F,CAAC,CAAC4F,kBAA5B;AACA,WAAKvF,KAAL;AACH;;AACDrG,IAAAA,CAAC,CAACwC,KAAF,CAAQ6I,WAAW,CAAC7E,SAApB,EAA+B;AAC3BqF,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmB7F,CAAnB,EAAsB;AAC7B,aAAK8F,MAAL,GAAc9F,CAAC,CAAC8F,MAAhB;AACA,aAAKC,IAAL,GAAY/F,CAAC,CAAC+F,IAAd;AACH,OAJ0B;AAK3B7E,MAAAA,GAAG,EAAE,UAAS0D,IAAT,EAAe;AAChB,YAAIC,IAAI,GAAG,IAAX;AACAD,QAAAA,IAAI,GAAG5K,CAAC,CAACa,OAAF,CAAU+J,IAAV,IAAkBA,IAAlB,GAAyB,CAAEA,IAAF,CAAhC;;AACA5K,QAAAA,CAAC,CAACyB,IAAF,CAAOmJ,IAAP,EAAa,UAASoB,KAAT,EAAgB;AACzB,cAAIC,EAAJ,EAAQ1G,MAAR;AACAsF,UAAAA,IAAI,CAACiB,MAAL,CAAYG,EAAE,GAAGpB,IAAI,CAACc,QAAL,CAAcK,KAAd,CAAjB,IAAyCA,KAAzC;AACAzG,UAAAA,MAAM,GAAG2G,eAAe,CAACrB,IAAI,CAACW,cAAL,CAAoBQ,KAApB,CAAD,CAAxB;;AACAhM,UAAAA,CAAC,CAACyB,IAAF,CAAO8D,MAAP,EAAe,UAAS4G,KAAT,EAAgB;AAC3B,gBAAIvF,IAAJ,EAAUwF,KAAV,EAAiBC,EAAjB;AACAzF,YAAAA,IAAI,GAAGiE,IAAI,CAACkB,IAAZ;AACAK,YAAAA,KAAK,GAAGD,KAAK,CAAC7G,KAAN,CAAY,EAAZ,CAAR;;AACA,mBAAO+G,EAAE,GAAGD,KAAK,CAACE,KAAN,EAAZ,EAA2B;AACvB1F,cAAAA,IAAI,GAAGA,IAAI,CAAC0E,QAAD,CAAJ,CAAee,EAAf,MAAuBzF,IAAI,CAAC0E,QAAD,CAAJ,CAAee,EAAf,IAAqBE,OAAO,EAAnD,CAAP;AACA3F,cAAAA,IAAI,CAAC2E,GAAD,CAAJ,CAAU7F,IAAV,CAAeuG,EAAf;AACH;AACJ,WARD;AASH,SAbD;AAcH,OAtB0B;AAuB3B1F,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAaiG,GAAb,EAAkB;AACnB,YAAI3B,IAAI,GAAG,IAAX;AACA,eAAO7K,CAAC,CAAC+B,GAAF,CAAMyK,GAAN,EAAW,UAASP,EAAT,EAAa;AAC3B,iBAAOpB,IAAI,CAACiB,MAAL,CAAYG,EAAZ,CAAP;AACH,SAFM,CAAP;AAGH,OA5B0B;AA6B3BQ,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBC,KAAhB,EAAuB;AAC3B,YAAI7B,IAAI,GAAG,IAAX;AAAA,YAAiBtF,MAAjB;AAAA,YAAyBoH,OAAzB;AACApH,QAAAA,MAAM,GAAG2G,eAAe,CAAC,KAAKT,cAAL,CAAoBiB,KAApB,CAAD,CAAxB;;AACA1M,QAAAA,CAAC,CAACyB,IAAF,CAAO8D,MAAP,EAAe,UAAS4G,KAAT,EAAgB;AAC3B,cAAIvF,IAAJ,EAAUwF,KAAV,EAAiBC,EAAjB,EAAqBG,GAArB;;AACA,cAAIG,OAAO,IAAIA,OAAO,CAACxD,MAAR,KAAmB,CAA9B,IAAmC,CAAC0B,IAAI,CAACe,kBAA7C,EAAiE;AAC7D,mBAAO,KAAP;AACH;;AACDhF,UAAAA,IAAI,GAAGiE,IAAI,CAACkB,IAAZ;AACAK,UAAAA,KAAK,GAAGD,KAAK,CAAC7G,KAAN,CAAY,EAAZ,CAAR;;AACA,iBAAOsB,IAAI,KAAKyF,EAAE,GAAGD,KAAK,CAACE,KAAN,EAAV,CAAX,EAAqC;AACjC1F,YAAAA,IAAI,GAAGA,IAAI,CAAC0E,QAAD,CAAJ,CAAee,EAAf,CAAP;AACH;;AACD,cAAIzF,IAAI,IAAIwF,KAAK,CAACjD,MAAN,KAAiB,CAA7B,EAAgC;AAC5BqD,YAAAA,GAAG,GAAG5F,IAAI,CAAC2E,GAAD,CAAJ,CAAUzF,KAAV,CAAgB,CAAhB,CAAN;AACA6G,YAAAA,OAAO,GAAGA,OAAO,GAAGC,eAAe,CAACD,OAAD,EAAUH,GAAV,CAAlB,GAAmCA,GAApD;AACH,WAHD,MAGO;AACH,gBAAI,CAAC3B,IAAI,CAACe,kBAAV,EAA8B;AAC1Be,cAAAA,OAAO,GAAG,EAAV;AACA,qBAAO,KAAP;AACH;AACJ;AACJ,SAnBD;;AAoBA,eAAOA,OAAO,GAAG3M,CAAC,CAAC+B,GAAF,CAAM8K,MAAM,CAACF,OAAD,CAAZ,EAAuB,UAASV,EAAT,EAAa;AACjD,iBAAOpB,IAAI,CAACiB,MAAL,CAAYG,EAAZ,CAAP;AACH,SAFgB,CAAH,GAET,EAFL;AAGH,OAvD0B;AAwD3Ba,MAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAChB,YAAIC,MAAM,GAAG,EAAb;;AACA,aAAK,IAAI3K,GAAT,IAAgB,KAAK0J,MAArB,EAA6B;AACzBiB,UAAAA,MAAM,CAACrH,IAAP,CAAY,KAAKoG,MAAL,CAAY1J,GAAZ,CAAZ;AACH;;AACD,eAAO2K,MAAP;AACH,OA9D0B;AA+D3B1G,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKyF,MAAL,GAAc,EAAd;AACA,aAAKC,IAAL,GAAYQ,OAAO,EAAnB;AACH,OAlE0B;AAmE3BS,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,eAAO;AACHlB,UAAAA,MAAM,EAAE,KAAKA,MADV;AAEHC,UAAAA,IAAI,EAAE,KAAKA;AAFR,SAAP;AAIH;AAxE0B,KAA/B;;AA0EA,WAAOV,WAAP;;AACA,aAASa,eAAT,CAAyB3G,MAAzB,EAAiC;AAC7BA,MAAAA,MAAM,GAAGvF,CAAC,CAACgC,MAAF,CAASuD,MAAT,EAAiB,UAAS4G,KAAT,EAAgB;AACtC,eAAO,CAAC,CAACA,KAAT;AACH,OAFQ,CAAT;AAGA5G,MAAAA,MAAM,GAAGvF,CAAC,CAAC+B,GAAF,CAAMwD,MAAN,EAAc,UAAS4G,KAAT,EAAgB;AACnC,eAAOA,KAAK,CAACc,WAAN,EAAP;AACH,OAFQ,CAAT;AAGA,aAAO1H,MAAP;AACH;;AACD,aAASgH,OAAT,GAAmB;AACf,UAAI3F,IAAI,GAAG,EAAX;AACAA,MAAAA,IAAI,CAAC2E,GAAD,CAAJ,GAAY,EAAZ;AACA3E,MAAAA,IAAI,CAAC0E,QAAD,CAAJ,GAAiB,EAAjB;AACA,aAAO1E,IAAP;AACH;;AACD,aAASiG,MAAT,CAAgBK,KAAhB,EAAuB;AACnB,UAAIC,IAAI,GAAG,EAAX;AAAA,UAAeC,OAAO,GAAG,EAAzB;;AACA,WAAK,IAAInE,CAAC,GAAG,CAAR,EAAWK,GAAG,GAAG4D,KAAK,CAAC/D,MAA5B,EAAoCF,CAAC,GAAGK,GAAxC,EAA6CL,CAAC,EAA9C,EAAkD;AAC9C,YAAI,CAACkE,IAAI,CAACD,KAAK,CAACjE,CAAD,CAAN,CAAT,EAAqB;AACjBkE,UAAAA,IAAI,CAACD,KAAK,CAACjE,CAAD,CAAN,CAAJ,GAAiB,IAAjB;AACAmE,UAAAA,OAAO,CAAC1H,IAAR,CAAawH,KAAK,CAACjE,CAAD,CAAlB;AACH;AACJ;;AACD,aAAOmE,OAAP;AACH;;AACD,aAASR,eAAT,CAAyBS,MAAzB,EAAiCC,MAAjC,EAAyC;AACrC,UAAIC,EAAE,GAAG,CAAT;AAAA,UAAYC,EAAE,GAAG,CAAjB;AAAA,UAAoBC,YAAY,GAAG,EAAnC;AACAJ,MAAAA,MAAM,GAAGA,MAAM,CAACK,IAAP,EAAT;AACAJ,MAAAA,MAAM,GAAGA,MAAM,CAACI,IAAP,EAAT;AACA,UAAIC,SAAS,GAAGN,MAAM,CAAClE,MAAvB;AAAA,UAA+ByE,SAAS,GAAGN,MAAM,CAACnE,MAAlD;;AACA,aAAOoE,EAAE,GAAGI,SAAL,IAAkBH,EAAE,GAAGI,SAA9B,EAAyC;AACrC,YAAIP,MAAM,CAACE,EAAD,CAAN,GAAaD,MAAM,CAACE,EAAD,CAAvB,EAA6B;AACzBD,UAAAA,EAAE;AACL,SAFD,MAEO,IAAIF,MAAM,CAACE,EAAD,CAAN,GAAaD,MAAM,CAACE,EAAD,CAAvB,EAA6B;AAChCA,UAAAA,EAAE;AACL,SAFM,MAEA;AACHC,UAAAA,YAAY,CAAC/H,IAAb,CAAkB2H,MAAM,CAACE,EAAD,CAAxB;AACAA,UAAAA,EAAE;AACFC,UAAAA,EAAE;AACL;AACJ;;AACD,aAAOC,YAAP;AACH;AACJ,GApIsC,EAAvC;;AAqIA,MAAII,QAAQ,GAAG,YAAW;AACtB;;AACA,QAAIhI,IAAJ;AACAA,IAAAA,IAAI,GAAG;AACH+E,MAAAA,IAAI,EAAE,MADH;AAEHkD,MAAAA,QAAQ,EAAE,UAFP;AAGHC,MAAAA,UAAU,EAAE;AAHT,KAAP;;AAKA,aAASF,QAAT,CAAkB7H,CAAlB,EAAqB;AACjB,WAAKyE,GAAL,GAAWzE,CAAC,CAACyE,GAAb;AACA,WAAK1B,GAAL,GAAW/C,CAAC,CAAC+C,GAAb;AACA,WAAKoB,KAAL,GAAanE,CAAC,CAACmE,KAAf;AACA,WAAK6D,OAAL,GAAehI,CAAC,CAACgI,OAAjB;AACA,WAAKC,SAAL,GAAiBjI,CAAC,CAACiI,SAAnB;AACA,WAAKlE,SAAL,GAAiB/D,CAAC,CAAC+D,SAAnB;AACA,WAAKgE,UAAL,GAAkB/H,CAAC,CAAC+H,UAApB;AACA,WAAKG,OAAL,GAAe,IAAI3G,iBAAJ,CAAsBvB,CAAC,CAACmI,QAAxB,CAAf;AACH;;AACDnO,IAAAA,CAAC,CAACwC,KAAF,CAAQqL,QAAQ,CAACrH,SAAjB,EAA4B;AACxB4H,MAAAA,SAAS,EAAE,SAASC,QAAT,GAAoB;AAC3B,eAAO;AACH5D,UAAAA,GAAG,EAAE,KAAKA,GADP;AAEHC,UAAAA,IAAI,EAAE,KAFH;AAGH4D,UAAAA,QAAQ,EAAE;AAHP,SAAP;AAKH,OAPuB;AAQxBC,MAAAA,KAAK,EAAE,SAASA,KAAT,CAAe3D,IAAf,EAAqB;AACxB,YAAI,CAAC,KAAKT,KAAV,EAAiB;AACb;AACH;;AACD,aAAK+D,OAAL,CAAa5H,GAAb,CAAiBT,IAAI,CAAC+E,IAAtB,EAA4BA,IAA5B,EAAkC,KAAK7B,GAAvC;AACA,aAAKmF,OAAL,CAAa5H,GAAb,CAAiBT,IAAI,CAACiI,QAAtB,EAAgCU,QAAQ,CAACV,QAAzC,EAAmD,KAAK/E,GAAxD;AACA,aAAKmF,OAAL,CAAa5H,GAAb,CAAiBT,IAAI,CAACkI,UAAtB,EAAkC,KAAKA,UAAvC,EAAmD,KAAKhF,GAAxD;AACH,OAfuB;AAgBxB0F,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,YAAIC,MAAM,GAAG,EAAb;AAAA,YAAiBhG,SAAjB;;AACA,YAAI,CAAC,KAAKyB,KAAV,EAAiB;AACb,iBAAO,IAAP;AACH;;AACDuE,QAAAA,MAAM,CAAC9D,IAAP,GAAc,KAAKsD,OAAL,CAAa3H,GAAb,CAAiBV,IAAI,CAAC+E,IAAtB,CAAd;AACA8D,QAAAA,MAAM,CAACZ,QAAP,GAAkB,KAAKI,OAAL,CAAa3H,GAAb,CAAiBV,IAAI,CAACiI,QAAtB,CAAlB;AACAY,QAAAA,MAAM,CAACX,UAAP,GAAoB,KAAKG,OAAL,CAAa3H,GAAb,CAAiBV,IAAI,CAACkI,UAAtB,CAApB;AACArF,QAAAA,SAAS,GAAGgG,MAAM,CAACX,UAAP,KAAsB,KAAKA,UAA3B,IAAyCW,MAAM,CAACZ,QAAP,KAAoBU,QAAQ,CAACV,QAAlF;AACA,eAAOY,MAAM,CAAC9D,IAAP,IAAe,CAAClC,SAAhB,GAA4BgG,MAAM,CAAC9D,IAAnC,GAA0C,IAAjD;AACH,OA1BuB;AA2BxB+D,MAAAA,WAAW,EAAE,UAAShN,EAAT,EAAa;AACtB,YAAIkJ,IAAI,GAAG,IAAX;AAAA,YAAiBwD,QAAjB;;AACA,YAAI,CAAC1M,EAAL,EAAS;AACL;AACH;;AACD0M,QAAAA,QAAQ,GAAG,KAAKL,OAAL,CAAa,KAAKI,SAAL,EAAb,CAAX;AACA,aAAKrE,SAAL,CAAesE,QAAf,EAAyBrD,IAAzB,CAA8B4D,OAA9B,EAAuC7D,IAAvC,CAA4C8D,UAA5C;;AACA,iBAASD,OAAT,GAAmB;AACfjN,UAAAA,EAAE,CAAC,IAAD,CAAF;AACH;;AACD,iBAASkN,UAAT,CAAoB1D,IAApB,EAA0B;AACtBxJ,UAAAA,EAAE,CAAC,IAAD,EAAOkJ,IAAI,CAACoD,SAAL,CAAe9C,IAAf,CAAP,CAAF;AACH;AACJ,OAxCuB;AAyCxB1C,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKyF,OAAL,CAAazF,KAAb;AACA,eAAO,IAAP;AACH;AA5CuB,KAA5B;;AA8CA,WAAOoF,QAAP;AACH,GAjEc,EAAf;;AAkEA,MAAIiB,MAAM,GAAG,YAAW;AACpB;;AACA,aAASA,MAAT,CAAgB9I,CAAhB,EAAmB;AACf,WAAKyE,GAAL,GAAWzE,CAAC,CAACyE,GAAb;AACA,WAAKuD,OAAL,GAAehI,CAAC,CAACgI,OAAjB;AACA,WAAKC,SAAL,GAAiBjI,CAAC,CAACiI,SAAnB;AACA,WAAKc,aAAL,GAAqB/I,CAAC,CAAC+I,aAAvB;AACA,WAAKhF,SAAL,GAAiB,IAAIR,SAAJ,CAAc;AAC3BY,QAAAA,KAAK,EAAEnE,CAAC,CAACmE,KADkB;AAE3BF,QAAAA,OAAO,EAAEjE,CAAC,CAACiE,OAFgB;AAG3BF,QAAAA,SAAS,EAAE/D,CAAC,CAAC+D,SAHc;AAI3BJ,QAAAA,kBAAkB,EAAE3D,CAAC,CAAC2D;AAJK,OAAd,CAAjB;AAMH;;AACD3J,IAAAA,CAAC,CAACwC,KAAF,CAAQsM,MAAM,CAACtI,SAAf,EAA0B;AACtB4H,MAAAA,SAAS,EAAE,SAASC,QAAT,GAAoB;AAC3B,eAAO;AACH5D,UAAAA,GAAG,EAAE,KAAKA,GADP;AAEHC,UAAAA,IAAI,EAAE,KAFH;AAGH4D,UAAAA,QAAQ,EAAE;AAHP,SAAP;AAKH,OAPqB;AAQtB/H,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAamG,KAAb,EAAoB/K,EAApB,EAAwB;AACzB,YAAIkJ,IAAI,GAAG,IAAX;AAAA,YAAiBwD,QAAjB;;AACA,YAAI,CAAC1M,EAAL,EAAS;AACL;AACH;;AACD+K,QAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AACA2B,QAAAA,QAAQ,GAAG,KAAKL,OAAL,CAAatB,KAAb,EAAoB,KAAK0B,SAAL,EAApB,CAAX;AACA,eAAO,KAAKrE,SAAL,CAAexD,GAAf,CAAmB8H,QAAnB,EAA6BQ,UAA7B,CAAP;;AACA,iBAASA,UAAT,CAAoBhH,GAApB,EAAyBsD,IAAzB,EAA+B;AAC3BtD,UAAAA,GAAG,GAAGlG,EAAE,CAAC,EAAD,CAAL,GAAYA,EAAE,CAACkJ,IAAI,CAACoD,SAAL,CAAe9C,IAAf,CAAD,CAAjB;AACH;AACJ,OAnBqB;AAoBtB6D,MAAAA,iBAAiB,EAAE,SAASA,iBAAT,GAA6B;AAC5C,aAAKjF,SAAL,CAAeqB,MAAf;AACH;AAtBqB,KAA1B;;AAwBA,WAAO0D,MAAP;AACH,GAvCY,EAAb;;AAwCA,MAAIG,OAAO,GAAG,YAAW;AACrB;;AACA,WAAO,SAASC,KAAT,CAAelJ,CAAf,EAAkB;AACrB,UAAImJ,QAAJ,EAAcC,MAAd;AACAD,MAAAA,QAAQ,GAAG;AACPE,QAAAA,UAAU,EAAE,IADL;AAEP1D,QAAAA,QAAQ,EAAE3L,CAAC,CAACsE,SAFL;AAGPkH,QAAAA,cAAc,EAAE,IAHT;AAIPC,QAAAA,cAAc,EAAE,IAJT;AAKPG,QAAAA,kBAAkB,EAAE,KALb;AAMP0D,QAAAA,UAAU,EAAE,CANL;AAOPC,QAAAA,WAAW,EAAE,KAPN;AAQPH,QAAAA,MAAM,EAAE,IARD;AASPI,QAAAA,KAAK,EAAE,EATA;AAUPC,QAAAA,QAAQ,EAAE,IAVH;AAWPC,QAAAA,MAAM,EAAE;AAXD,OAAX;AAaA1J,MAAAA,CAAC,GAAGhG,CAAC,CAACwC,KAAF,CAAQ2M,QAAR,EAAkBnJ,CAAC,IAAI,EAAvB,CAAJ;AACA,OAACA,CAAC,CAACwF,cAAH,IAAqBzL,CAAC,CAAC2L,KAAF,CAAQ,4BAAR,CAArB;AACA,OAAC1F,CAAC,CAACyF,cAAH,IAAqB1L,CAAC,CAAC2L,KAAF,CAAQ,4BAAR,CAArB;AACA0D,MAAAA,MAAM,GAAGpJ,CAAC,CAACoJ,MAAX;AACApJ,MAAAA,CAAC,CAACoJ,MAAF,GAAWA,MAAM,GAAG,UAASzM,CAAT,EAAY;AAC5B,eAAOA,CAAC,CAAC+K,IAAF,CAAO0B,MAAP,CAAP;AACH,OAFgB,GAEbpP,CAAC,CAAC0C,QAFN;AAGAsD,MAAAA,CAAC,CAACwJ,KAAF,GAAUxP,CAAC,CAACc,UAAF,CAAakF,CAAC,CAACwJ,KAAf,IAAwBxJ,CAAC,CAACwJ,KAAF,EAAxB,GAAoCxJ,CAAC,CAACwJ,KAAhD;AACAxJ,MAAAA,CAAC,CAACyJ,QAAF,GAAaE,aAAa,CAAC3J,CAAC,CAACyJ,QAAH,CAA1B;AACAzJ,MAAAA,CAAC,CAAC0J,MAAF,GAAWE,WAAW,CAAC5J,CAAC,CAAC0J,MAAH,CAAtB;AACA,aAAO1J,CAAP;AACH,KA1BD;;AA2BA,aAAS2J,aAAT,CAAuB3J,CAAvB,EAA0B;AACtB,UAAImJ,QAAJ;;AACA,UAAI,CAACnJ,CAAL,EAAQ;AACJ,eAAO,IAAP;AACH;;AACDmJ,MAAAA,QAAQ,GAAG;AACP1E,QAAAA,GAAG,EAAE,IADE;AAEP1B,QAAAA,GAAG,EAAE,KAAK,EAAL,GAAU,EAAV,GAAe,GAFb;AAGPoB,QAAAA,KAAK,EAAE,IAHA;AAIPgE,QAAAA,QAAQ,EAAE,IAJH;AAKPJ,QAAAA,UAAU,EAAE,EALL;AAMPC,QAAAA,OAAO,EAAEhO,CAAC,CAAC0C,QANJ;AAOPuL,QAAAA,SAAS,EAAEjO,CAAC,CAAC0C,QAPN;AAQPqH,QAAAA,SAAS,EAAE;AARJ,OAAX;AAUA/D,MAAAA,CAAC,GAAGhG,CAAC,CAACU,QAAF,CAAWsF,CAAX,IAAgB;AAChByE,QAAAA,GAAG,EAAEzE;AADW,OAAhB,GAEAA,CAFJ;AAGAA,MAAAA,CAAC,GAAGhG,CAAC,CAACwC,KAAF,CAAQ2M,QAAR,EAAkBnJ,CAAlB,CAAJ;AACA,OAACA,CAAC,CAACyE,GAAH,IAAU1K,CAAC,CAAC2L,KAAF,CAAQ,iCAAR,CAAV;AACA1F,MAAAA,CAAC,CAACiI,SAAF,GAAcjI,CAAC,CAAChE,MAAF,IAAYgE,CAAC,CAACiI,SAA5B;AACAjI,MAAAA,CAAC,CAACmI,QAAF,GAAanI,CAAC,CAACmI,QAAF,IAAcnI,CAAC,CAACyE,GAA7B;AACAzE,MAAAA,CAAC,CAAC+H,UAAF,GAAe/I,OAAO,GAAGgB,CAAC,CAAC+H,UAA3B;AACA/H,MAAAA,CAAC,CAAC+D,SAAF,GAAc/D,CAAC,CAAC+D,SAAF,GAAc8F,kBAAkB,CAAC7J,CAAC,CAAC+D,SAAH,CAAhC,GAAgDhK,CAAC,CAAC+P,IAAhE;AACA,aAAO9J,CAAP;AACH;;AACD,aAAS4J,WAAT,CAAqB5J,CAArB,EAAwB;AACpB,UAAImJ,QAAJ;;AACA,UAAI,CAACnJ,CAAL,EAAQ;AACJ;AACH;;AACDmJ,MAAAA,QAAQ,GAAG;AACP1E,QAAAA,GAAG,EAAE,IADE;AAEPN,QAAAA,KAAK,EAAE,IAFA;AAGP6D,QAAAA,OAAO,EAAE,IAHF;AAIPvN,QAAAA,OAAO,EAAE,IAJF;AAKPsP,QAAAA,QAAQ,EAAE,IALH;AAMP9F,QAAAA,OAAO,EAAE,IANF;AAOP+F,QAAAA,WAAW,EAAE,UAPN;AAQPC,QAAAA,aAAa,EAAE,GARR;AASPhC,QAAAA,SAAS,EAAEjO,CAAC,CAAC0C,QATN;AAUPqH,QAAAA,SAAS,EAAE;AAVJ,OAAX;AAYA/D,MAAAA,CAAC,GAAGhG,CAAC,CAACU,QAAF,CAAWsF,CAAX,IAAgB;AAChByE,QAAAA,GAAG,EAAEzE;AADW,OAAhB,GAEAA,CAFJ;AAGAA,MAAAA,CAAC,GAAGhG,CAAC,CAACwC,KAAF,CAAQ2M,QAAR,EAAkBnJ,CAAlB,CAAJ;AACA,OAACA,CAAC,CAACyE,GAAH,IAAU1K,CAAC,CAAC2L,KAAF,CAAQ,+BAAR,CAAV;AACA1F,MAAAA,CAAC,CAACiI,SAAF,GAAcjI,CAAC,CAAChE,MAAF,IAAYgE,CAAC,CAACiI,SAA5B;AACAjI,MAAAA,CAAC,CAACgI,OAAF,GAAYkC,eAAe,CAAClK,CAAD,CAA3B;AACAA,MAAAA,CAAC,CAACiE,OAAF,GAAYkG,SAAS,CAACnK,CAAD,CAArB;AACAA,MAAAA,CAAC,CAAC+D,SAAF,GAAc/D,CAAC,CAAC+D,SAAF,GAAc8F,kBAAkB,CAAC7J,CAAC,CAAC+D,SAAH,CAAhC,GAAgDhK,CAAC,CAAC+P,IAAhE;AACA,aAAO9J,CAAC,CAACvF,OAAT;AACA,aAAOuF,CAAC,CAAC+J,QAAT;AACA,aAAO/J,CAAC,CAACgK,WAAT;AACA,aAAOhK,CAAC,CAACiK,aAAT;AACA,aAAOjK,CAAP;AACH;;AACD,aAASkK,eAAT,CAAyBlK,CAAzB,EAA4B;AACxB,UAAIgI,OAAJ,EAAavN,OAAb,EAAsBsP,QAAtB;AACA/B,MAAAA,OAAO,GAAGhI,CAAC,CAACgI,OAAZ;AACAvN,MAAAA,OAAO,GAAGuF,CAAC,CAACvF,OAAZ;AACAsP,MAAAA,QAAQ,GAAG/J,CAAC,CAAC+J,QAAb;;AACA,UAAI/B,OAAJ,EAAa;AACT,eAAOA,OAAP;AACH;;AACD,UAAIvN,OAAJ,EAAa;AACTuN,QAAAA,OAAO,GAAGoC,gBAAV;AACH,OAFD,MAEO,IAAIpK,CAAC,CAAC+J,QAAN,EAAgB;AACnB/B,QAAAA,OAAO,GAAGqC,iBAAV;AACH,OAFM,MAEA;AACHrC,QAAAA,OAAO,GAAGsC,eAAV;AACH;;AACD,aAAOtC,OAAP;;AACA,eAASoC,gBAAT,CAA0B1D,KAA1B,EAAiC2B,QAAjC,EAA2C;AACvCA,QAAAA,QAAQ,CAAC5D,GAAT,GAAehK,OAAO,CAAC4N,QAAQ,CAAC5D,GAAV,EAAeiC,KAAf,CAAtB;AACA,eAAO2B,QAAP;AACH;;AACD,eAASgC,iBAAT,CAA2B3D,KAA3B,EAAkC2B,QAAlC,EAA4C;AACxCA,QAAAA,QAAQ,CAAC5D,GAAT,GAAe4D,QAAQ,CAAC5D,GAAT,CAAahK,OAAb,CAAqBsP,QAArB,EAA+BQ,kBAAkB,CAAC7D,KAAD,CAAjD,CAAf;AACA,eAAO2B,QAAP;AACH;;AACD,eAASiC,eAAT,CAAyB5D,KAAzB,EAAgC2B,QAAhC,EAA0C;AACtC,eAAOA,QAAP;AACH;AACJ;;AACD,aAAS8B,SAAT,CAAmBnK,CAAnB,EAAsB;AAClB,UAAIiE,OAAJ,EAAauG,MAAb,EAAqBjN,IAArB;AACA0G,MAAAA,OAAO,GAAGjE,CAAC,CAACiE,OAAZ;AACAuG,MAAAA,MAAM,GAAGxK,CAAC,CAACgK,WAAX;AACAzM,MAAAA,IAAI,GAAGyC,CAAC,CAACiK,aAAT;;AACA,UAAI,CAAChG,OAAL,EAAc;AACVA,QAAAA,OAAO,GAAG,cAAc/J,IAAd,CAAmBsQ,MAAnB,IAA6BvM,QAAQ,CAACV,IAAD,CAArC,GAA8CF,QAAQ,CAACE,IAAD,CAAhE;AACH;;AACD,aAAO0G,OAAP;;AACA,eAAS5G,QAAT,CAAkBE,IAAlB,EAAwB;AACpB,eAAO,SAASF,QAAT,CAAkBF,EAAlB,EAAsB;AACzB,iBAAOnD,CAAC,CAACqD,QAAF,CAAWF,EAAX,EAAeI,IAAf,CAAP;AACH,SAFD;AAGH;;AACD,eAASU,QAAT,CAAkBV,IAAlB,EAAwB;AACpB,eAAO,SAASU,QAAT,CAAkBd,EAAlB,EAAsB;AACzB,iBAAOnD,CAAC,CAACiE,QAAF,CAAWd,EAAX,EAAeI,IAAf,CAAP;AACH,SAFD;AAGH;AACJ;;AACD,aAASsM,kBAAT,CAA4B1M,EAA5B,EAAgC;AAC5B,aAAO,SAASsN,OAAT,CAAiBzK,CAAjB,EAAoB;AACvB,YAAI0K,QAAQ,GAAG3Q,CAAC,CAAC4Q,QAAF,EAAf;AACAxN,QAAAA,EAAE,CAAC6C,CAAD,EAAI4K,SAAJ,EAAehC,OAAf,CAAF;AACA,eAAO8B,QAAP;;AACA,iBAASE,SAAT,CAAmBzF,IAAnB,EAAyB;AACrBnL,UAAAA,CAAC,CAACkD,KAAF,CAAQ,YAAW;AACfwN,YAAAA,QAAQ,CAACG,OAAT,CAAiB1F,IAAjB;AACH,WAFD;AAGH;;AACD,iBAASyD,OAAT,CAAiB/G,GAAjB,EAAsB;AAClB7H,UAAAA,CAAC,CAACkD,KAAF,CAAQ,YAAW;AACfwN,YAAAA,QAAQ,CAACI,MAAT,CAAgBjJ,GAAhB;AACH,WAFD;AAGH;AACJ,OAdD;AAeH;AACJ,GAxJa,EAAd;;AAyJA,MAAIkJ,UAAU,GAAG,YAAW;AACxB;;AACA,QAAIC,GAAJ;AACAA,IAAAA,GAAG,GAAGvJ,MAAM,IAAIA,MAAM,CAACsJ,UAAvB;;AACA,aAASA,UAAT,CAAoB/K,CAApB,EAAuB;AACnBA,MAAAA,CAAC,GAAGiJ,OAAO,CAACjJ,CAAD,CAAX;AACA,WAAKoJ,MAAL,GAAcpJ,CAAC,CAACoJ,MAAhB;AACA,WAAKzD,QAAL,GAAgB3F,CAAC,CAAC2F,QAAlB;AACA,WAAK2D,UAAL,GAAkBtJ,CAAC,CAACsJ,UAApB;AACA,WAAKC,WAAL,GAAmBvJ,CAAC,CAACuJ,WAArB;AACA,WAAKC,KAAL,GAAaxJ,CAAC,CAACwJ,KAAf;AACA,WAAKE,MAAL,GAAc1J,CAAC,CAAC0J,MAAF,GAAW,IAAIZ,MAAJ,CAAW9I,CAAC,CAAC0J,MAAb,CAAX,GAAkC,IAAhD;AACA,WAAKD,QAAL,GAAgBzJ,CAAC,CAACyJ,QAAF,GAAa,IAAI5B,QAAJ,CAAa7H,CAAC,CAACyJ,QAAf,CAAb,GAAwC,IAAxD;AACA,WAAK5N,KAAL,GAAa,IAAIwJ,WAAJ,CAAgB;AACzBM,QAAAA,QAAQ,EAAE,KAAKA,QADU;AAEzBH,QAAAA,cAAc,EAAExF,CAAC,CAACwF,cAFO;AAGzBC,QAAAA,cAAc,EAAEzF,CAAC,CAACyF;AAHO,OAAhB,CAAb;AAKAzF,MAAAA,CAAC,CAACqJ,UAAF,KAAiB,KAAjB,IAA0B,KAAKA,UAAL,EAA1B;AACH;;AACD0B,IAAAA,UAAU,CAACE,UAAX,GAAwB,SAASA,UAAT,GAAsB;AAC1CxJ,MAAAA,MAAM,KAAKA,MAAM,CAACsJ,UAAP,GAAoBC,GAAzB,CAAN;AACA,aAAOD,UAAP;AACH,KAHD;;AAIAA,IAAAA,UAAU,CAAC9L,UAAX,GAAwBA,UAAxB;;AACAjF,IAAAA,CAAC,CAACwC,KAAF,CAAQuO,UAAU,CAACvK,SAAnB,EAA8B;AAC1B0K,MAAAA,WAAW,EAAE,SAASC,SAAT,GAAqB;AAC9B,YAAItG,IAAI,GAAG,IAAX;AACA,eAAO,KAAK6E,MAAL,GAAc0B,SAAd,GAA0BC,YAAjC;;AACA,iBAASD,SAAT,CAAmB1E,KAAnB,EAA0B4E,IAA1B,EAAgCC,KAAhC,EAAuC;AACnC,iBAAO1G,IAAI,CAAC4B,MAAL,CAAYC,KAAZ,EAAmB4E,IAAnB,EAAyBC,KAAzB,CAAP;AACH;;AACD,iBAASF,YAAT,CAAsB3E,KAAtB,EAA6B4E,IAA7B,EAAmC;AAC/B,iBAAOzG,IAAI,CAAC4B,MAAL,CAAYC,KAAZ,EAAmB4E,IAAnB,CAAP;AACH;AACJ,OAVyB;AAW1BE,MAAAA,aAAa,EAAE,SAASC,YAAT,GAAwB;AACnC,YAAI5G,IAAI,GAAG,IAAX;AAAA,YAAiB6F,QAAjB;AAAA,YAA2BgB,UAA3B;AACAhB,QAAAA,QAAQ,GAAG3Q,CAAC,CAAC4Q,QAAF,EAAX;;AACA,YAAI,CAAC,KAAKlB,QAAV,EAAoB;AAChBiB,UAAAA,QAAQ,CAACG,OAAT;AACH,SAFD,MAEO,IAAIa,UAAU,GAAG,KAAKjC,QAAL,CAAchB,SAAd,EAAjB,EAA4C;AAC/C,eAAK5M,KAAL,CAAWgK,SAAX,CAAqB6F,UAArB;AACAhB,UAAAA,QAAQ,CAACG,OAAT;AACH,SAHM,MAGA;AACH,eAAKpB,QAAL,CAAcd,WAAd,CAA0B5D,IAA1B;AACH;;AACD,eAAO2F,QAAQ,CAACiB,OAAT,EAAP;;AACA,iBAAS5G,IAAT,CAAclD,GAAd,EAAmB+C,IAAnB,EAAyB;AACrB,cAAI/C,GAAJ,EAAS;AACL,mBAAO6I,QAAQ,CAACI,MAAT,EAAP;AACH;;AACDjG,UAAAA,IAAI,CAAC3D,GAAL,CAAS0D,IAAT;AACAC,UAAAA,IAAI,CAAC4E,QAAL,CAAclB,KAAd,CAAoB1D,IAAI,CAAChJ,KAAL,CAAWmL,SAAX,EAApB;AACA0D,UAAAA,QAAQ,CAACG,OAAT;AACH;AACJ,OA/ByB;AAgC1Be,MAAAA,WAAW,EAAE,SAASvC,UAAT,GAAsB;AAC/B,YAAIxE,IAAI,GAAG,IAAX;AAAA,YAAiB6F,QAAjB;AACA,aAAKjI,KAAL;;AACA,SAAC,KAAKoJ,WAAL,GAAmB,KAAKL,aAAL,EAApB,EAA0CzG,IAA1C,CAA+C+G,eAA/C;;AACA,eAAO,KAAKD,WAAZ;;AACA,iBAASC,eAAT,GAA2B;AACvBjH,UAAAA,IAAI,CAAC3D,GAAL,CAAS2D,IAAI,CAAC2E,KAAd;AACH;AACJ,OAxCyB;AAyC1BH,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoB0C,KAApB,EAA2B;AACnC,eAAO,CAAC,KAAKF,WAAN,IAAqBE,KAArB,GAA6B,KAAKH,WAAL,EAA7B,GAAkD,KAAKC,WAA9D;AACH,OA3CyB;AA4C1B3K,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAa0D,IAAb,EAAmB;AACpB,aAAK/I,KAAL,CAAWqF,GAAX,CAAe0D,IAAf;AACA,eAAO,IAAP;AACH,OA/CyB;AAgD1BrE,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAaiG,GAAb,EAAkB;AACnBA,QAAAA,GAAG,GAAGxM,CAAC,CAACa,OAAF,CAAU2L,GAAV,IAAiBA,GAAjB,GAAuB,GAAG1G,KAAH,CAASxD,IAAT,CAAcsB,SAAd,CAA7B;AACA,eAAO,KAAK/B,KAAL,CAAW0E,GAAX,CAAeiG,GAAf,CAAP;AACH,OAnDyB;AAoD1BC,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBC,KAAhB,EAAuB4E,IAAvB,EAA6BC,KAA7B,EAAoC;AACxC,YAAI1G,IAAI,GAAG,IAAX;AAAA,YAAiB2E,KAAjB;AACA8B,QAAAA,IAAI,GAAGA,IAAI,IAAItR,CAAC,CAAC+E,IAAjB;AACAwM,QAAAA,KAAK,GAAGA,KAAK,IAAIvR,CAAC,CAAC+E,IAAnB;AACAyK,QAAAA,KAAK,GAAG,KAAKJ,MAAL,CAAY,KAAKvN,KAAL,CAAW4K,MAAX,CAAkBC,KAAlB,CAAZ,CAAR;AACA4E,QAAAA,IAAI,CAAC,KAAK5B,MAAL,GAAcF,KAAK,CAAC1J,KAAN,EAAd,GAA8B0J,KAA/B,CAAJ;;AACA,YAAI,KAAKE,MAAL,IAAeF,KAAK,CAACrG,MAAN,GAAe,KAAKmG,UAAvC,EAAmD;AAC/C,eAAKI,MAAL,CAAYnJ,GAAZ,CAAgBmG,KAAhB,EAAuBsF,aAAvB;AACH,SAFD,MAEO,IAAI,KAAKtC,MAAT,EAAiB;AACpB,eAAKA,MAAL,CAAYV,iBAAZ;AACH;;AACD,eAAO,IAAP;;AACA,iBAASgD,aAAT,CAAuBtC,MAAvB,EAA+B;AAC3B,cAAIuC,aAAa,GAAG,EAApB;;AACAjS,UAAAA,CAAC,CAACyB,IAAF,CAAOiO,MAAP,EAAe,UAASwC,CAAT,EAAY;AACvB,aAAClS,CAAC,CAACuC,IAAF,CAAOiN,KAAP,EAAc,UAAS2C,CAAT,EAAY;AACvB,qBAAOtH,IAAI,CAACc,QAAL,CAAcuG,CAAd,MAAqBrH,IAAI,CAACc,QAAL,CAAcwG,CAAd,CAA5B;AACH,aAFA,CAAD,IAEMF,aAAa,CAACvM,IAAd,CAAmBwM,CAAnB,CAFN;AAGH,WAJD;;AAKArH,UAAAA,IAAI,CAAC0E,WAAL,IAAoB1E,IAAI,CAAC3D,GAAL,CAAS+K,aAAT,CAApB;AACAV,UAAAA,KAAK,CAACU,aAAD,CAAL;AACH;AACJ,OA1EyB;AA2E1BnF,MAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAChB,eAAO,KAAKjL,KAAL,CAAWiL,GAAX,EAAP;AACH,OA7EyB;AA8E1BrE,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAK5G,KAAL,CAAWwE,KAAX;AACA,eAAO,IAAP;AACH,OAjFyB;AAkF1B+L,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAC9C,aAAK3C,QAAL,IAAiB,KAAKA,QAAL,CAAchH,KAAd,EAAjB;AACA,eAAO,IAAP;AACH,OArFyB;AAsF1B4J,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC1C9I,QAAAA,SAAS,CAACe,UAAV;AACA,eAAO,IAAP;AACH,OAzFyB;AA0F1B6G,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,eAAO,KAAKD,WAAL,EAAP;AACH;AA5FyB,KAA9B;;AA8FA,WAAOH,UAAP;AACH,GAxHgB,EAAjB;;AAyHA,SAAOA,UAAP;AACH,CAj7BD;;AAm7BA,CAAC,UAASxR,IAAT,EAAeC,OAAf,EAAwB;AACrB,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AAC5CD,IAAAA,MAAM,CAAC,CAAE,QAAF,CAAD,EAAe,UAASE,EAAT,EAAa;AAC9B,aAAOH,OAAO,CAACG,EAAD,CAAd;AACH,KAFK,CAAN;AAGH,GAJD,MAIO,IAAI,OAAOC,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACC,OAAzC,EAAkD;AACrDD,IAAAA,MAAM,CAACC,OAAP,GAAiBL,OAAO,CAACM,OAAO,CAAC,QAAD,CAAR,CAAxB;AACH,GAFM,MAEA;AACHN,IAAAA,OAAO,CAACD,IAAI,CAAC,QAAD,CAAL,CAAP;AACH;AACJ,CAVD,EAUG,IAVH,EAUS,UAASQ,CAAT,EAAY;AACjB,MAAIC,CAAC,GAAG,YAAW;AACf;;AACA,WAAO;AACHC,MAAAA,MAAM,EAAE,YAAW;AACf,eAAO,kBAAkBC,IAAlB,CAAuBC,SAAS,CAACC,SAAjC,IAA8CD,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,0BAA1B,EAAsD,CAAtD,CAA9C,GAAyG,KAAhH;AACH,OAHE;AAIHC,MAAAA,aAAa,EAAE,UAASC,GAAT,EAAc;AACzB,eAAO,CAACA,GAAD,IAAQ,QAAQL,IAAR,CAAaK,GAAb,CAAf;AACH,OANE;AAOHC,MAAAA,gBAAgB,EAAE,UAASD,GAAT,EAAc;AAC5B,eAAOA,GAAG,CAACE,OAAJ,CAAY,qCAAZ,EAAmD,MAAnD,CAAP;AACH,OATE;AAUHC,MAAAA,QAAQ,EAAE,UAASC,GAAT,EAAc;AACpB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACH,OAZE;AAaHC,MAAAA,QAAQ,EAAE,UAASD,GAAT,EAAc;AACpB,eAAO,OAAOA,GAAP,KAAe,QAAtB;AACH,OAfE;AAgBHE,MAAAA,OAAO,EAAEd,CAAC,CAACc,OAhBR;AAiBHC,MAAAA,UAAU,EAAEf,CAAC,CAACe,UAjBX;AAkBHC,MAAAA,QAAQ,EAAEhB,CAAC,CAACiB,aAlBT;AAmBHC,MAAAA,WAAW,EAAE,UAASN,GAAT,EAAc;AACvB,eAAO,OAAOA,GAAP,KAAe,WAAtB;AACH,OArBE;AAsBHO,MAAAA,SAAS,EAAE,UAASP,GAAT,EAAc;AACrB,eAAO,CAAC,EAAEA,GAAG,IAAIA,GAAG,CAACQ,QAAJ,KAAiB,CAA1B,CAAR;AACH,OAxBE;AAyBHC,MAAAA,QAAQ,EAAE,UAAST,GAAT,EAAc;AACpB,eAAOA,GAAG,YAAYZ,CAAtB;AACH,OA3BE;AA4BHsB,MAAAA,KAAK,EAAE,SAASA,KAAT,CAAeC,CAAf,EAAkB;AACrB,eAAOtB,CAAC,CAACiB,WAAF,CAAcK,CAAd,KAAoBA,CAAC,KAAK,IAA1B,GAAiC,EAAjC,GAAsCA,CAAC,GAAG,EAAjD;AACH,OA9BE;AA+BHC,MAAAA,IAAI,EAAExB,CAAC,CAACyB,KA/BL;AAgCHC,MAAAA,IAAI,EAAE,UAASC,UAAT,EAAqBC,EAArB,EAAyB;AAC3B5B,QAAAA,CAAC,CAAC0B,IAAF,CAAOC,UAAP,EAAmBE,WAAnB;;AACA,iBAASA,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AAC/B,iBAAOH,EAAE,CAACG,KAAD,EAAQD,KAAR,CAAT;AACH;AACJ,OArCE;AAsCHE,MAAAA,GAAG,EAAEhC,CAAC,CAACgC,GAtCJ;AAuCHC,MAAAA,MAAM,EAAEjC,CAAC,CAACkC,IAvCP;AAwCHC,MAAAA,KAAK,EAAE,UAASvB,GAAT,EAAcT,IAAd,EAAoB;AACvB,YAAIiC,MAAM,GAAG,IAAb;;AACA,YAAI,CAACxB,GAAL,EAAU;AACN,iBAAOwB,MAAP;AACH;;AACDpC,QAAAA,CAAC,CAAC0B,IAAF,CAAOd,GAAP,EAAY,UAASyB,GAAT,EAAcC,GAAd,EAAmB;AAC3B,cAAI,EAAEF,MAAM,GAAGjC,IAAI,CAACoC,IAAL,CAAU,IAAV,EAAgBD,GAAhB,EAAqBD,GAArB,EAA0BzB,GAA1B,CAAX,CAAJ,EAAgD;AAC5C,mBAAO,KAAP;AACH;AACJ,SAJD;AAKA,eAAO,CAAC,CAACwB,MAAT;AACH,OAnDE;AAoDHI,MAAAA,IAAI,EAAE,UAAS5B,GAAT,EAAcT,IAAd,EAAoB;AACtB,YAAIiC,MAAM,GAAG,KAAb;;AACA,YAAI,CAACxB,GAAL,EAAU;AACN,iBAAOwB,MAAP;AACH;;AACDpC,QAAAA,CAAC,CAAC0B,IAAF,CAAOd,GAAP,EAAY,UAASyB,GAAT,EAAcC,GAAd,EAAmB;AAC3B,cAAIF,MAAM,GAAGjC,IAAI,CAACoC,IAAL,CAAU,IAAV,EAAgBD,GAAhB,EAAqBD,GAArB,EAA0BzB,GAA1B,CAAb,EAA6C;AACzC,mBAAO,KAAP;AACH;AACJ,SAJD;AAKA,eAAO,CAAC,CAACwB,MAAT;AACH,OA/DE;AAgEHK,MAAAA,KAAK,EAAEzC,CAAC,CAAC0C,MAhEN;AAiEHC,MAAAA,QAAQ,EAAE,UAASC,CAAT,EAAY;AAClB,eAAOA,CAAP;AACH,OAnEE;AAoEHC,MAAAA,KAAK,EAAE,UAASjC,GAAT,EAAc;AACjB,eAAOZ,CAAC,CAAC0C,MAAF,CAAS,IAAT,EAAe,EAAf,EAAmB9B,GAAnB,CAAP;AACH,OAtEE;AAuEHkC,MAAAA,cAAc,EAAE,YAAW;AACvB,YAAIC,OAAO,GAAG,CAAd;AACA,eAAO,YAAW;AACd,iBAAOA,OAAO,EAAd;AACH,SAFD;AAGH,OA5EE;AA6EHC,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBpC,GAApB,EAAyB;AACjC,eAAOZ,CAAC,CAACe,UAAF,CAAaH,GAAb,IAAoBA,GAApB,GAA0BqC,QAAjC;;AACA,iBAASA,QAAT,GAAoB;AAChB,iBAAOC,MAAM,CAACtC,GAAD,CAAb;AACH;AACJ,OAlFE;AAmFHuC,MAAAA,KAAK,EAAE,UAASC,EAAT,EAAa;AAChBC,QAAAA,UAAU,CAACD,EAAD,EAAK,CAAL,CAAV;AACH,OArFE;AAsFHE,MAAAA,QAAQ,EAAE,UAASC,IAAT,EAAeC,IAAf,EAAqBC,SAArB,EAAgC;AACtC,YAAIC,OAAJ,EAAatB,MAAb;AACA,eAAO,YAAW;AACd,cAAIuB,OAAO,GAAG,IAAd;AAAA,cAAoBC,IAAI,GAAGC,SAA3B;AAAA,cAAsCC,KAAtC;AAAA,cAA6CC,OAA7C;;AACAD,UAAAA,KAAK,GAAG,YAAW;AACfJ,YAAAA,OAAO,GAAG,IAAV;;AACA,gBAAI,CAACD,SAAL,EAAgB;AACZrB,cAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH;AACJ,WALD;;AAMAG,UAAAA,OAAO,GAAGN,SAAS,IAAI,CAACC,OAAxB;AACAO,UAAAA,YAAY,CAACP,OAAD,CAAZ;AACAA,UAAAA,OAAO,GAAGL,UAAU,CAACS,KAAD,EAAQN,IAAR,CAApB;;AACA,cAAIO,OAAJ,EAAa;AACT3B,YAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH;;AACD,iBAAOxB,MAAP;AACH,SAfD;AAgBH,OAxGE;AAyGH8B,MAAAA,QAAQ,EAAE,UAASX,IAAT,EAAeC,IAAf,EAAqB;AAC3B,YAAIG,OAAJ,EAAaC,IAAb,EAAmBF,OAAnB,EAA4BtB,MAA5B,EAAoC+B,QAApC,EAA8CL,KAA9C;AACAK,QAAAA,QAAQ,GAAG,CAAX;;AACAL,QAAAA,KAAK,GAAG,YAAW;AACfK,UAAAA,QAAQ,GAAG,IAAIC,IAAJ,EAAX;AACAV,UAAAA,OAAO,GAAG,IAAV;AACAtB,UAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH,SAJD;;AAKA,eAAO,YAAW;AACd,cAAIS,GAAG,GAAG,IAAID,IAAJ,EAAV;AAAA,cAAsBE,SAAS,GAAGd,IAAI,IAAIa,GAAG,GAAGF,QAAV,CAAtC;AACAR,UAAAA,OAAO,GAAG,IAAV;AACAC,UAAAA,IAAI,GAAGC,SAAP;;AACA,cAAIS,SAAS,IAAI,CAAjB,EAAoB;AAChBL,YAAAA,YAAY,CAACP,OAAD,CAAZ;AACAA,YAAAA,OAAO,GAAG,IAAV;AACAS,YAAAA,QAAQ,GAAGE,GAAX;AACAjC,YAAAA,MAAM,GAAGmB,IAAI,CAACS,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAT;AACH,WALD,MAKO,IAAI,CAACF,OAAL,EAAc;AACjBA,YAAAA,OAAO,GAAGL,UAAU,CAACS,KAAD,EAAQQ,SAAR,CAApB;AACH;;AACD,iBAAOlC,MAAP;AACH,SAbD;AAcH,OA/HE;AAgIHmC,MAAAA,SAAS,EAAE,UAASjC,GAAT,EAAc;AACrB,eAAOrC,CAAC,CAACU,QAAF,CAAW2B,GAAX,IAAkBA,GAAlB,GAAwBkC,IAAI,CAACD,SAAL,CAAejC,GAAf,CAA/B;AACH,OAlIE;AAmIHmC,MAAAA,IAAI,EAAE,YAAW;AACb,iBAASC,GAAT,CAAanD,CAAb,EAAgB;AACZ,cAAIoD,CAAC,GAAG,CAACC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,IAA6B,WAA9B,EAA2CC,MAA3C,CAAkD,CAAlD,EAAqD,CAArD,CAAR;AACA,iBAAOxD,CAAC,GAAG,MAAMoD,CAAC,CAACI,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAN,GAAuB,GAAvB,GAA6BJ,CAAC,CAACI,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAhC,GAAiDJ,CAAzD;AACH;;AACD,eAAO,QAAQD,GAAG,EAAX,GAAgBA,GAAG,CAAC,IAAD,CAAnB,GAA4BA,GAAG,CAAC,IAAD,CAA/B,GAAwCA,GAAG,EAAlD;AACH,OAzIE;AA0IHM,MAAAA,IAAI,EAAE,YAAW,CAAE;AA1IhB,KAAP;AA4IH,GA9IO,EAAR;;AA+IA,MAAIuN,GAAG,GAAG,YAAW;AACjB;;AACA,QAAIC,iBAAiB,GAAG;AACpB9B,MAAAA,OAAO,EAAE,mBADW;AAEpB+B,MAAAA,KAAK,EAAE,UAFa;AAGpBC,MAAAA,IAAI,EAAE,SAHc;AAIpBC,MAAAA,IAAI,EAAE,SAJc;AAKpBC,MAAAA,OAAO,EAAE,YALW;AAMpBC,MAAAA,UAAU,EAAE,eANQ;AAOpBC,MAAAA,UAAU,EAAE,eAPQ;AAQpBC,MAAAA,KAAK,EAAE,UARa;AASpBC,MAAAA,IAAI,EAAE,SATc;AAUpBC,MAAAA,MAAM,EAAE,WAVY;AAWpBC,MAAAA,SAAS,EAAE;AAXS,KAAxB;AAaA,WAAOC,KAAP;;AACA,aAASA,KAAT,CAAelN,CAAf,EAAkB;AACd,UAAImN,GAAJ,EAASC,OAAT;AACAA,MAAAA,OAAO,GAAGpT,CAAC,CAACwC,KAAF,CAAQ,EAAR,EAAY+P,iBAAZ,EAA+BvM,CAA/B,CAAV;AACAmN,MAAAA,GAAG,GAAG;AACFE,QAAAA,GAAG,EAAEC,QAAQ,EADX;AAEFF,QAAAA,OAAO,EAAEA,OAFP;AAGFG,QAAAA,IAAI,EAAEC,SAAS,CAACJ,OAAD,CAHb;AAIFK,QAAAA,SAAS,EAAEC,cAAc,CAACN,OAAD;AAJvB,OAAN;AAMA,aAAO;AACHC,QAAAA,GAAG,EAAEF,GAAG,CAACE,GADN;AAEHE,QAAAA,IAAI,EAAEJ,GAAG,CAACI,IAFP;AAGHH,QAAAA,OAAO,EAAED,GAAG,CAACC,OAHV;AAIHK,QAAAA,SAAS,EAAEN,GAAG,CAACM,SAJZ;AAKHjR,QAAAA,KAAK,EAAE,UAASwD,CAAT,EAAY;AACfhG,UAAAA,CAAC,CAACwC,KAAF,CAAQwD,CAAR,EAAWmN,GAAX;AACH;AAPE,OAAP;AASH;;AACD,aAASK,SAAT,CAAmBG,CAAnB,EAAsB;AAClB,aAAO;AACHlD,QAAAA,OAAO,EAAE,kBAAkBkD,CAAC,CAAClD,OAApB,GAA8B,WADpC;AAEHiC,QAAAA,IAAI,EAAE,gCAAgCiB,CAAC,CAACjB,IAAlC,GAAyC;AAF5C,OAAP;AAIH;;AACD,aAASgB,cAAT,CAAwBN,OAAxB,EAAiC;AAC7B,UAAIK,SAAS,GAAG,EAAhB;;AACAzT,MAAAA,CAAC,CAACyB,IAAF,CAAO2R,OAAP,EAAgB,UAASQ,CAAT,EAAY3N,CAAZ,EAAe;AAC3BwN,QAAAA,SAAS,CAACxN,CAAD,CAAT,GAAe,MAAM2N,CAArB;AACH,OAFD;;AAGA,aAAOH,SAAP;AACH;;AACD,aAASH,QAAT,GAAoB;AAChB,UAAID,GAAG,GAAG;AACN5C,QAAAA,OAAO,EAAE;AACLoD,UAAAA,QAAQ,EAAE,UADL;AAELC,UAAAA,OAAO,EAAE;AAFJ,SADH;AAKNrB,QAAAA,IAAI,EAAE;AACFoB,UAAAA,QAAQ,EAAE,UADR;AAEFE,UAAAA,GAAG,EAAE,GAFH;AAGFC,UAAAA,IAAI,EAAE,GAHJ;AAIFC,UAAAA,WAAW,EAAE,aAJX;AAKFC,UAAAA,SAAS,EAAE,MALT;AAMFC,UAAAA,OAAO,EAAE;AANP,SALA;AAaN3B,QAAAA,KAAK,EAAE;AACHqB,UAAAA,QAAQ,EAAE,UADP;AAEHO,UAAAA,aAAa,EAAE,KAFZ;AAGHC,UAAAA,eAAe,EAAE;AAHd,SAbD;AAkBNC,QAAAA,eAAe,EAAE;AACbT,UAAAA,QAAQ,EAAE,UADG;AAEbO,UAAAA,aAAa,EAAE;AAFF,SAlBX;AAsBN1B,QAAAA,IAAI,EAAE;AACFmB,UAAAA,QAAQ,EAAE,UADR;AAEFE,UAAAA,GAAG,EAAE,MAFH;AAGFC,UAAAA,IAAI,EAAE,GAHJ;AAIFO,UAAAA,MAAM,EAAE,KAJN;AAKFT,UAAAA,OAAO,EAAE;AALP,SAtBA;AA6BNU,QAAAA,GAAG,EAAE;AACDR,UAAAA,IAAI,EAAE,GADL;AAEDS,UAAAA,KAAK,EAAE;AAFN,SA7BC;AAiCNC,QAAAA,GAAG,EAAE;AACDV,UAAAA,IAAI,EAAE,MADL;AAEDS,UAAAA,KAAK,EAAE;AAFN;AAjCC,OAAV;;AAsCA,UAAIzU,CAAC,CAACC,MAAF,EAAJ,EAAgB;AACZD,QAAAA,CAAC,CAACwC,KAAF,CAAQ6Q,GAAG,CAACb,KAAZ,EAAmB;AACfmC,UAAAA,eAAe,EAAE;AADF,SAAnB;AAGH;;AACD,aAAOtB,GAAP;AACH;AACJ,GA9FS,EAAV;;AA+FA,MAAIuB,QAAQ,GAAG,YAAW;AACtB;;AACA,QAAI9M,SAAJ,EAAe+M,cAAf;AACA/M,IAAAA,SAAS,GAAG,YAAZ;AACA+M,IAAAA,cAAc,GAAG;AACbC,MAAAA,MAAM,EAAE,UADK;AAEbC,MAAAA,YAAY,EAAE,eAFD;AAGbC,MAAAA,MAAM,EAAE,UAHK;AAIbC,MAAAA,YAAY,EAAE;AAJD,KAAjB;;AAMA,aAASL,QAAT,CAAkB5O,CAAlB,EAAqB;AACjB,UAAI,CAACA,CAAD,IAAM,CAACA,CAAC,CAACkP,EAAb,EAAiB;AACbnV,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,iCAAR;AACH;;AACD,WAAKyJ,GAAL,GAAWpV,CAAC,CAACiG,CAAC,CAACkP,EAAH,CAAZ;AACH;;AACDlV,IAAAA,CAAC,CAACwC,KAAF,CAAQoS,QAAQ,CAACpO,SAAjB,EAA4B;AACxB4O,MAAAA,QAAQ,EAAE,UAAS1K,IAAT,EAAe/G,IAAf,EAAqB;AAC3B,YAAI0R,EAAE,GAAGtV,CAAC,CAACuV,KAAF,CAAQxN,SAAS,GAAG4C,IAApB,CAAT;AACA,aAAKyK,GAAL,CAASI,OAAT,CAAiBjT,IAAjB,CAAsB,KAAK6S,GAA3B,EAAgCE,EAAhC,EAAoC1R,IAAI,IAAI,EAA5C;AACA,eAAO0R,EAAP;AACH,OALuB;AAMxBG,MAAAA,MAAM,EAAE,UAAS9K,IAAT,EAAe;AACnB,YAAI/G,IAAJ,EAAU0R,EAAV;AACA1R,QAAAA,IAAI,GAAG,GAAGmC,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAP;AACAyR,QAAAA,EAAE,GAAG,KAAKD,QAAL,CAAc,WAAW1K,IAAzB,EAA+B/G,IAA/B,CAAL;AACA,eAAO0R,EAAE,CAACI,kBAAH,EAAP;AACH,OAXuB;AAYxBF,MAAAA,OAAO,EAAE,UAAS7K,IAAT,EAAe;AACpB,YAAIgL,cAAJ;;AACA,aAAKN,QAAL,CAAc1K,IAAd,EAAoB,GAAG5E,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAApB;;AACA,YAAI8R,cAAc,GAAGb,cAAc,CAACnK,IAAD,CAAnC,EAA2C;AACvC,eAAK0K,QAAL,CAAcM,cAAd,EAA8B,GAAG5P,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAA9B;AACH;AACJ;AAlBuB,KAA5B;;AAoBA,WAAOgR,QAAP;AACH,GArCc,EAAf;;AAsCA,MAAIe,YAAY,GAAG,YAAW;AAC1B;;AACA,QAAIC,QAAQ,GAAG,KAAf;AAAA,QAAsBC,QAAQ,GAAGC,WAAW,EAA5C;AACA,WAAO;AACHC,MAAAA,MAAM,EAAEA,MADL;AAEHC,MAAAA,OAAO,EAAEA,OAFN;AAGHC,MAAAA,GAAG,EAAEA,GAHF;AAIHV,MAAAA,OAAO,EAAEA;AAJN,KAAP;;AAMA,aAASW,EAAT,CAAY1F,MAAZ,EAAoB2F,KAApB,EAA2BxU,EAA3B,EAA+B+B,OAA/B,EAAwC;AACpC,UAAIgH,IAAJ;;AACA,UAAI,CAAC/I,EAAL,EAAS;AACL,eAAO,IAAP;AACH;;AACDwU,MAAAA,KAAK,GAAGA,KAAK,CAAC7Q,KAAN,CAAYsQ,QAAZ,CAAR;AACAjU,MAAAA,EAAE,GAAG+B,OAAO,GAAG0S,WAAW,CAACzU,EAAD,EAAK+B,OAAL,CAAd,GAA8B/B,EAA1C;AACA,WAAK0U,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;;AACA,aAAO3L,IAAI,GAAGyL,KAAK,CAAC7J,KAAN,EAAd,EAA6B;AACzB,aAAK+J,UAAL,CAAgB3L,IAAhB,IAAwB,KAAK2L,UAAL,CAAgB3L,IAAhB,KAAyB;AAC7C4G,UAAAA,IAAI,EAAE,EADuC;AAE7CC,UAAAA,KAAK,EAAE;AAFsC,SAAjD;;AAIA,aAAK8E,UAAL,CAAgB3L,IAAhB,EAAsB8F,MAAtB,EAA8B9K,IAA9B,CAAmC/D,EAAnC;AACH;;AACD,aAAO,IAAP;AACH;;AACD,aAASqU,OAAT,CAAiBG,KAAjB,EAAwBxU,EAAxB,EAA4B+B,OAA5B,EAAqC;AACjC,aAAOwS,EAAE,CAAC5T,IAAH,CAAQ,IAAR,EAAc,OAAd,EAAuB6T,KAAvB,EAA8BxU,EAA9B,EAAkC+B,OAAlC,CAAP;AACH;;AACD,aAASqS,MAAT,CAAgBI,KAAhB,EAAuBxU,EAAvB,EAA2B+B,OAA3B,EAAoC;AAChC,aAAOwS,EAAE,CAAC5T,IAAH,CAAQ,IAAR,EAAc,MAAd,EAAsB6T,KAAtB,EAA6BxU,EAA7B,EAAiC+B,OAAjC,CAAP;AACH;;AACD,aAASuS,GAAT,CAAaE,KAAb,EAAoB;AAChB,UAAIzL,IAAJ;;AACA,UAAI,CAAC,KAAK2L,UAAV,EAAsB;AAClB,eAAO,IAAP;AACH;;AACDF,MAAAA,KAAK,GAAGA,KAAK,CAAC7Q,KAAN,CAAYsQ,QAAZ,CAAR;;AACA,aAAOlL,IAAI,GAAGyL,KAAK,CAAC7J,KAAN,EAAd,EAA6B;AACzB,eAAO,KAAK+J,UAAL,CAAgB3L,IAAhB,CAAP;AACH;;AACD,aAAO,IAAP;AACH;;AACD,aAAS6K,OAAT,CAAiBY,KAAjB,EAAwB;AACpB,UAAIzL,IAAJ,EAAU4L,SAAV,EAAqB3S,IAArB,EAA2B4S,SAA3B,EAAsCC,UAAtC;;AACA,UAAI,CAAC,KAAKH,UAAV,EAAsB;AAClB,eAAO,IAAP;AACH;;AACDF,MAAAA,KAAK,GAAGA,KAAK,CAAC7Q,KAAN,CAAYsQ,QAAZ,CAAR;AACAjS,MAAAA,IAAI,GAAG,GAAGmC,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAP;;AACA,aAAO,CAAC8G,IAAI,GAAGyL,KAAK,CAAC7J,KAAN,EAAR,MAA2BgK,SAAS,GAAG,KAAKD,UAAL,CAAgB3L,IAAhB,CAAvC,CAAP,EAAsE;AAClE6L,QAAAA,SAAS,GAAGE,QAAQ,CAACH,SAAS,CAAChF,IAAX,EAAiB,IAAjB,EAAuB,CAAE5G,IAAF,EAASxE,MAAT,CAAgBvC,IAAhB,CAAvB,CAApB;AACA6S,QAAAA,UAAU,GAAGC,QAAQ,CAACH,SAAS,CAAC/E,KAAX,EAAkB,IAAlB,EAAwB,CAAE7G,IAAF,EAASxE,MAAT,CAAgBvC,IAAhB,CAAxB,CAArB;AACA4S,QAAAA,SAAS,MAAMV,QAAQ,CAACW,UAAD,CAAvB;AACH;;AACD,aAAO,IAAP;AACH;;AACD,aAASC,QAAT,CAAkBH,SAAlB,EAA6B5S,OAA7B,EAAsCC,IAAtC,EAA4C;AACxC,aAAO+S,KAAP;;AACA,eAASA,KAAT,GAAiB;AACb,YAAI9M,SAAJ;;AACA,aAAK,IAAIX,CAAC,GAAG,CAAR,EAAWK,GAAG,GAAGgN,SAAS,CAACnN,MAAhC,EAAwC,CAACS,SAAD,IAAcX,CAAC,GAAGK,GAA1D,EAA+DL,CAAC,IAAI,CAApE,EAAuE;AACnEW,UAAAA,SAAS,GAAG0M,SAAS,CAACrN,CAAD,CAAT,CAAalF,KAAb,CAAmBL,OAAnB,EAA4BC,IAA5B,MAAsC,KAAlD;AACH;;AACD,eAAO,CAACiG,SAAR;AACH;AACJ;;AACD,aAASkM,WAAT,GAAuB;AACnB,UAAIa,UAAJ;;AACA,UAAIlP,MAAM,CAACmP,YAAX,EAAyB;AACrBD,QAAAA,UAAU,GAAG,SAASE,oBAAT,CAA8B1T,EAA9B,EAAkC;AAC3CyT,UAAAA,YAAY,CAAC,YAAW;AACpBzT,YAAAA,EAAE;AACL,WAFW,CAAZ;AAGH,SAJD;AAKH,OAND,MAMO;AACHwT,QAAAA,UAAU,GAAG,SAASG,kBAAT,CAA4B3T,EAA5B,EAAgC;AACzCC,UAAAA,UAAU,CAAC,YAAW;AAClBD,YAAAA,EAAE;AACL,WAFS,EAEP,CAFO,CAAV;AAGH,SAJD;AAKH;;AACD,aAAOwT,UAAP;AACH;;AACD,aAASP,WAAT,CAAqBjT,EAArB,EAAyBO,OAAzB,EAAkC;AAC9B,aAAOP,EAAE,CAAC5B,IAAH,GAAU4B,EAAE,CAAC5B,IAAH,CAAQmC,OAAR,CAAV,GAA6B,YAAW;AAC3CP,QAAAA,EAAE,CAACY,KAAH,CAASL,OAAT,EAAkB,GAAGoC,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAlB;AACH,OAFD;AAGH;AACJ,GAzFkB,EAAnB;;AA0FA,MAAIqP,SAAS,GAAG,UAAS8D,GAAT,EAAc;AAC1B;;AACA,QAAI5H,QAAQ,GAAG;AACXvI,MAAAA,IAAI,EAAE,IADK;AAEXoQ,MAAAA,OAAO,EAAE,IAFE;AAGXC,MAAAA,OAAO,EAAE,QAHE;AAIXC,MAAAA,SAAS,EAAE,IAJA;AAKXC,MAAAA,SAAS,EAAE,KALA;AAMXC,MAAAA,aAAa,EAAE,KANJ;AAOXC,MAAAA,oBAAoB,EAAE;AAPX,KAAf;AASA,QAAIC,QAAQ,GAAG;AACXC,MAAAA,CAAC,EAAE,uDADQ;AAEXC,MAAAA,CAAC,EAAE,yBAFQ;AAGXC,MAAAA,CAAC,EAAE,kCAHQ;AAIXC,MAAAA,CAAC,EAAE,uCAJQ;AAKXC,MAAAA,CAAC,EAAE,yCALQ;AAMXC,MAAAA,CAAC,EAAE,wBANQ;AAOXC,MAAAA,CAAC,EAAE,mCAPQ;AAQXC,MAAAA,CAAC,EAAE,gCARQ;AASXC,MAAAA,CAAC,EAAE,4DATQ;AAUXC,MAAAA,CAAC,EAAE,sBAVQ;AAWXC,MAAAA,CAAC,EAAE,sCAXQ;AAYXC,MAAAA,CAAC,EAAE,wCAZQ;AAaXC,MAAAA,CAAC,EAAE,iDAbQ;AAcXC,MAAAA,CAAC,EAAE,oCAdQ;AAeXC,MAAAA,CAAC,EAAE,6CAfQ;AAgBXC,MAAAA,CAAC,EAAE,gCAhBQ;AAiBXC,MAAAA,CAAC,EAAE,aAjBQ;AAkBXC,MAAAA,CAAC,EAAE,oCAlBQ;AAmBXC,MAAAA,CAAC,EAAE,gCAnBQ;AAoBXC,MAAAA,CAAC,EAAE,8BApBQ;AAqBXC,MAAAA,CAAC,EAAE,uCArBQ;AAsBXC,MAAAA,CAAC,EAAE,8BAtBQ;AAuBXC,MAAAA,CAAC,EAAE,uBAvBQ;AAwBXC,MAAAA,CAAC,EAAE,wBAxBQ;AAyBXC,MAAAA,CAAC,EAAE,2BAzBQ;AA0BXC,MAAAA,CAAC,EAAE;AA1BQ,KAAf;AA4BA,WAAO,SAASC,UAAT,CAAoBjT,CAApB,EAAuB;AAC1B,UAAIkT,KAAJ;AACAlT,MAAAA,CAAC,GAAGhG,CAAC,CAACwC,KAAF,CAAQ,EAAR,EAAY2M,QAAZ,EAAsBnJ,CAAtB,CAAJ;;AACA,UAAI,CAACA,CAAC,CAACY,IAAH,IAAW,CAACZ,CAAC,CAACgR,OAAlB,EAA2B;AACvB;AACH;;AACDhR,MAAAA,CAAC,CAACgR,OAAF,GAAYhX,CAAC,CAACa,OAAF,CAAUmF,CAAC,CAACgR,OAAZ,IAAuBhR,CAAC,CAACgR,OAAzB,GAAmC,CAAEhR,CAAC,CAACgR,OAAJ,CAA/C;AACAkC,MAAAA,KAAK,GAAGC,QAAQ,CAACnT,CAAC,CAACgR,OAAH,EAAYhR,CAAC,CAACoR,aAAd,EAA6BpR,CAAC,CAACmR,SAA/B,EAA0CnR,CAAC,CAACqR,oBAA5C,CAAhB;AACA+B,MAAAA,QAAQ,CAACpT,CAAC,CAACY,IAAH,EAASyS,kBAAT,CAAR;;AACA,eAASA,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,YAAIjZ,KAAJ,EAAWkZ,WAAX,EAAwBC,WAAxB;;AACA,YAAInZ,KAAK,GAAG6Y,KAAK,CAACO,IAAN,CAAWH,QAAQ,CAAC1O,IAApB,CAAZ,EAAuC;AACnC4O,UAAAA,WAAW,GAAGzC,GAAG,CAAC2C,aAAJ,CAAkB1T,CAAC,CAACiR,OAApB,CAAd;AACAjR,UAAAA,CAAC,CAACkR,SAAF,KAAgBsC,WAAW,CAACtC,SAAZ,GAAwBlR,CAAC,CAACkR,SAA1C;AACAqC,UAAAA,WAAW,GAAGD,QAAQ,CAACK,SAAT,CAAmBtZ,KAAK,CAACwB,KAAzB,CAAd;AACA0X,UAAAA,WAAW,CAACI,SAAZ,CAAsBtZ,KAAK,CAAC,CAAD,CAAL,CAAS8I,MAA/B;AACAqQ,UAAAA,WAAW,CAACI,WAAZ,CAAwBL,WAAW,CAACM,SAAZ,CAAsB,IAAtB,CAAxB;AACAP,UAAAA,QAAQ,CAACQ,UAAT,CAAoBC,YAApB,CAAiCP,WAAjC,EAA8CD,WAA9C;AACH;;AACD,eAAO,CAAC,CAAClZ,KAAT;AACH;;AACD,eAAS+Y,QAAT,CAAkBlE,EAAlB,EAAsBmE,kBAAtB,EAA0C;AACtC,YAAIW,SAAJ;AAAA,YAAeC,cAAc,GAAG,CAAhC;;AACA,aAAK,IAAIhR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiM,EAAE,CAACgF,UAAH,CAAc/Q,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC3C+Q,UAAAA,SAAS,GAAG9E,EAAE,CAACgF,UAAH,CAAcjR,CAAd,CAAZ;;AACA,cAAI+Q,SAAS,CAAC7Y,QAAV,KAAuB8Y,cAA3B,EAA2C;AACvChR,YAAAA,CAAC,IAAIoQ,kBAAkB,CAACW,SAAD,CAAlB,GAAgC,CAAhC,GAAoC,CAAzC;AACH,WAFD,MAEO;AACHZ,YAAAA,QAAQ,CAACY,SAAD,EAAYX,kBAAZ,CAAR;AACH;AACJ;AACJ;AACJ,KAhCD;;AAiCA,aAASc,eAAT,CAAyBC,GAAzB,EAA8B;AAC1B,aAAO9C,QAAQ,CAAC8C,GAAG,CAACC,WAAJ,EAAD,CAAR,IAA+BD,GAAtC;AACH;;AACD,aAASjB,QAAT,CAAkBmB,QAAlB,EAA4BlD,aAA5B,EAA2CD,SAA3C,EAAsDE,oBAAtD,EAA4E;AACxE,UAAIkD,eAAe,GAAG,EAAtB;AAAA,UAA0BC,QAA1B;;AACA,WAAK,IAAIvR,CAAC,GAAG,CAAR,EAAWK,GAAG,GAAGgR,QAAQ,CAACnR,MAA/B,EAAuCF,CAAC,GAAGK,GAA3C,EAAgDL,CAAC,EAAjD,EAAqD;AACjD,YAAIwR,WAAW,GAAGza,CAAC,CAACQ,gBAAF,CAAmB8Z,QAAQ,CAACrR,CAAD,CAA3B,CAAlB;;AACA,YAAIoO,oBAAJ,EAA0B;AACtBoD,UAAAA,WAAW,GAAGA,WAAW,CAACha,OAAZ,CAAoB,KAApB,EAA2B0Z,eAA3B,CAAd;AACH;;AACDI,QAAAA,eAAe,CAAC7U,IAAhB,CAAqB+U,WAArB;AACH;;AACDD,MAAAA,QAAQ,GAAGrD,SAAS,GAAG,SAASoD,eAAe,CAACtS,IAAhB,CAAqB,GAArB,CAAT,GAAqC,MAAxC,GAAiD,MAAMsS,eAAe,CAACtS,IAAhB,CAAqB,GAArB,CAAN,GAAkC,GAAvG;AACA,aAAOmP,aAAa,GAAG,IAAIhP,MAAJ,CAAWoS,QAAX,CAAH,GAA0B,IAAIpS,MAAJ,CAAWoS,QAAX,EAAqB,GAArB,CAA9C;AACH;AACJ,GAvFe,CAuFd/S,MAAM,CAACiT,QAvFO,CAAhB;;AAwFA,MAAIC,KAAK,GAAG,YAAW;AACnB;;AACA,QAAIC,iBAAJ;AACAA,IAAAA,iBAAiB,GAAG;AAChB,SAAG,KADa;AAEhB,UAAI,KAFY;AAGhB,UAAI,MAHY;AAIhB,UAAI,OAJY;AAKhB,UAAI,OALY;AAMhB,UAAI,IANY;AAOhB,UAAI;AAPY,KAApB;;AASA,aAASD,KAAT,CAAe3U,CAAf,EAAkBmN,GAAlB,EAAuB;AACnB,UAAIlH,EAAJ;AACAjG,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;;AACA,UAAI,CAACA,CAAC,CAACwM,KAAP,EAAc;AACVzS,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,kBAAR;AACH;;AACDyH,MAAAA,GAAG,CAAC3Q,KAAJ,CAAU,IAAV;AACA,WAAKqY,KAAL,GAAa9a,CAAC,CAACiG,CAAC,CAACyM,IAAH,CAAd;AACA,WAAKqI,MAAL,GAAc/a,CAAC,CAACiG,CAAC,CAACwM,KAAH,CAAf;AACA,WAAKuI,KAAL,GAAahb,CAAC,CAACiG,CAAC,CAAC0M,IAAH,CAAd;AACAzG,MAAAA,EAAE,GAAG,KAAK6O,MAAL,CAAYE,IAAZ,CAAiB,IAAjB,KAA0Bhb,CAAC,CAACwE,IAAF,EAA/B;AACA,WAAKuW,KAAL,CAAWC,IAAX,CAAgB,IAAhB,EAAsB/O,EAAE,GAAG,UAA3B;AACA,WAAK4O,KAAL,CAAWG,IAAX,CAAgB;AACZ,uBAAe;AADH,OAAhB;AAGA,WAAKF,MAAL,CAAYE,IAAZ,CAAiB;AACb,qBAAa/O,EAAE,GAAG,UADL;AAEbgP,QAAAA,IAAI,EAAE,UAFO;AAGb,6BAAqB,MAHR;AAIb,yBAAiB;AAJJ,OAAjB;AAMA,WAAKvO,KAAL,GAAa,KAAKoO,MAAL,CAAYzY,GAAZ,EAAb;AACA,WAAK6Y,gBAAL,GAAwB,KAAKC,QAAL,KAAkB,KAAKzO,KAAvB,GAA+B,IAAvD;AACA,WAAK0O,eAAL,GAAuBC,mBAAmB,CAAC,KAAKP,MAAN,CAA1C;;AACA,WAAKQ,uBAAL;;AACA,UAAI,KAAKT,KAAL,CAAW1R,MAAX,KAAsB,CAA1B,EAA6B;AACzB,aAAKoS,OAAL,GAAe,KAAKC,OAAL,GAAe,KAAKC,SAAL,GAAiB,KAAKC,kBAAL,GAA0B1b,CAAC,CAAC+E,IAA3E;AACH;;AACD,WAAKgR,MAAL,CAAY,cAAZ,EAA4B,KAAK4F,iBAAjC;AACH;;AACDhB,IAAAA,KAAK,CAACiB,cAAN,GAAuB,UAASrb,GAAT,EAAc;AACjC,aAAOP,CAAC,CAACqB,KAAF,CAAQd,GAAR,EAAaE,OAAb,CAAqB,OAArB,EAA8B,EAA9B,EAAkCA,OAAlC,CAA0C,SAA1C,EAAqD,GAArD,CAAP;AACH,KAFD;;AAGAT,IAAAA,CAAC,CAACwC,KAAF,CAAQmY,KAAK,CAACnU,SAAd,EAAyBmP,YAAzB,EAAuC;AACnCkG,MAAAA,OAAO,EAAE,SAASC,MAAT,GAAkB;AACvB,aAAKC,eAAL;AACA,aAAKxG,OAAL,CAAa,SAAb;AACH,OAJkC;AAKnCyG,MAAAA,QAAQ,EAAE,SAASC,OAAT,GAAmB;AACzB,aAAKf,gBAAL,GAAwB,KAAKxO,KAA7B;AACA,aAAK6I,OAAL,CAAa,SAAb;AACH,OARkC;AASnC2G,MAAAA,UAAU,EAAE,SAASC,SAAT,CAAmB9G,EAAnB,EAAuB;AAC/B,YAAI+G,OAAO,GAAGxB,iBAAiB,CAACvF,EAAE,CAACgH,KAAH,IAAYhH,EAAE,CAACiH,OAAhB,CAA/B;;AACA,aAAKC,qBAAL,CAA2BH,OAA3B,EAAoC/G,EAApC;;AACA,YAAI+G,OAAO,IAAI,KAAKI,cAAL,CAAoBJ,OAApB,EAA6B/G,EAA7B,CAAf,EAAiD;AAC7C,eAAKE,OAAL,CAAa6G,OAAO,GAAG,OAAvB,EAAgC/G,EAAhC;AACH;AACJ,OAfkC;AAgBnCoH,MAAAA,QAAQ,EAAE,SAASC,OAAT,GAAmB;AACzB,aAAKC,SAAL,CAAe,KAAKC,aAAL,EAAf;;AACA,aAAKlB,kBAAL;;AACA,aAAKJ,uBAAL;AACH,OApBkC;AAqBnCiB,MAAAA,qBAAqB,EAAE,SAASM,oBAAT,CAA8BT,OAA9B,EAAuC/G,EAAvC,EAA2C;AAC9D,YAAIyH,cAAJ;;AACA,gBAAQV,OAAR;AACE,eAAK,IAAL;AACA,eAAK,MAAL;AACEU,YAAAA,cAAc,GAAG,CAACC,YAAY,CAAC1H,EAAD,CAA9B;AACA;;AAEF;AACEyH,YAAAA,cAAc,GAAG,KAAjB;AAPJ;;AASAA,QAAAA,cAAc,IAAIzH,EAAE,CAACyH,cAAH,EAAlB;AACH,OAjCkC;AAkCnCN,MAAAA,cAAc,EAAE,SAASQ,aAAT,CAAuBZ,OAAvB,EAAgC/G,EAAhC,EAAoC;AAChD,YAAIE,OAAJ;;AACA,gBAAQ6G,OAAR;AACE,eAAK,KAAL;AACE7G,YAAAA,OAAO,GAAG,CAACwH,YAAY,CAAC1H,EAAD,CAAvB;AACA;;AAEF;AACEE,YAAAA,OAAO,GAAG,IAAV;AANJ;;AAQA,eAAOA,OAAP;AACH,OA7CkC;AA8CnC+F,MAAAA,uBAAuB,EAAE,SAAS2B,sBAAT,GAAkC;AACvD,YAAIC,GAAG,GAAG,CAAC,KAAKpC,MAAL,CAAYzH,GAAZ,CAAgB,WAAhB,KAAgC,KAAjC,EAAwCpG,WAAxC,EAAV;;AACA,YAAI,KAAKiQ,GAAL,KAAaA,GAAjB,EAAsB;AAClB,eAAKA,GAAL,GAAWA,GAAX;AACA,eAAKrC,KAAL,CAAWG,IAAX,CAAgB,KAAhB,EAAuBkC,GAAvB;AACA,eAAK3H,OAAL,CAAa,gBAAb,EAA+B2H,GAA/B;AACH;AACJ,OArDkC;AAsDnCP,MAAAA,SAAS,EAAE,SAASQ,QAAT,CAAkB9a,GAAlB,EAAuB+a,MAAvB,EAA+B;AACtC,YAAIC,aAAJ,EAAmBC,sBAAnB;AACAD,QAAAA,aAAa,GAAGE,oBAAoB,CAAClb,GAAD,EAAM,KAAKqK,KAAX,CAApC;AACA4Q,QAAAA,sBAAsB,GAAGD,aAAa,GAAG,KAAK3Q,KAAL,CAAWvD,MAAX,KAAsB9G,GAAG,CAAC8G,MAA7B,GAAsC,KAA5E;AACA,aAAKuD,KAAL,GAAarK,GAAb;;AACA,YAAI,CAAC+a,MAAD,IAAW,CAACC,aAAhB,EAA+B;AAC3B,eAAK9H,OAAL,CAAa,cAAb,EAA6B,KAAK7I,KAAlC;AACH,SAFD,MAEO,IAAI,CAAC0Q,MAAD,IAAWE,sBAAf,EAAuC;AAC1C,eAAK/H,OAAL,CAAa,mBAAb,EAAkC,KAAK7I,KAAvC;AACH;AACJ,OAhEkC;AAiEnCiP,MAAAA,iBAAiB,EAAE,SAAS6B,gBAAT,CAA0BC,KAA1B,EAAiCxR,EAAjC,EAAqC;AACpD,aAAK6O,MAAL,CAAYE,IAAZ,CAAiB,uBAAjB,EAA0C/O,EAA1C;AACH,OAnEkC;AAoEnC1K,MAAAA,IAAI,EAAE,YAAW;AACb,YAAIsJ,IAAI,GAAG,IAAX;AAAA,YAAiBiR,MAAjB;AAAA,YAAyBG,OAAzB;AAAA,YAAkCE,SAAlC;AAAA,YAA6CO,OAA7C;AACAZ,QAAAA,MAAM,GAAG9b,CAAC,CAACuB,IAAF,CAAO,KAAKsa,OAAZ,EAAqB,IAArB,CAAT;AACAI,QAAAA,OAAO,GAAGjc,CAAC,CAACuB,IAAF,CAAO,KAAKya,QAAZ,EAAsB,IAAtB,CAAV;AACAG,QAAAA,SAAS,GAAGnc,CAAC,CAACuB,IAAF,CAAO,KAAK2a,UAAZ,EAAwB,IAAxB,CAAZ;AACAQ,QAAAA,OAAO,GAAG1c,CAAC,CAACuB,IAAF,CAAO,KAAKkb,QAAZ,EAAsB,IAAtB,CAAV;AACA,aAAK3B,MAAL,CAAY5E,EAAZ,CAAe,SAAf,EAA0B4F,MAA1B,EAAkC5F,EAAlC,CAAqC,UAArC,EAAiD+F,OAAjD,EAA0D/F,EAA1D,CAA6D,YAA7D,EAA2EiG,SAA3E;;AACA,YAAI,CAACnc,CAAC,CAACC,MAAF,EAAD,IAAeD,CAAC,CAACC,MAAF,KAAa,CAAhC,EAAmC;AAC/B,eAAK6a,MAAL,CAAY5E,EAAZ,CAAe,UAAf,EAA2BwG,OAA3B;AACH,SAFD,MAEO;AACH,eAAK5B,MAAL,CAAY5E,EAAZ,CAAe,wCAAf,EAAyD,UAASb,EAAT,EAAa;AAClE,gBAAIuF,iBAAiB,CAACvF,EAAE,CAACgH,KAAH,IAAYhH,EAAE,CAACiH,OAAhB,CAArB,EAA+C;AAC3C;AACH;;AACDtc,YAAAA,CAAC,CAACkD,KAAF,CAAQlD,CAAC,CAACuB,IAAF,CAAOsJ,IAAI,CAAC4R,QAAZ,EAAsB5R,IAAtB,EAA4BwK,EAA5B,CAAR;AACH,WALD;AAMH;;AACD,eAAO,IAAP;AACH,OAtFkC;AAuFnCqI,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAK5C,MAAL,CAAY4C,KAAZ;AACH,OAzFkC;AA0FnCC,MAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAClB,aAAK7C,MAAL,CAAY6C,IAAZ;AACH,OA5FkC;AA6FnCC,MAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAC9B,eAAO,KAAKV,GAAZ;AACH,OA/FkC;AAgGnCW,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1B,eAAO,KAAKnR,KAAL,IAAc,EAArB;AACH,OAlGkC;AAmGnCyQ,MAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkB9a,GAAlB,EAAuB+a,MAAvB,EAA+B;AACrC,aAAKU,aAAL,CAAmBzb,GAAnB;;AACA,aAAKsa,SAAL,CAAeta,GAAf,EAAoB+a,MAApB;AACH,OAtGkC;AAuGnCW,MAAAA,6BAA6B,EAAE,SAASA,6BAAT,GAAyC;AACpE,eAAO,KAAKrR,KAAL,KAAe,KAAKwO,gBAA3B;AACH,OAzGkC;AA0GnC0B,MAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACpC,eAAO,KAAK9B,MAAL,CAAYzY,GAAZ,EAAP;AACH,OA5GkC;AA6GnCyb,MAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBhc,KAAvB,EAA8B;AACzC,aAAKgZ,MAAL,CAAYzY,GAAZ,CAAgBP,KAAhB;AACA,aAAK4Z,kBAAL;;AACA,aAAKJ,uBAAL;AACH,OAjHkC;AAkHnCS,MAAAA,eAAe,EAAE,SAASA,eAAT,GAA2B;AACxC,aAAK+B,aAAL,CAAmB,KAAKpR,KAAxB;AACH,OApHkC;AAqHnC8O,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,eAAO,KAAKX,KAAL,CAAWxY,GAAX,EAAP;AACH,OAvHkC;AAwHnCkZ,MAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBzZ,KAAjB,EAAwB;AAC7B,aAAK+Y,KAAL,CAAWxY,GAAX,CAAeP,KAAf;AACH,OA1HkC;AA2HnC2Z,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,aAAKF,OAAL,CAAa,EAAb;AACH,OA7HkC;AA8HnCG,MAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAC9C,YAAIrZ,GAAJ,EAASoQ,IAAT,EAAeuL,iBAAf,EAAkCC,OAAlC;AACA5b,QAAAA,GAAG,GAAG,KAAKua,aAAL,EAAN;AACAnK,QAAAA,IAAI,GAAG,KAAK+I,OAAL,EAAP;AACAwC,QAAAA,iBAAiB,GAAG3b,GAAG,KAAKoQ,IAAR,IAAgBA,IAAI,CAACyL,OAAL,CAAa7b,GAAb,MAAsB,CAA1D;AACA4b,QAAAA,OAAO,GAAG5b,GAAG,KAAK,EAAR,IAAc2b,iBAAd,IAAmC,CAAC,KAAKG,WAAL,EAA9C;AACA,SAACF,OAAD,IAAY,KAAKxC,SAAL,EAAZ;AACH,OArIkC;AAsInCN,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1B,eAAO,KAAKL,MAAL,CAAYsD,EAAZ,CAAe,QAAf,CAAP;AACH,OAxIkC;AAyInCD,MAAAA,WAAW,EAAE,SAASA,WAAT,GAAuB;AAChC,YAAIE,UAAU,GAAG,KAAKvD,MAAL,CAAYwD,KAAZ,KAAsB,CAAvC;AACA,aAAKlD,eAAL,CAAqBmD,IAArB,CAA0B,KAAK3B,aAAL,EAA1B;AACA,eAAO,KAAKxB,eAAL,CAAqBkD,KAArB,MAAgCD,UAAvC;AACH,OA7IkC;AA8InCG,MAAAA,aAAa,EAAE,YAAW;AACtB,YAAIC,WAAJ,EAAiBC,cAAjB,EAAiCC,KAAjC;AACAF,QAAAA,WAAW,GAAG,KAAK3D,MAAL,CAAYzY,GAAZ,GAAkB8G,MAAhC;AACAuV,QAAAA,cAAc,GAAG,KAAK5D,MAAL,CAAY,CAAZ,EAAe4D,cAAhC;;AACA,YAAI1e,CAAC,CAACY,QAAF,CAAW8d,cAAX,CAAJ,EAAgC;AAC5B,iBAAOA,cAAc,KAAKD,WAA1B;AACH,SAFD,MAEO,IAAI/D,QAAQ,CAACkE,SAAb,EAAwB;AAC3BD,UAAAA,KAAK,GAAGjE,QAAQ,CAACkE,SAAT,CAAmBC,WAAnB,EAAR;AACAF,UAAAA,KAAK,CAACG,SAAN,CAAgB,WAAhB,EAA6B,CAACL,WAA9B;AACA,iBAAOA,WAAW,KAAKE,KAAK,CAACJ,IAAN,CAAWpV,MAAlC;AACH;;AACD,eAAO,IAAP;AACH,OA1JkC;AA2JnC4V,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,aAAKlE,KAAL,CAAW5E,GAAX,CAAe,KAAf;AACA,aAAK6E,MAAL,CAAY7E,GAAZ,CAAgB,KAAhB;AACA,aAAKmF,eAAL,CAAqBtU,MAArB;AACA,aAAK+T,KAAL,GAAa,KAAKC,MAAL,GAAc,KAAKM,eAAL,GAAuBrb,CAAC,CAAC,OAAD,CAAnD;AACH,OAhKkC;AAiKnCif,MAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBld,KAAzB,EAAgC;AAC7C,aAAKgZ,MAAL,CAAYE,IAAZ,CAAiB,eAAjB,EAAkClZ,KAAlC;AACH;AAnKkC,KAAvC;;AAqKA,WAAO6Y,KAAP;;AACA,aAASU,mBAAT,CAA6BP,MAA7B,EAAqC;AACjC,aAAO/a,CAAC,CAAC,gCAAD,CAAD,CAAoCsT,GAApC,CAAwC;AAC3CQ,QAAAA,QAAQ,EAAE,UADiC;AAE3CoL,QAAAA,UAAU,EAAE,QAF+B;AAG3CC,QAAAA,UAAU,EAAE,KAH+B;AAI3CC,QAAAA,UAAU,EAAErE,MAAM,CAACzH,GAAP,CAAW,aAAX,CAJ+B;AAK3C+L,QAAAA,QAAQ,EAAEtE,MAAM,CAACzH,GAAP,CAAW,WAAX,CALiC;AAM3CgM,QAAAA,SAAS,EAAEvE,MAAM,CAACzH,GAAP,CAAW,YAAX,CANgC;AAO3CiM,QAAAA,WAAW,EAAExE,MAAM,CAACzH,GAAP,CAAW,cAAX,CAP8B;AAQ3CkM,QAAAA,UAAU,EAAEzE,MAAM,CAACzH,GAAP,CAAW,aAAX,CAR+B;AAS3CmM,QAAAA,WAAW,EAAE1E,MAAM,CAACzH,GAAP,CAAW,cAAX,CAT8B;AAU3CoM,QAAAA,aAAa,EAAE3E,MAAM,CAACzH,GAAP,CAAW,gBAAX,CAV4B;AAW3CqM,QAAAA,UAAU,EAAE5E,MAAM,CAACzH,GAAP,CAAW,aAAX,CAX+B;AAY3CsM,QAAAA,aAAa,EAAE7E,MAAM,CAACzH,GAAP,CAAW,gBAAX,CAZ4B;AAa3CuM,QAAAA,aAAa,EAAE9E,MAAM,CAACzH,GAAP,CAAW,gBAAX;AAb4B,OAAxC,EAcJwM,WAdI,CAcQ/E,MAdR,CAAP;AAeH;;AACD,aAASyC,oBAAT,CAA8BuC,CAA9B,EAAiCC,CAAjC,EAAoC;AAChC,aAAOpF,KAAK,CAACiB,cAAN,CAAqBkE,CAArB,MAA4BnF,KAAK,CAACiB,cAAN,CAAqBmE,CAArB,CAAnC;AACH;;AACD,aAAShD,YAAT,CAAsB1H,EAAtB,EAA0B;AACtB,aAAOA,EAAE,CAAC2K,MAAH,IAAa3K,EAAE,CAAC4K,OAAhB,IAA2B5K,EAAE,CAAC6K,OAA9B,IAAyC7K,EAAE,CAAC8K,QAAnD;AACH;AACJ,GA1OW,EAAZ;;AA2OA,MAAIC,OAAO,GAAG,YAAW;AACrB;;AACA,QAAIva,IAAJ,EAAUwa,aAAV;AACAxa,IAAAA,IAAI,GAAG;AACH8M,MAAAA,OAAO,EAAE,uBADN;AAEHtQ,MAAAA,GAAG,EAAE,uBAFF;AAGH1B,MAAAA,GAAG,EAAE;AAHF,KAAP;AAKA0f,IAAAA,aAAa,GAAGrgB,CAAC,CAAC6C,cAAF,EAAhB;;AACA,aAASud,OAAT,CAAiBpa,CAAjB,EAAoBmN,GAApB,EAAyB;AACrBnN,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;AACAA,MAAAA,CAAC,CAACsa,SAAF,GAActa,CAAC,CAACsa,SAAF,IAAe,EAA7B;AACAta,MAAAA,CAAC,CAACsa,SAAF,CAAYC,QAAZ,GAAuBva,CAAC,CAACsa,SAAF,CAAYC,QAAZ,IAAwBva,CAAC,CAACsa,SAAF,CAAYxN,KAA3D;;AACA,UAAI,CAAC9M,CAAC,CAACwa,MAAP,EAAe;AACXzgB,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,gBAAR;AACH;;AACD,UAAI,CAAC1F,CAAC,CAACY,IAAP,EAAa;AACT7G,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,cAAR;AACH;;AACD,UAAI1F,CAAC,CAAC4C,IAAF,IAAU,CAAC6X,WAAW,CAACza,CAAC,CAAC4C,IAAH,CAA1B,EAAoC;AAChC7I,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,2BAA2B1F,CAAC,CAAC4C,IAArC;AACH;;AACDuK,MAAAA,GAAG,CAAC3Q,KAAJ,CAAU,IAAV;AACA,WAAKyQ,SAAL,GAAiB,CAAC,CAACjN,CAAC,CAACiN,SAArB;AACA,WAAKrK,IAAL,GAAY5I,CAAC,CAACqB,KAAF,CAAQ2E,CAAC,CAAC4C,IAAF,IAAUyX,aAAa,EAA/B,CAAZ;AACA,WAAKK,KAAL,GAAa1a,CAAC,CAAC0a,KAAF,IAAW,CAAxB;AACA,WAAKC,SAAL,GAAiBC,YAAY,CAAC5a,CAAC,CAAC8N,OAAF,IAAa9N,CAAC,CAAC6a,UAAhB,CAA7B;AACA,WAAKP,SAAL,GAAiBQ,YAAY,CAAC9a,CAAC,CAACsa,SAAH,EAAc,KAAKK,SAAnB,CAA7B;AACA,WAAKH,MAAL,GAAcxa,CAAC,CAACwa,MAAF,CAAStP,WAAT,GAAuBlL,CAAC,CAACwa,MAAF,CAAStP,WAAT,EAAvB,GAAgDlL,CAAC,CAACwa,MAAhE;AACA,WAAKjP,KAAL,GAAavR,CAAC,CAACiB,WAAF,CAAc+E,CAAC,CAACuL,KAAhB,IAAyB,KAAKiP,MAAL,CAAYrX,MAAZ,GAAqB,CAA9C,GAAkD,CAAC,CAACnD,CAAC,CAACuL,KAAnE;;AACA,WAAKwP,oBAAL;;AACA,WAAK5L,GAAL,GAAWpV,CAAC,CAACiG,CAAC,CAACY,IAAH,CAAD,CAAUoU,IAAV,CAAe,MAAf,EAAuB,cAAvB,EAAuCgG,QAAvC,CAAgD,KAAK5N,OAAL,CAAaT,OAA7D,EAAsEqO,QAAtE,CAA+E,KAAK5N,OAAL,CAAaT,OAAb,GAAuB,GAAvB,GAA6B,KAAK/J,IAAjH,CAAX;AACH;;AACDwX,IAAAA,OAAO,CAACa,WAAR,GAAsB,SAASA,WAAT,CAAqB/L,EAArB,EAAyB;AAC3C,UAAIC,GAAG,GAAGpV,CAAC,CAACmV,EAAD,CAAX;;AACA,UAAIC,GAAG,CAACvK,IAAJ,CAAS/E,IAAI,CAAClF,GAAd,CAAJ,EAAwB;AACpB,eAAO;AACHgS,UAAAA,OAAO,EAAEwC,GAAG,CAACvK,IAAJ,CAAS/E,IAAI,CAAC8M,OAAd,KAA0B,EADhC;AAEHtQ,UAAAA,GAAG,EAAE8S,GAAG,CAACvK,IAAJ,CAAS/E,IAAI,CAACxD,GAAd,KAAsB,EAFxB;AAGH1B,UAAAA,GAAG,EAAEwU,GAAG,CAACvK,IAAJ,CAAS/E,IAAI,CAAClF,GAAd,KAAsB;AAHxB,SAAP;AAKH;;AACD,aAAO,IAAP;AACH,KAVD;;AAWAX,IAAAA,CAAC,CAACwC,KAAF,CAAQ4d,OAAO,CAAC5Z,SAAhB,EAA2BmP,YAA3B,EAAyC;AACrCuL,MAAAA,UAAU,EAAE,SAASC,SAAT,CAAmBzU,KAAnB,EAA0B0U,WAA1B,EAAuC;AAC/CA,QAAAA,WAAW,GAAGA,WAAW,IAAI,EAA7B;;AACA,YAAIA,WAAW,CAACjY,MAAhB,EAAwB;AACpB,eAAKkY,kBAAL,CAAwB3U,KAAxB,EAA+B0U,WAA/B;AACH,SAFD,MAEO,IAAI,KAAK7P,KAAL,IAAc,KAAK+O,SAAL,CAAegB,OAAjC,EAA0C;AAC7C,eAAKC,cAAL,CAAoB7U,KAApB;AACH,SAFM,MAEA,IAAI,CAAC,KAAK6E,KAAN,IAAe,KAAK+O,SAAL,CAAeC,QAAlC,EAA4C;AAC/C,eAAKiB,eAAL,CAAqB9U,KAArB;AACH,SAFM,MAEA;AACH,eAAK+U,MAAL;AACH;;AACD,aAAKlM,OAAL,CAAa,UAAb,EAAyB6L,WAAzB,EAAsC,KAAtC,EAA6C,KAAKxY,IAAlD;AACH,OAboC;AAcrC8Y,MAAAA,OAAO,EAAE,SAASC,MAAT,CAAgBjV,KAAhB,EAAuB0U,WAAvB,EAAoC;AACzCA,QAAAA,WAAW,GAAGA,WAAW,IAAI,EAA7B;;AACA,YAAIA,WAAW,CAACjY,MAAZ,IAAsB,KAAKyY,eAAL,CAAqBzY,MAA/C,EAAuD;AACnD,eAAK0Y,kBAAL,CAAwBnV,KAAxB,EAA+B0U,WAA/B;AACH,SAFD,MAEO,IAAIA,WAAW,CAACjY,MAAhB,EAAwB;AAC3B,eAAKkY,kBAAL,CAAwB3U,KAAxB,EAA+B0U,WAA/B;AACH,SAFM,MAEA,IAAI,CAAC,KAAKQ,eAAL,CAAqBzY,MAAtB,IAAgC,KAAKmX,SAAL,CAAeC,QAAnD,EAA6D;AAChE,eAAKiB,eAAL,CAAqB9U,KAArB;AACH;;AACD,aAAK6I,OAAL,CAAa,UAAb,EAAyB6L,WAAzB,EAAsC,IAAtC,EAA4C,KAAKxY,IAAjD;AACH,OAxBoC;AAyBrCyY,MAAAA,kBAAkB,EAAE,SAASS,iBAAT,CAA2BpV,KAA3B,EAAkC0U,WAAlC,EAA+C;AAC/D,YAAIW,SAAJ;AACAA,QAAAA,SAAS,GAAG,KAAKC,uBAAL,CAA6BtV,KAA7B,EAAoC0U,WAApC,CAAZ;AACA,aAAKQ,eAAL,GAAuBG,SAAS,CAACE,QAAV,GAAqBC,IAArB,EAAvB;AACA,aAAK/M,GAAL,CAAS5B,IAAT,CAAcwO,SAAd,EAAyBI,OAAzB,CAAiC,KAAKC,UAAL,CAAgB1V,KAAhB,EAAuB0U,WAAvB,CAAjC,EAAsEO,MAAtE,CAA6E,KAAKU,UAAL,CAAgB3V,KAAhB,EAAuB0U,WAAvB,CAA7E;AACH,OA9BoC;AA+BrCS,MAAAA,kBAAkB,EAAE,SAASS,iBAAT,CAA2B5V,KAA3B,EAAkC0U,WAAlC,EAA+C;AAC/D,YAAIW,SAAJ,EAAeH,eAAf;AACAG,QAAAA,SAAS,GAAG,KAAKC,uBAAL,CAA6BtV,KAA7B,EAAoC0U,WAApC,CAAZ;AACAQ,QAAAA,eAAe,GAAGG,SAAS,CAACE,QAAV,GAAqBC,IAArB,EAAlB;AACA,aAAKN,eAAL,CAAqBW,KAArB,CAA2BR,SAA3B;AACA,aAAKH,eAAL,GAAuBA,eAAvB;AACH,OArCoC;AAsCrCL,MAAAA,cAAc,EAAE,SAASiB,aAAT,CAAuB9V,KAAvB,EAA8B;AAC1C,YAAI1J,QAAQ,GAAG,KAAKsd,SAAL,CAAegB,OAA9B;;AACA,aAAKP,oBAAL;;AACA/d,QAAAA,QAAQ,IAAI,KAAKmS,GAAL,CAAS5B,IAAT,CAAcvQ,QAAQ,CAAC;AAC/B0J,UAAAA,KAAK,EAAEA,KADwB;AAE/BiG,UAAAA,OAAO,EAAE,KAAK/J;AAFiB,SAAD,CAAtB,CAAZ;AAIH,OA7CoC;AA8CrC4Y,MAAAA,eAAe,EAAE,SAASiB,cAAT,CAAwB/V,KAAxB,EAA+B;AAC5C,YAAI1J,QAAQ,GAAG,KAAKsd,SAAL,CAAeC,QAA9B;;AACA,aAAKQ,oBAAL;;AACA/d,QAAAA,QAAQ,IAAI,KAAKmS,GAAL,CAAS5B,IAAT,CAAcvQ,QAAQ,CAAC;AAC/B0J,UAAAA,KAAK,EAAEA,KADwB;AAE/BiG,UAAAA,OAAO,EAAE,KAAK/J;AAFiB,SAAD,CAAtB,CAAZ;AAIH,OArDoC;AAsDrC6Y,MAAAA,MAAM,EAAE,SAAS3O,KAAT,GAAiB;AACrB,aAAKqC,GAAL,CAASrC,KAAT;;AACA,aAAKiO,oBAAL;AACH,OAzDoC;AA0DrCiB,MAAAA,uBAAuB,EAAE,SAASU,sBAAT,CAAgChW,KAAhC,EAAuC0U,WAAvC,EAAoD;AACzE,YAAIvW,IAAI,GAAG,IAAX;AAAA,YAAiB8X,QAAjB;AACAA,QAAAA,QAAQ,GAAGjI,QAAQ,CAACkI,sBAAT,EAAX;;AACA5iB,QAAAA,CAAC,CAACyB,IAAF,CAAO2f,WAAP,EAAoB,SAASyB,iBAAT,CAA2BjQ,UAA3B,EAAuC;AACvD,cAAIuC,GAAJ,EAASzR,OAAT;AACAA,UAAAA,OAAO,GAAGmH,IAAI,CAACiY,YAAL,CAAkBpW,KAAlB,EAAyBkG,UAAzB,CAAV;AACAuC,UAAAA,GAAG,GAAGpV,CAAC,CAAC8K,IAAI,CAACyV,SAAL,CAAe1N,UAAf,CAA0BlP,OAA1B,CAAD,CAAD,CAAsCkH,IAAtC,CAA2C/E,IAAI,CAAC8M,OAAhD,EAAyD9H,IAAI,CAACjC,IAA9D,EAAoEgC,IAApE,CAAyE/E,IAAI,CAAClF,GAA9E,EAAmFiS,UAAnF,EAA+FhI,IAA/F,CAAoG/E,IAAI,CAACxD,GAAzG,EAA8GwI,IAAI,CAAC8V,SAAL,CAAe/N,UAAf,CAA9G,EAA0IoO,QAA1I,CAAmJnW,IAAI,CAACuI,OAAL,CAAaR,UAAb,GAA0B,GAA1B,GAAgC/H,IAAI,CAACuI,OAAL,CAAaP,UAAhM,CAAN;AACA8P,UAAAA,QAAQ,CAAC/I,WAAT,CAAqBzE,GAAG,CAAC,CAAD,CAAxB;AACH,SALD;;AAMA,aAAKlC,SAAL,IAAkBA,SAAS,CAAC;AACxBiE,UAAAA,SAAS,EAAE,KAAK9D,OAAL,CAAaH,SADA;AAExBrM,UAAAA,IAAI,EAAE+b,QAFkB;AAGxB3L,UAAAA,OAAO,EAAEtK;AAHe,SAAD,CAA3B;AAKA,eAAO3M,CAAC,CAAC4iB,QAAD,CAAR;AACH,OAzEoC;AA0ErCN,MAAAA,UAAU,EAAE,SAASU,SAAT,CAAmBrW,KAAnB,EAA0B0U,WAA1B,EAAuC;AAC/C,eAAO,KAAKd,SAAL,CAAe0C,MAAf,GAAwB,KAAK1C,SAAL,CAAe0C,MAAf,CAAsB;AACjDtW,UAAAA,KAAK,EAAEA,KAD0C;AAEjD0U,UAAAA,WAAW,EAAEA,WAFoC;AAGjDzO,UAAAA,OAAO,EAAE,KAAK/J;AAHmC,SAAtB,CAAxB,GAIF,IAJL;AAKH,OAhFoC;AAiFrCwZ,MAAAA,UAAU,EAAE,SAASa,SAAT,CAAmBvW,KAAnB,EAA0B0U,WAA1B,EAAuC;AAC/C,eAAO,KAAKd,SAAL,CAAe4C,MAAf,GAAwB,KAAK5C,SAAL,CAAe4C,MAAf,CAAsB;AACjDxW,UAAAA,KAAK,EAAEA,KAD0C;AAEjD0U,UAAAA,WAAW,EAAEA,WAFoC;AAGjDzO,UAAAA,OAAO,EAAE,KAAK/J;AAHmC,SAAtB,CAAxB,GAIF,IAJL;AAKH,OAvFoC;AAwFrCmY,MAAAA,oBAAoB,EAAE,SAASoC,mBAAT,GAA+B;AACjD,aAAKvB,eAAL,GAAuB7hB,CAAC,EAAxB;AACH,OA1FoC;AA2FrC+iB,MAAAA,YAAY,EAAE,SAASM,WAAT,CAAqB1W,KAArB,EAA4B/L,GAA5B,EAAiC;AAC3C,eAAOX,CAAC,CAACe,QAAF,CAAWJ,GAAX,IAAkBX,CAAC,CAACwC,KAAF,CAAQ;AAC7B6gB,UAAAA,MAAM,EAAE3W;AADqB,SAAR,EAEtB/L,GAFsB,CAAlB,GAEGA,GAFV;AAGH,OA/FoC;AAgGrC2iB,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB5W,KAAhB,EAAuB;AAC3B,YAAI7B,IAAI,GAAG,IAAX;AAAA,YAAiB0Y,QAAQ,GAAG,KAA5B;AAAA,YAAmCC,UAAU,GAAG,KAAhD;AAAA,YAAuDC,QAAQ,GAAG,CAAlE;AACA,aAAKrY,MAAL;;AACA,aAAKA,MAAL,GAAc,SAASA,MAAT,GAAkB;AAC5BmY,UAAAA,QAAQ,GAAG,IAAX;AACA1Y,UAAAA,IAAI,CAACO,MAAL,GAAcrL,CAAC,CAACgF,IAAhB;AACA8F,UAAAA,IAAI,CAAC0G,KAAL,IAAc1G,IAAI,CAAC0K,OAAL,CAAa,eAAb,EAA8B7I,KAA9B,EAAqC7B,IAAI,CAACjC,IAA1C,CAAd;AACH,SAJD;;AAKA,aAAK4X,MAAL,CAAY9T,KAAZ,EAAmB4E,IAAnB,EAAyBC,KAAzB;AACA,SAACiS,UAAD,IAAelS,IAAI,CAAC,EAAD,CAAnB;;AACA,iBAASA,IAAT,CAAc8P,WAAd,EAA2B;AACvB,cAAIoC,UAAJ,EAAgB;AACZ;AACH;;AACDA,UAAAA,UAAU,GAAG,IAAb;AACApC,UAAAA,WAAW,GAAG,CAACA,WAAW,IAAI,EAAhB,EAAoBtb,KAApB,CAA0B,CAA1B,EAA6B+E,IAAI,CAAC6V,KAAlC,CAAd;AACA+C,UAAAA,QAAQ,GAAGrC,WAAW,CAACjY,MAAvB;;AACA0B,UAAAA,IAAI,CAACqW,UAAL,CAAgBxU,KAAhB,EAAuB0U,WAAvB;;AACA,cAAIqC,QAAQ,GAAG5Y,IAAI,CAAC6V,KAAhB,IAAyB7V,IAAI,CAAC0G,KAAlC,EAAyC;AACrC1G,YAAAA,IAAI,CAAC0K,OAAL,CAAa,gBAAb,EAA+B7I,KAA/B,EAAsC7B,IAAI,CAACjC,IAA3C;AACH;AACJ;;AACD,iBAAS2I,KAAT,CAAe6P,WAAf,EAA4B;AACxBA,UAAAA,WAAW,GAAGA,WAAW,IAAI,EAA7B;;AACA,cAAI,CAACmC,QAAD,IAAaE,QAAQ,GAAG5Y,IAAI,CAAC6V,KAAjC,EAAwC;AACpC7V,YAAAA,IAAI,CAACO,MAAL,GAAcrL,CAAC,CAACgF,IAAhB;AACA,gBAAI2e,GAAG,GAAG/e,IAAI,CAACgf,GAAL,CAASF,QAAQ,GAAG5Y,IAAI,CAAC6V,KAAzB,CAAV;AACA+C,YAAAA,QAAQ,IAAIC,GAAZ;;AACA7Y,YAAAA,IAAI,CAAC6W,OAAL,CAAahV,KAAb,EAAoB0U,WAAW,CAACtb,KAAZ,CAAkB,CAAlB,EAAqB4d,GAArB,CAApB;;AACA7Y,YAAAA,IAAI,CAAC0G,KAAL,IAAc1G,IAAI,CAAC0K,OAAL,CAAa,eAAb,EAA8B7I,KAA9B,EAAqC7B,IAAI,CAACjC,IAA1C,CAAd;AACH;AACJ;AACJ,OAhIoC;AAiIrCwC,MAAAA,MAAM,EAAErL,CAAC,CAACgF,IAjI2B;AAkIrC0D,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKgZ,MAAL;;AACA,aAAKrW,MAAL;AACA,aAAKmK,OAAL,CAAa,SAAb;AACH,OAtIoC;AAuIrCqO,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,eAAO,KAAKzO,GAAL,CAASiJ,EAAT,CAAY,QAAZ,CAAP;AACH,OAzIoC;AA0IrCW,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,aAAK5J,GAAL,GAAWpV,CAAC,CAAC,OAAD,CAAZ;AACH;AA5IoC,KAAzC;;AA8IA,WAAOqgB,OAAP;;AACA,aAASQ,YAAT,CAAsB9M,OAAtB,EAA+B;AAC3BA,MAAAA,OAAO,GAAGA,OAAO,IAAI9T,CAAC,CAACsE,SAAvB;AACA,aAAOtE,CAAC,CAACc,UAAF,CAAagT,OAAb,IAAwBA,OAAxB,GAAkC6M,SAAzC;;AACA,eAASA,SAAT,CAAmBhgB,GAAnB,EAAwB;AACpB,eAAOA,GAAG,CAACmT,OAAD,CAAV;AACH;AACJ;;AACD,aAASgN,YAAT,CAAsBR,SAAtB,EAAiCK,SAAjC,EAA4C;AACxC,aAAO;AACHJ,QAAAA,QAAQ,EAAED,SAAS,CAACC,QAAV,IAAsBvgB,CAAC,CAAC+C,UAAF,CAAaud,SAAS,CAACC,QAAvB,CAD7B;AAEHe,QAAAA,OAAO,EAAEhB,SAAS,CAACgB,OAAV,IAAqBthB,CAAC,CAAC+C,UAAF,CAAaud,SAAS,CAACgB,OAAvB,CAF3B;AAGH4B,QAAAA,MAAM,EAAE5C,SAAS,CAAC4C,MAAV,IAAoBljB,CAAC,CAAC+C,UAAF,CAAaud,SAAS,CAAC4C,MAAvB,CAHzB;AAIHF,QAAAA,MAAM,EAAE1C,SAAS,CAAC0C,MAAV,IAAoBhjB,CAAC,CAAC+C,UAAF,CAAaud,SAAS,CAAC0C,MAAvB,CAJzB;AAKHpQ,QAAAA,UAAU,EAAE0N,SAAS,CAAC1N,UAAV,GAAuBiR,sBAAvB,GAAgDC;AALzD,OAAP;;AAOA,eAASD,sBAAT,CAAgCngB,OAAhC,EAAyC;AACrC,YAAIV,QAAQ,GAAGsd,SAAS,CAAC1N,UAAzB;AACA,eAAO7S,CAAC,CAACiD,QAAQ,CAACU,OAAD,CAAT,CAAD,CAAqBsX,IAArB,CAA0B,IAA1B,EAAgChb,CAAC,CAACwE,IAAF,EAAhC,CAAP;AACH;;AACD,eAASsf,kBAAT,CAA4BpgB,OAA5B,EAAqC;AACjC,eAAO3D,CAAC,CAAC,qBAAD,CAAD,CAAyBib,IAAzB,CAA8B,IAA9B,EAAoChb,CAAC,CAACwE,IAAF,EAApC,EAA8C+Z,IAA9C,CAAmDoC,SAAS,CAACjd,OAAD,CAA5D,CAAP;AACH;AACJ;;AACD,aAAS+c,WAAT,CAAqBlgB,GAArB,EAA0B;AACtB,aAAO,mBAAmBL,IAAnB,CAAwBK,GAAxB,CAAP;AACH;AACJ,GArNa,EAAd;;AAsNA,MAAIwjB,IAAI,GAAG,YAAW;AAClB;;AACA,aAASA,IAAT,CAAc/d,CAAd,EAAiBmN,GAAjB,EAAsB;AAClB,UAAItI,IAAI,GAAG,IAAX;AACA7E,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;;AACA,UAAI,CAACA,CAAC,CAACY,IAAP,EAAa;AACT7G,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,kBAAR;AACH;;AACDyH,MAAAA,GAAG,CAAC3Q,KAAJ,CAAU,IAAV;AACA,WAAKwhB,KAAL,GAAajkB,CAAC,CAACiG,CAAC,CAACY,IAAH,CAAd;AACA,WAAK8F,KAAL,GAAa,IAAb;AACA,WAAKuX,QAAL,GAAgBjkB,CAAC,CAAC+B,GAAF,CAAMiE,CAAC,CAACie,QAAR,EAAkBC,iBAAlB,CAAhB;;AACA,eAASA,iBAAT,CAA2BC,QAA3B,EAAqC;AACjC,YAAIvd,IAAI,GAAGiE,IAAI,CAACmZ,KAAL,CAAWI,IAAX,CAAgBD,QAAQ,CAACvd,IAAzB,EAA+Byd,KAA/B,EAAX;AACAF,QAAAA,QAAQ,CAACvd,IAAT,GAAgBA,IAAI,CAACuC,MAAL,GAAcvC,IAAd,GAAqB7G,CAAC,CAAC,OAAD,CAAD,CAAWukB,QAAX,CAAoBzZ,IAAI,CAACmZ,KAAzB,CAArC;AACA,eAAO,IAAI5D,OAAJ,CAAY+D,QAAZ,EAAsBhR,GAAtB,CAAP;AACH;AACJ;;AACDnT,IAAAA,CAAC,CAACwC,KAAF,CAAQuhB,IAAI,CAACvd,SAAb,EAAwBmP,YAAxB,EAAsC;AAClC4O,MAAAA,kBAAkB,EAAE,SAASC,iBAAT,CAA2BnP,EAA3B,EAA+B;AAC/C,aAAKE,OAAL,CAAa,mBAAb,EAAkCxV,CAAC,CAACsV,EAAE,CAACoP,aAAJ,CAAnC;AACH,OAHiC;AAIlCC,MAAAA,WAAW,EAAE,SAASC,UAAT,CAAoBja,IAApB,EAA0BiI,OAA1B,EAAmCyO,WAAnC,EAAgD7P,KAAhD,EAAuD;AAChE,aAAKyS,KAAL,CAAWY,WAAX,CAAuB,KAAKxR,OAAL,CAAaN,KAApC,EAA2C,KAAK+R,iBAAL,EAA3C;AACA,aAAKtP,OAAL,CAAa,iBAAb,EAAgC5C,OAAhC,EAAyCyO,WAAzC,EAAsD7P,KAAtD;AACH,OAPiC;AAQlCuT,MAAAA,UAAU,EAAE,SAASC,SAAT,GAAqB;AAC7B,aAAKf,KAAL,CAAWY,WAAX,CAAuB,KAAKxR,OAAL,CAAaN,KAApC,EAA2C,KAAK+R,iBAAL,EAA3C;AACA,aAAKtP,OAAL,CAAa,gBAAb;AACH,OAXiC;AAYlCyP,MAAAA,UAAU,EAAE,SAASC,SAAT,GAAqB;AAC7B,aAAK1P,OAAL,CAAaxR,KAAb,CAAmB,IAAnB,EAAyBH,SAAzB;AACH,OAdiC;AAelCihB,MAAAA,iBAAiB,EAAE,SAASK,gBAAT,GAA4B;AAC3C,eAAOllB,CAAC,CAACkC,KAAF,CAAQ,KAAK+hB,QAAb,EAAuBjkB,CAAC,CAACuB,IAAF,CAAO,SAAS4jB,cAAT,CAAwBxS,OAAxB,EAAiC;AAClE,cAAIiR,OAAO,GAAGjR,OAAO,CAACiR,OAAR,EAAd;AACA,eAAKI,KAAL,CAAWhJ,IAAX,CAAgB,eAAhB,EAAiC,CAAC4I,OAAlC;AACA,iBAAOA,OAAP;AACH,SAJ6B,EAI3B,IAJ2B,CAAvB,CAAP;AAKH,OArBiC;AAsBlCwB,MAAAA,eAAe,EAAE,SAASC,cAAT,GAA0B;AACvC,eAAO,KAAKrB,KAAL,CAAWI,IAAX,CAAgB,KAAK3Q,SAAL,CAAeZ,UAA/B,CAAP;AACH,OAxBiC;AAyBlCyS,MAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACpC,YAAIC,WAAW,GAAG,KAAKC,mBAAL,EAAlB;AACAD,QAAAA,WAAW,IAAIA,WAAW,CAACE,WAAZ,CAAwB,KAAKrS,OAAL,CAAaJ,MAArC,CAAf;AACH,OA5BiC;AA6BlC0S,MAAAA,cAAc,EAAE,SAASC,aAAT,CAAuBxQ,GAAvB,EAA4B;AACxC,YAAIyQ,KAAJ,EAAWC,QAAX,EAAqBC,aAArB,EAAoCC,UAApC;AACAH,QAAAA,KAAK,GAAGzQ,GAAG,CAACtB,QAAJ,GAAeE,GAAvB;AACA8R,QAAAA,QAAQ,GAAGD,KAAK,GAAGzQ,GAAG,CAAC6Q,WAAJ,CAAgB,IAAhB,CAAnB;AACAF,QAAAA,aAAa,GAAG,KAAK9B,KAAL,CAAWiC,SAAX,EAAhB;AACAF,QAAAA,UAAU,GAAG,KAAK/B,KAAL,CAAWkC,MAAX,KAAsBC,QAAQ,CAAC,KAAKnC,KAAL,CAAW3Q,GAAX,CAAe,YAAf,CAAD,EAA+B,EAA/B,CAA9B,GAAmE8S,QAAQ,CAAC,KAAKnC,KAAL,CAAW3Q,GAAX,CAAe,eAAf,CAAD,EAAkC,EAAlC,CAAxF;;AACA,YAAIuS,KAAK,GAAG,CAAZ,EAAe;AACX,eAAK5B,KAAL,CAAWiC,SAAX,CAAqBH,aAAa,GAAGF,KAArC;AACH,SAFD,MAEO,IAAIG,UAAU,GAAGF,QAAjB,EAA2B;AAC9B,eAAK7B,KAAL,CAAWiC,SAAX,CAAqBH,aAAa,IAAID,QAAQ,GAAGE,UAAf,CAAlC;AACH;AACJ,OAxCiC;AAyClCxkB,MAAAA,IAAI,EAAE,YAAW;AACb,YAAIsJ,IAAI,GAAG,IAAX;AAAA,YAAiB2Z,iBAAjB;AACAA,QAAAA,iBAAiB,GAAGxkB,CAAC,CAACuB,IAAF,CAAO,KAAKgjB,kBAAZ,EAAgC,IAAhC,CAApB;AACA,aAAKP,KAAL,CAAW9N,EAAX,CAAc,UAAd,EAA0B,KAAKzC,SAAL,CAAeZ,UAAzC,EAAqD2R,iBAArD;AACA,aAAKR,KAAL,CAAW9N,EAAX,CAAc,WAAd,EAA2B,KAAKzC,SAAL,CAAeZ,UAA1C,EAAsD,YAAW;AAC7DhI,UAAAA,IAAI,CAACub,SAAL,CAAermB,CAAC,CAAC,IAAD,CAAhB;AACH,SAFD;AAGA,aAAKikB,KAAL,CAAW9N,EAAX,CAAc,YAAd,EAA4B,YAAW;AACnCrL,UAAAA,IAAI,CAACya,aAAL;AACH,SAFD;;AAGAtlB,QAAAA,CAAC,CAACyB,IAAF,CAAO,KAAKwiB,QAAZ,EAAsB,UAAStR,OAAT,EAAkB;AACpCA,UAAAA,OAAO,CAACoD,MAAR,CAAe,gBAAf,EAAiClL,IAAI,CAACma,UAAtC,EAAkDna,IAAlD,EAAwDkL,MAAxD,CAA+D,eAA/D,EAAgFlL,IAAI,CAACma,UAArF,EAAiGna,IAAjG,EAAuGkL,MAAvG,CAA8G,eAA9G,EAA+HlL,IAAI,CAACma,UAApI,EAAgJna,IAAhJ,EAAsJkL,MAAtJ,CAA6J,UAA7J,EAAyKlL,IAAI,CAAC6Z,WAA9K,EAA2L7Z,IAA3L,EAAiMkL,MAAjM,CAAwM,SAAxM,EAAmNlL,IAAI,CAACia,UAAxN,EAAoOja,IAApO;AACH,SAFD;;AAGA,eAAO,IAAP;AACH,OAvDiC;AAwDlCwb,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtB,eAAO,KAAKrC,KAAL,CAAWsC,QAAX,CAAoB,KAAKlT,OAAL,CAAaL,IAAjC,CAAP;AACH,OA1DiC;AA2DlCA,MAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAClB,aAAKiR,KAAL,CAAWiC,SAAX,CAAqB,CAArB;AACA,aAAKjC,KAAL,CAAWhD,QAAX,CAAoB,KAAK5N,OAAL,CAAaL,IAAjC;AACH,OA9DiC;AA+DlCwT,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKvC,KAAL,CAAWhJ,IAAX,CAAgB,eAAhB,EAAiC,KAAjC;AACA,aAAKgJ,KAAL,CAAWyB,WAAX,CAAuB,KAAKrS,OAAL,CAAaL,IAApC;;AACA,aAAKuS,aAAL;AACH,OAnEiC;AAoElCkB,MAAAA,oBAAoB,EAAE,SAASA,oBAAT,CAA8BtJ,GAA9B,EAAmC;AACrD,aAAK8G,KAAL,CAAWhJ,IAAX,CAAgB,KAAhB,EAAuBkC,GAAvB;AACH,OAtEiC;AAuElCuJ,MAAAA,0BAA0B,EAAE,SAASA,0BAAT,CAAoCC,KAApC,EAA2C;AACnE,YAAIC,YAAJ,EAAkBC,UAAlB,EAA8BC,QAA9B,EAAwCC,QAAxC;AACAF,QAAAA,UAAU,GAAG,KAAKpB,mBAAL,EAAb;AACAmB,QAAAA,YAAY,GAAG,KAAKvB,eAAL,EAAf;AACAyB,QAAAA,QAAQ,GAAGD,UAAU,GAAGD,YAAY,CAAC9kB,KAAb,CAAmB+kB,UAAnB,CAAH,GAAoC,CAAC,CAA1D;AACAE,QAAAA,QAAQ,GAAGD,QAAQ,GAAGH,KAAtB;AACAI,QAAAA,QAAQ,GAAG,CAACA,QAAQ,GAAG,CAAZ,KAAkBH,YAAY,CAACxd,MAAb,GAAsB,CAAxC,IAA6C,CAAxD;AACA2d,QAAAA,QAAQ,GAAGA,QAAQ,GAAG,CAAC,CAAZ,GAAgBH,YAAY,CAACxd,MAAb,GAAsB,CAAtC,GAA0C2d,QAArD;AACA,eAAOA,QAAQ,KAAK,CAAC,CAAd,GAAkB,IAAlB,GAAyBH,YAAY,CAACI,EAAb,CAAgBD,QAAhB,CAAhC;AACH,OAhFiC;AAiFlCV,MAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBb,WAAnB,EAAgC;AACvC,aAAKD,aAAL;;AACA,YAAIC,WAAW,GAAGA,WAAW,IAAIA,WAAW,CAAClB,KAAZ,EAAjC,EAAsD;AAClDkB,UAAAA,WAAW,CAACvE,QAAZ,CAAqB,KAAK5N,OAAL,CAAaJ,MAAlC;;AACA,eAAK0S,cAAL,CAAoBH,WAApB;AACH;AACJ,OAvFiC;AAwFlCyB,MAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2B7R,GAA3B,EAAgC;AAC/C,eAAOA,GAAG,IAAIA,GAAG,CAAChM,MAAX,GAAoBiX,OAAO,CAACa,WAAR,CAAoB9L,GAApB,CAApB,GAA+C,IAAtD;AACH,OA1FiC;AA2FlCqQ,MAAAA,mBAAmB,EAAE,SAASA,mBAAT,GAA+B;AAChD,YAAID,WAAW,GAAG,KAAKH,eAAL,GAAuBpjB,MAAvB,CAA8B,KAAKyR,SAAL,CAAeT,MAA7C,EAAqDqR,KAArD,EAAlB;;AACA,eAAOkB,WAAW,CAACpc,MAAZ,GAAqBoc,WAArB,GAAmC,IAA1C;AACH,OA9FiC;AA+FlC0B,MAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC1C,YAAI1B,WAAW,GAAG,KAAKH,eAAL,GAAuBf,KAAvB,EAAlB;;AACA,eAAOkB,WAAW,CAACpc,MAAZ,GAAqBoc,WAArB,GAAmC,IAA1C;AACH,OAlGiC;AAmGlCjC,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB5W,KAAhB,EAAuB;AAC3B,YAAIwa,aAAa,GAAGxa,KAAK,KAAK,KAAKA,KAAnC;;AACA,YAAIwa,aAAJ,EAAmB;AACf,eAAKxa,KAAL,GAAaA,KAAb;;AACA1M,UAAAA,CAAC,CAACyB,IAAF,CAAO,KAAKwiB,QAAZ,EAAsBkD,aAAtB;AACH;;AACD,eAAOD,aAAP;;AACA,iBAASC,aAAT,CAAuBxU,OAAvB,EAAgC;AAC5BA,UAAAA,OAAO,CAAC2Q,MAAR,CAAe5W,KAAf;AACH;AACJ,OA7GiC;AA8GlCoG,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB9S,QAAAA,CAAC,CAACyB,IAAF,CAAO,KAAKwiB,QAAZ,EAAsBmD,YAAtB;;AACA,aAAK1a,KAAL,GAAa,IAAb;AACA,aAAKsX,KAAL,CAAWhD,QAAX,CAAoB,KAAK5N,OAAL,CAAaN,KAAjC;;AACA,iBAASsU,YAAT,CAAsBzU,OAAtB,EAA+B;AAC3BA,UAAAA,OAAO,CAAClK,KAAR;AACH;AACJ,OArHiC;AAsHlCsW,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,aAAKiF,KAAL,CAAW/N,GAAX,CAAe,KAAf;AACA,aAAK+N,KAAL,GAAajkB,CAAC,CAAC,OAAD,CAAd;;AACAC,QAAAA,CAAC,CAACyB,IAAF,CAAO,KAAKwiB,QAAZ,EAAsBoD,cAAtB;;AACA,iBAASA,cAAT,CAAwB1U,OAAxB,EAAiC;AAC7BA,UAAAA,OAAO,CAACoM,OAAR;AACH;AACJ;AA7HiC,KAAtC;;AA+HA,WAAOgF,IAAP;AACH,GAlJU,EAAX;;AAmJA,MAAIuD,MAAM,GAAG,YAAW;AACpB;;AACA,aAASA,MAAT,CAAgBC,OAAhB,EAAyB;AACrB,WAAKpS,GAAL,GAAWpV,CAAC,CAAC,eAAD,EAAkB;AAC1Bkb,QAAAA,IAAI,EAAE,QADoB;AAE1B,qBAAa;AAFa,OAAlB,CAAD,CAGR5H,GAHQ,CAGJ;AACHQ,QAAAA,QAAQ,EAAE,UADP;AAEH2T,QAAAA,OAAO,EAAE,GAFN;AAGHC,QAAAA,MAAM,EAAE,GAHL;AAIHvB,QAAAA,MAAM,EAAE,KAJL;AAKH5H,QAAAA,KAAK,EAAE,KALJ;AAMH,yBAAiB,MANd;AAOH,wBAAgB,MAPb;AAQHoJ,QAAAA,QAAQ,EAAE,QARP;AASHC,QAAAA,IAAI,EAAE,eATH;AAUH,uBAAe;AAVZ,OAHI,CAAX;AAeAJ,MAAAA,OAAO,CAACzM,MAAR,CAAeyH,KAAf,CAAqB,KAAKpN,GAA1B;;AACAnV,MAAAA,CAAC,CAACyB,IAAF,CAAO8lB,OAAO,CAAC7U,IAAR,CAAauR,QAApB,EAA8BjkB,CAAC,CAACuB,IAAF,CAAO,UAASoR,OAAT,EAAkB;AACnD,YAAIA,OAAO,CAACoD,MAAZ,EAAoB;AAChBpD,UAAAA,OAAO,CAACoD,MAAR,CAAe,UAAf,EAA2B/V,CAAC,CAACuB,IAAF,CAAO,KAAK+hB,MAAZ,EAAoB,IAApB,CAA3B;AACA3Q,UAAAA,OAAO,CAACoD,MAAR,CAAe,SAAf,EAA0B/V,CAAC,CAACuB,IAAF,CAAO,KAAKqmB,OAAZ,EAAqB,IAArB,CAA1B;AACH;AACJ,OAL6B,EAK3B,IAL2B,CAA9B;AAMH;;AACD5nB,IAAAA,CAAC,CAACwC,KAAF,CAAQ8kB,MAAM,CAAC9gB,SAAf,EAA0B;AACtB8c,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB7F,KAAhB,EAAuB2D,WAAvB,EAAoC;AACxC,YAAIjY,MAAM,GAAGiY,WAAW,CAACjY,MAAzB;AACA,YAAI0e,KAAJ;;AACA,YAAI1e,MAAM,KAAK,CAAf,EAAkB;AACd0e,UAAAA,KAAK,GAAG;AACJ1lB,YAAAA,MAAM,EAAE,QADJ;AAEJic,YAAAA,EAAE,EAAE;AAFA,WAAR;AAIH,SALD,MAKO;AACHyJ,UAAAA,KAAK,GAAG;AACJ1lB,YAAAA,MAAM,EAAE,SADJ;AAEJic,YAAAA,EAAE,EAAE;AAFA,WAAR;AAIH;;AACD,aAAKjJ,GAAL,CAASoJ,IAAT,CAAcpV,MAAM,GAAG,GAAT,GAAe0e,KAAK,CAAC1lB,MAArB,GAA8B,GAA9B,GAAoC0lB,KAAK,CAACzJ,EAA1C,GAA+C,qDAA7D;AACH,OAhBqB;AAiBtBwJ,MAAAA,OAAO,EAAE,YAAW;AAChB,aAAKzS,GAAL,CAASoJ,IAAT,CAAc,EAAd;AACH;AAnBqB,KAA1B;;AAqBA,WAAO+I,MAAP;AACH,GAhDY,EAAb;;AAiDA,MAAIQ,WAAW,GAAG,YAAW;AACzB;;AACA,QAAIxmB,CAAC,GAAGyiB,IAAI,CAACvd,SAAb;;AACA,aAASshB,WAAT,GAAuB;AACnB/D,MAAAA,IAAI,CAAChgB,KAAL,CAAW,IAAX,EAAiB,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAjB;AACH;;AACD5D,IAAAA,CAAC,CAACwC,KAAF,CAAQslB,WAAW,CAACthB,SAApB,EAA+Bud,IAAI,CAACvd,SAApC,EAA+C;AAC3CuM,MAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAClB,SAAC,KAAK8R,iBAAL,EAAD,IAA6B,KAAKkD,KAAL,EAA7B;AACA,eAAOzmB,CAAC,CAACyR,IAAF,CAAOhP,KAAP,CAAa,IAAb,EAAmB,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAnB,CAAP;AACH,OAJ0C;AAK3C2iB,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,aAAKyB,KAAL;;AACA,eAAO1mB,CAAC,CAACilB,KAAF,CAAQxiB,KAAR,CAAc,IAAd,EAAoB,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAApB,CAAP;AACH,OAR0C;AAS3C8gB,MAAAA,WAAW,EAAE,SAASC,UAAT,GAAsB;AAC/B,YAAI,KAAKE,iBAAL,EAAJ,EAA8B;AAC1B,eAAKmD,KAAL;AACH,SAFD,MAEO;AACH,eAAK3B,MAAL,MAAiB,KAAK0B,KAAL,EAAjB;AACH;;AACD,eAAOzmB,CAAC,CAACojB,WAAF,CAAc3gB,KAAd,CAAoB,IAApB,EAA0B,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAA1B,CAAP;AACH,OAhB0C;AAiB3CkhB,MAAAA,UAAU,EAAE,SAASC,SAAT,GAAqB;AAC7B,YAAI,KAAKF,iBAAL,EAAJ,EAA8B;AAC1B,eAAKmD,KAAL;AACH,SAFD,MAEO;AACH,eAAK3B,MAAL,MAAiB,KAAK0B,KAAL,EAAjB;AACH;;AACD,eAAOzmB,CAAC,CAACwjB,UAAF,CAAa/gB,KAAb,CAAmB,IAAnB,EAAyB,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAzB,CAAP;AACH,OAxB0C;AAyB3C4iB,MAAAA,oBAAoB,EAAE,SAASA,oBAAT,CAA8BtJ,GAA9B,EAAmC;AACrD,aAAK8G,KAAL,CAAW3Q,GAAX,CAAe6J,GAAG,KAAK,KAAR,GAAgB,KAAK7J,GAAL,CAASmB,GAAzB,GAA+B,KAAKnB,GAAL,CAASqB,GAAvD;AACA,eAAOpT,CAAC,CAACklB,oBAAF,CAAuBziB,KAAvB,CAA6B,IAA7B,EAAmC,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAnC,CAAP;AACH,OA5B0C;AA6B3CokB,MAAAA,KAAK,EAAE,SAASC,IAAT,GAAgB;AACnB,aAAKjE,KAAL,CAAWiE,IAAX;AACH,OA/B0C;AAgC3CF,MAAAA,KAAK,EAAE,SAASG,IAAT,GAAgB;AACnB,aAAKlE,KAAL,CAAW3Q,GAAX,CAAe,SAAf,EAA0B,OAA1B;AACH;AAlC0C,KAA/C;;AAoCA,WAAOyU,WAAP;AACH,GA3CiB,EAAlB;;AA4CA,MAAIK,SAAS,GAAG,YAAW;AACvB;;AACA,aAASA,SAAT,CAAmBniB,CAAnB,EAAsBmN,GAAtB,EAA2B;AACvB,UAAIiV,SAAJ,EAAeC,SAAf,EAA0BC,YAA1B,EAAwCC,UAAxC,EAAoDC,UAApD,EAAgEC,SAAhE,EAA2EC,WAA3E,EAAwFC,WAAxF,EAAqGC,YAArG,EAAmHC,cAAnH,EAAmIC,mBAAnI;AACA9iB,MAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;;AACA,UAAI,CAACA,CAAC,CAACwM,KAAP,EAAc;AACVzS,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,eAAR;AACH;;AACD,UAAI,CAAC1F,CAAC,CAAC0M,IAAP,EAAa;AACT3S,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,cAAR;AACH;;AACD,UAAI,CAAC1F,CAAC,CAAC+iB,QAAP,EAAiB;AACbhpB,QAAAA,CAAC,CAAC2L,KAAF,CAAQ,mBAAR;AACH;;AACDyH,MAAAA,GAAG,CAAC3Q,KAAJ,CAAU,IAAV;AACA,WAAKumB,QAAL,GAAgB/iB,CAAC,CAAC+iB,QAAlB;AACA,WAAKC,SAAL,GAAiBhpB,CAAC,CAACY,QAAF,CAAWoF,CAAC,CAACgjB,SAAb,IAA0BhjB,CAAC,CAACgjB,SAA5B,GAAwC,CAAzD;AACA,WAAKxW,KAAL,GAAaxM,CAAC,CAACwM,KAAf;AACA,WAAKE,IAAL,GAAY1M,CAAC,CAAC0M,IAAd;AACA,WAAKuW,OAAL,GAAe,IAAf;AACA,WAAKC,UAAL,GAAkB,CAAC,CAACljB,CAAC,CAACkjB,UAAtB;AACA,WAAKC,MAAL,GAAc,KAAd;AACA,WAAK3W,KAAL,CAAW2I,QAAX,MAAyB,KAAKiO,QAAL,EAAzB;AACA,WAAKlM,GAAL,GAAW,KAAK1K,KAAL,CAAWoL,UAAX,EAAX;;AACA,WAAKyL,MAAL;;AACA,WAAK3W,IAAL,CAAUnR,IAAV,GAAiBwU,MAAjB,CAAwB,mBAAxB,EAA6C,KAAKuT,oBAAlD,EAAwE,IAAxE,EAA8EvT,MAA9E,CAAqF,gBAArF,EAAuG,KAAKwT,iBAA5G,EAA+H,IAA/H,EAAqIxT,MAArI,CAA4I,eAA5I,EAA6J,KAAKyT,gBAAlK,EAAoL,IAApL,EAA0LzT,MAA1L,CAAiM,eAAjM,EAAkN,KAAK0T,gBAAvN,EAAyO,IAAzO,EAA+O1T,MAA/O,CAAsP,iBAAtP,EAAyQ,KAAK2T,kBAA9Q,EAAkS,IAAlS,EAAwS3T,MAAxS,CAA+S,gBAA/S,EAAiU,KAAK4T,iBAAtU,EAAyV,IAAzV;AACAvB,MAAAA,SAAS,GAAGzU,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,MAAnB,EAA2B,YAA3B,CAAb;AACA0U,MAAAA,SAAS,GAAG1U,CAAC,CAAC,IAAD,EAAO,YAAP,EAAqB,YAArB,CAAb;AACA2U,MAAAA,YAAY,GAAG3U,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,QAAnB,EAA6B,eAA7B,CAAhB;AACA4U,MAAAA,UAAU,GAAG5U,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,QAAnB,EAA6B,aAA7B,CAAd;AACA6U,MAAAA,UAAU,GAAG7U,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,aAAnB,CAAd;AACA8U,MAAAA,SAAS,GAAG9U,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,MAAnB,EAA2B,YAA3B,CAAb;AACA+U,MAAAA,WAAW,GAAG/U,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,MAAnB,EAA2B,cAA3B,CAAf;AACAgV,MAAAA,WAAW,GAAGhV,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,QAAnB,EAA6B,cAA7B,CAAf;AACAiV,MAAAA,YAAY,GAAGjV,CAAC,CAAC,IAAD,EAAO,UAAP,EAAmB,QAAnB,EAA6B,eAA7B,CAAhB;AACAkV,MAAAA,cAAc,GAAGlV,CAAC,CAAC,IAAD,EAAO,eAAP,EAAwB,iBAAxB,CAAlB;AACAmV,MAAAA,mBAAmB,GAAGnV,CAAC,CAAC,IAAD,EAAO,eAAP,EAAwB,sBAAxB,CAAvB;AACA,WAAKnB,KAAL,CAAWjR,IAAX,GAAkBwU,MAAlB,CAAyB,SAAzB,EAAoCqS,SAApC,EAA+C,IAA/C,EAAqDrS,MAArD,CAA4D,SAA5D,EAAuEsS,SAAvE,EAAkF,IAAlF,EAAwFtS,MAAxF,CAA+F,YAA/F,EAA6GuS,YAA7G,EAA2H,IAA3H,EAAiIvS,MAAjI,CAAwI,UAAxI,EAAoJwS,UAApJ,EAAgK,IAAhK,EAAsKxS,MAAtK,CAA6K,UAA7K,EAAyLyS,UAAzL,EAAqM,IAArM,EAA2MzS,MAA3M,CAAkN,SAAlN,EAA6N0S,SAA7N,EAAwO,IAAxO,EAA8O1S,MAA9O,CAAqP,WAArP,EAAkQ2S,WAAlQ,EAA+Q,IAA/Q,EAAqR3S,MAArR,CAA4R,WAA5R,EAAyS4S,WAAzS,EAAsT,IAAtT,EAA4T5S,MAA5T,CAAmU,YAAnU,EAAiV6S,YAAjV,EAA+V,IAA/V,EAAqW7S,MAArW,CAA4W,cAA5W,EAA4X8S,cAA5X,EAA4Y,IAA5Y,EAAkZ9S,MAAlZ,CAAyZ,mBAAzZ,EAA8a+S,mBAA9a,EAAmc,IAAnc,EAAyc/S,MAAzc,CAAgd,gBAAhd,EAAke,KAAK6T,iBAAve,EAA0f,IAA1f;AACH;;AACD5pB,IAAAA,CAAC,CAACwC,KAAF,CAAQ2lB,SAAS,CAAC3hB,SAAlB,EAA6B;AACzB6iB,MAAAA,MAAM,EAAE,SAASQ,KAAT,GAAiB;AACrB,YAAI/O,MAAJ,EAAYC,KAAZ;AACAD,QAAAA,MAAM,GAAG,KAAKtI,KAAL,CAAWsI,MAAX,IAAqB/a,CAAC,CAAC,OAAD,CAA/B;AACAgb,QAAAA,KAAK,GAAG,KAAKrI,IAAL,CAAUsR,KAAV,IAAmBjkB,CAAC,CAAC,OAAD,CAA5B;AACA+a,QAAAA,MAAM,CAAC5E,EAAP,CAAU,SAAV,EAAqB,UAASb,EAAT,EAAa;AAC9B,cAAI8T,MAAJ,EAAYW,QAAZ,EAAsBC,SAAtB;AACAZ,UAAAA,MAAM,GAAGzO,QAAQ,CAACsP,aAAlB;AACAF,UAAAA,QAAQ,GAAG/O,KAAK,CAACqD,EAAN,CAAS+K,MAAT,CAAX;AACAY,UAAAA,SAAS,GAAGhP,KAAK,CAACkP,GAAN,CAAUd,MAAV,EAAkBhgB,MAAlB,GAA2B,CAAvC;;AACA,cAAInJ,CAAC,CAACC,MAAF,OAAe6pB,QAAQ,IAAIC,SAA3B,CAAJ,EAA2C;AACvC1U,YAAAA,EAAE,CAACyH,cAAH;AACAzH,YAAAA,EAAE,CAAC6U,wBAAH;;AACAlqB,YAAAA,CAAC,CAACkD,KAAF,CAAQ,YAAW;AACf4X,cAAAA,MAAM,CAAC4C,KAAP;AACH,aAFD;AAGH;AACJ,SAZD;AAaA3C,QAAAA,KAAK,CAAC7E,EAAN,CAAS,cAAT,EAAyB,UAASb,EAAT,EAAa;AAClCA,UAAAA,EAAE,CAACyH,cAAH;AACH,SAFD;AAGH,OArBwB;AAsBzBwM,MAAAA,oBAAoB,EAAE,SAASa,mBAAT,CAA6Bzf,IAA7B,EAAmCyK,GAAnC,EAAwC;AAC1D,aAAKH,MAAL,CAAYG,GAAZ;AACH,OAxBwB;AAyBzBwU,MAAAA,iBAAiB,EAAE,SAASS,gBAAT,GAA4B;AAC3C,aAAKC,WAAL;AACH,OA3BwB;AA4BzBX,MAAAA,kBAAkB,EAAE,SAASY,iBAAT,CAA2B5f,IAA3B,EAAiC0W,WAAjC,EAA8C7P,KAA9C,EAAqDoB,OAArD,EAA8D;AAC9E,aAAK0X,WAAL;;AACA,YAAI,KAAKnB,UAAT,EAAqB;AACjB,cAAIqB,WAAW,GAAG,KAAK9W,SAAL,CAAeT,MAAf,CAAsBlO,MAAtB,CAA6B,CAA7B,CAAlB;AACA,eAAK4N,IAAL,CAAUsR,KAAV,CAAgBI,IAAhB,CAAqB,KAAK3Q,SAAL,CAAeb,UAApC,EAAgDyR,KAAhD,GAAwDrD,QAAxD,CAAiEuJ,WAAjE;AACH;;AACD,aAAKxB,QAAL,CAAcxT,OAAd,CAAsB,QAAtB,EAAgC6L,WAAhC,EAA6C7P,KAA7C,EAAoDoB,OAApD;AACH,OAnCwB;AAoCzB4W,MAAAA,iBAAiB,EAAE,SAASiB,gBAAT,CAA0B9f,IAA1B,EAAgCiI,OAAhC,EAAyCjG,KAAzC,EAAgD;AAC/D,aAAKqc,QAAL,CAAcxT,OAAd,CAAsB,cAAtB,EAAsC7I,KAAtC,EAA6CiG,OAA7C;AACH,OAtCwB;AAuCzB6W,MAAAA,gBAAgB,EAAE,SAASiB,eAAT,CAAyB/f,IAAzB,EAA+BiI,OAA/B,EAAwCjG,KAAxC,EAA+C;AAC7D,aAAKqc,QAAL,CAAcxT,OAAd,CAAsB,aAAtB,EAAqC7I,KAArC,EAA4CiG,OAA5C;AACH,OAzCwB;AA0CzB8W,MAAAA,gBAAgB,EAAE,SAASiB,eAAT,CAAyBhgB,IAAzB,EAA+BiI,OAA/B,EAAwCjG,KAAxC,EAA+C;AAC7D,aAAKqc,QAAL,CAAcxT,OAAd,CAAsB,cAAtB,EAAsC7I,KAAtC,EAA6CiG,OAA7C;AACH,OA5CwB;AA6CzBgY,MAAAA,UAAU,EAAE,SAASvC,SAAT,GAAqB;AAC7B,aAAKwC,aAAL,MAAwB,KAAKlY,IAAL,CAAU4Q,MAAV,CAAiB,KAAK9Q,KAAL,CAAWqL,QAAX,EAAjB,CAAxB;AACH,OA/CwB;AAgDzBgN,MAAAA,UAAU,EAAE,SAASxC,SAAT,GAAqB;AAC7B,YAAI,KAAK7V,KAAL,CAAWuL,6BAAX,EAAJ,EAAgD;AAC5C,eAAKgL,QAAL,CAAcxT,OAAd,CAAsB,QAAtB,EAAgC,KAAK/C,KAAL,CAAWqL,QAAX,EAAhC;AACH;AACJ,OApDwB;AAqDzBiN,MAAAA,aAAa,EAAE,SAASxC,YAAT,CAAsB5d,IAAtB,EAA4B2K,EAA5B,EAAgC;AAC3C,YAAIkQ,WAAJ;;AACA,YAAIA,WAAW,GAAG,KAAK7S,IAAL,CAAU8S,mBAAV,EAAlB,EAAmD;AAC/C,cAAI,KAAKxQ,MAAL,CAAYuQ,WAAZ,CAAJ,EAA8B;AAC1BlQ,YAAAA,EAAE,CAACyH,cAAH;AACAzH,YAAAA,EAAE,CAAC0V,eAAH;AACH;AACJ,SALD,MAKO,IAAI,KAAK7B,UAAT,EAAqB;AACxB,cAAI,KAAKlU,MAAL,CAAY,KAAKtC,IAAL,CAAUuU,gBAAV,EAAZ,CAAJ,EAA+C;AAC3C5R,YAAAA,EAAE,CAACyH,cAAH;AACAzH,YAAAA,EAAE,CAAC0V,eAAH;AACH;AACJ;AACJ,OAlEwB;AAmEzBC,MAAAA,WAAW,EAAE,SAASzC,UAAT,CAAoB7d,IAApB,EAA0B2K,EAA1B,EAA8B;AACvC,YAAIkQ,WAAJ;;AACA,YAAIA,WAAW,GAAG,KAAK7S,IAAL,CAAU8S,mBAAV,EAAlB,EAAmD;AAC/C,eAAKxQ,MAAL,CAAYuQ,WAAZ,KAA4BlQ,EAAE,CAACyH,cAAH,EAA5B;AACH,SAFD,MAEO,IAAI,KAAKoM,UAAT,EAAqB;AACxB,cAAI3D,WAAW,GAAG,KAAK7S,IAAL,CAAUuU,gBAAV,EAAlB,EAAgD;AAC5C,iBAAKhS,YAAL,CAAkBsQ,WAAlB,KAAkClQ,EAAE,CAACyH,cAAH,EAAlC;AACH;AACJ;AACJ,OA5EwB;AA6EzBmO,MAAAA,WAAW,EAAE,SAASzC,UAAT,GAAsB;AAC/B,aAAKjC,KAAL;AACH,OA/EwB;AAgFzB2E,MAAAA,UAAU,EAAE,SAASzC,SAAT,GAAqB;AAC7B,aAAK0C,UAAL,CAAgB,CAAC,CAAjB;AACH,OAlFwB;AAmFzBC,MAAAA,YAAY,EAAE,SAAS1C,WAAT,GAAuB;AACjC,aAAKyC,UAAL,CAAgB,CAAC,CAAjB;AACH,OArFwB;AAsFzBE,MAAAA,YAAY,EAAE,SAAS1C,WAAT,GAAuB;AACjC,YAAI,KAAKzL,GAAL,KAAa,KAAb,IAAsB,KAAK1K,KAAL,CAAWgM,aAAX,EAA1B,EAAsD;AAClD,eAAKvJ,YAAL,CAAkB,KAAKvC,IAAL,CAAU8S,mBAAV,MAAmC,KAAK9S,IAAL,CAAUuU,gBAAV,EAArD;AACH;AACJ,OA1FwB;AA2FzBqE,MAAAA,aAAa,EAAE,SAAS1C,YAAT,GAAwB;AACnC,YAAI,KAAK1L,GAAL,KAAa,KAAb,IAAsB,KAAK1K,KAAL,CAAWgM,aAAX,EAA1B,EAAsD;AAClD,eAAKvJ,YAAL,CAAkB,KAAKvC,IAAL,CAAU8S,mBAAV,MAAmC,KAAK9S,IAAL,CAAUuU,gBAAV,EAArD;AACH;AACJ,OA/FwB;AAgGzBsE,MAAAA,eAAe,EAAE,SAAS1C,cAAT,CAAwB2C,CAAxB,EAA2B9e,KAA3B,EAAkC;AAC/C,aAAKke,aAAL,CAAmBle,KAAnB,IAA4B,KAAKgG,IAAL,CAAU4Q,MAAV,CAAiB5W,KAAjB,CAA5B,GAAsD,KAAKgG,IAAL,CAAUI,KAAV,EAAtD;AACH,OAlGwB;AAmGzB2Y,MAAAA,oBAAoB,EAAE,SAAS3C,mBAAT,GAA+B;AACjD,aAAKuB,WAAL;AACH,OArGwB;AAsGzBT,MAAAA,iBAAiB,EAAE,SAAS8B,gBAAT,CAA0BF,CAA1B,EAA6BtO,GAA7B,EAAkC;AACjD,YAAI,KAAKA,GAAL,KAAaA,GAAjB,EAAsB;AAClB,eAAKA,GAAL,GAAWA,GAAX;AACA,eAAKxK,IAAL,CAAU8T,oBAAV,CAA+BtJ,GAA/B;AACH;AACJ,OA3GwB;AA4GzByO,MAAAA,aAAa,EAAE,SAASC,YAAT,GAAwB;AACnC,aAAK9B,QAAL,MAAmB,KAAK/W,IAAL,EAAnB;AACH,OA9GwB;AA+GzB6X,MAAAA,aAAa,EAAE,SAASiB,YAAT,CAAsBnf,KAAtB,EAA6B;AACxCA,QAAAA,KAAK,GAAG1M,CAAC,CAACU,QAAF,CAAWgM,KAAX,IAAoBA,KAApB,GAA4B,KAAK8F,KAAL,CAAWqL,QAAX,MAAyB,EAA7D;AACA,eAAOnR,KAAK,CAACvD,MAAN,IAAgB,KAAK6f,SAA5B;AACH,OAlHwB;AAmHzBqB,MAAAA,WAAW,EAAE,SAASyB,UAAT,GAAsB;AAC/B,YAAIvG,WAAJ,EAAiB3a,IAAjB,EAAuBvI,GAAvB,EAA4BqK,KAA5B,EAAmCqf,YAAnC,EAAiDC,eAAjD,EAAkE3rB,KAAlE;AACAklB,QAAAA,WAAW,GAAG,KAAK7S,IAAL,CAAUuU,gBAAV,EAAd;AACArc,QAAAA,IAAI,GAAG,KAAK8H,IAAL,CAAUsU,iBAAV,CAA4BzB,WAA5B,CAAP;AACAljB,QAAAA,GAAG,GAAG,KAAKmQ,KAAL,CAAWoK,aAAX,EAAN;;AACA,YAAIhS,IAAI,IAAI,CAAC5K,CAAC,CAACM,aAAF,CAAgB+B,GAAhB,CAAT,IAAiC,CAAC,KAAKmQ,KAAL,CAAW2L,WAAX,EAAtC,EAAgE;AAC5DzR,UAAAA,KAAK,GAAGiO,KAAK,CAACiB,cAAN,CAAqBvZ,GAArB,CAAR;AACA0pB,UAAAA,YAAY,GAAG/rB,CAAC,CAACQ,gBAAF,CAAmBkM,KAAnB,CAAf;AACAsf,UAAAA,eAAe,GAAG,IAAI5jB,MAAJ,CAAW,SAAS2jB,YAAT,GAAwB,QAAnC,EAA6C,GAA7C,CAAlB;AACA1rB,UAAAA,KAAK,GAAG2rB,eAAe,CAACvS,IAAhB,CAAqB7O,IAAI,CAACvI,GAA1B,CAAR;AACAhC,UAAAA,KAAK,IAAI,KAAKmS,KAAL,CAAW+I,OAAX,CAAmBlZ,GAAG,GAAGhC,KAAK,CAAC,CAAD,CAA9B,CAAT;AACH,SAND,MAMO;AACH,eAAKmS,KAAL,CAAWiJ,SAAX;AACH;AACJ,OAjIwB;AAkIzBwQ,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,eAAO,KAAKhD,OAAZ;AACH,OApIwB;AAqIzBiD,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtB,aAAKjD,OAAL,GAAe,IAAf;AACH,OAvIwB;AAwIzBkD,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,aAAKlD,OAAL,GAAe,KAAf;AACH,OA1IwB;AA2IzBa,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1B,eAAO,KAAKX,MAAZ;AACH,OA7IwB;AA8IzBC,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1B,YAAI,KAAKU,QAAL,EAAJ,EAAqB;AACjB,iBAAO,IAAP;AACH,SAFD,MAEO,IAAI,CAAC,KAAKmC,SAAL,EAAD,IAAqB,KAAKlD,QAAL,CAAcvT,MAAd,CAAqB,QAArB,CAAzB,EAAyD;AAC5D,iBAAO,KAAP;AACH,SAFM,MAEA;AACH,eAAK2T,MAAL,GAAc,IAAd;AACA,eAAKJ,QAAL,CAAcxT,OAAd,CAAsB,QAAtB;AACA,iBAAO,IAAP;AACH;AACJ,OAxJwB;AAyJzB6W,MAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAC9B,YAAI,CAAC,KAAKtC,QAAL,EAAL,EAAsB;AAClB,iBAAO,IAAP;AACH,SAFD,MAEO,IAAI,KAAKf,QAAL,CAAcvT,MAAd,CAAqB,MAArB,CAAJ,EAAkC;AACrC,iBAAO,KAAP;AACH,SAFM,MAEA;AACH,eAAK2T,MAAL,GAAc,KAAd;AACA,eAAK5C,KAAL;AACA,eAAKwC,QAAL,CAAcxT,OAAd,CAAsB,MAAtB;AACA,iBAAO,IAAP;AACH;AACJ,OApKwB;AAqKzB8Q,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtB,eAAO,KAAK3T,IAAL,CAAU2T,MAAV,EAAP;AACH,OAvKwB;AAwKzBtT,MAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAClB,YAAI,CAAC,KAAKsT,MAAL,EAAD,IAAkB,CAAC,KAAK0C,QAAL,CAAcvT,MAAd,CAAqB,MAArB,CAAvB,EAAqD;AACjD,eAAKhD,KAAL,CAAWwM,eAAX,CAA2B,IAA3B;AACA,eAAKtM,IAAL,CAAUK,IAAV;;AACA,eAAKsX,WAAL;;AACA,eAAKtB,QAAL,CAAcxT,OAAd,CAAsB,MAAtB;AACH;;AACD,eAAO,KAAK8Q,MAAL,EAAP;AACH,OAhLwB;AAiLzBE,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpB,YAAI,KAAKF,MAAL,MAAiB,CAAC,KAAK0C,QAAL,CAAcvT,MAAd,CAAqB,OAArB,CAAtB,EAAqD;AACjD,eAAKhD,KAAL,CAAWwM,eAAX,CAA2B,KAA3B;AACA,eAAKtM,IAAL,CAAU6T,KAAV;AACA,eAAK/T,KAAL,CAAWiJ,SAAX;AACA,eAAKjJ,KAAL,CAAWuJ,eAAX;AACA,eAAKgN,QAAL,CAAcxT,OAAd,CAAsB,OAAtB;AACH;;AACD,eAAO,CAAC,KAAK8Q,MAAL,EAAR;AACH,OA1LwB;AA2LzBgG,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBhqB,GAAhB,EAAqB;AACzB,aAAKmQ,KAAL,CAAW2K,QAAX,CAAoBnd,CAAC,CAACqB,KAAF,CAAQgB,GAAR,CAApB;AACH,OA7LwB;AA8LzBiqB,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtB,eAAO,KAAK9Z,KAAL,CAAWqL,QAAX,EAAP;AACH,OAhMwB;AAiMzB7I,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBuQ,WAAhB,EAA6B;AACjC,YAAI3a,IAAI,GAAG,KAAK8H,IAAL,CAAUsU,iBAAV,CAA4BzB,WAA5B,CAAX;;AACA,YAAI3a,IAAI,IAAI,CAAC,KAAKme,QAAL,CAAcvT,MAAd,CAAqB,QAArB,EAA+B5K,IAAI,CAACjK,GAApC,EAAyCiK,IAAI,CAAC+H,OAA9C,CAAb,EAAqE;AACjE,eAAKH,KAAL,CAAW2K,QAAX,CAAoBvS,IAAI,CAACvI,GAAzB,EAA8B,IAA9B;AACA,eAAK0mB,QAAL,CAAcxT,OAAd,CAAsB,QAAtB,EAAgC3K,IAAI,CAACjK,GAArC,EAA0CiK,IAAI,CAAC+H,OAA/C;AACA,eAAK4T,KAAL;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH,OA1MwB;AA2MzBtR,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBsQ,WAAtB,EAAmC;AAC7C,YAAI7Y,KAAJ,EAAW9B,IAAX,EAAiBqT,OAAjB;AACAvR,QAAAA,KAAK,GAAG,KAAK8F,KAAL,CAAWqL,QAAX,EAAR;AACAjT,QAAAA,IAAI,GAAG,KAAK8H,IAAL,CAAUsU,iBAAV,CAA4BzB,WAA5B,CAAP;AACAtH,QAAAA,OAAO,GAAGrT,IAAI,IAAI8B,KAAK,KAAK9B,IAAI,CAACvI,GAAjC;;AACA,YAAI4b,OAAO,IAAI,CAAC,KAAK8K,QAAL,CAAcvT,MAAd,CAAqB,cAArB,EAAqC5K,IAAI,CAACjK,GAA1C,EAA+CiK,IAAI,CAAC+H,OAApD,CAAhB,EAA8E;AAC1E,eAAKH,KAAL,CAAW2K,QAAX,CAAoBvS,IAAI,CAACvI,GAAzB;AACA,eAAK0mB,QAAL,CAAcxT,OAAd,CAAsB,cAAtB,EAAsC3K,IAAI,CAACjK,GAA3C,EAAgDiK,IAAI,CAAC+H,OAArD;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH,OAtNwB;AAuNzBwY,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBzE,KAApB,EAA2B;AACnC,YAAIha,KAAJ,EAAW6f,UAAX,EAAuB3hB,IAAvB,EAA6BgI,UAA7B,EAAyC4Z,WAAzC,EAAsDC,UAAtD,EAAkExgB,EAAlE;AACAS,QAAAA,KAAK,GAAG,KAAK8F,KAAL,CAAWqL,QAAX,EAAR;AACA0O,QAAAA,UAAU,GAAG,KAAK7Z,IAAL,CAAU+T,0BAAV,CAAqCC,KAArC,CAAb;AACA9b,QAAAA,IAAI,GAAG,KAAK8H,IAAL,CAAUsU,iBAAV,CAA4BuF,UAA5B,CAAP;AACA3Z,QAAAA,UAAU,GAAGhI,IAAI,GAAGA,IAAI,CAACjK,GAAR,GAAc,IAA/B;AACA6rB,QAAAA,WAAW,GAAG5hB,IAAI,GAAGA,IAAI,CAAC+H,OAAR,GAAkB,IAApC;AACA1G,QAAAA,EAAE,GAAGsgB,UAAU,GAAGA,UAAU,CAACvR,IAAX,CAAgB,IAAhB,CAAH,GAA2B,IAA1C;AACA,aAAKxI,KAAL,CAAW+C,OAAX,CAAmB,cAAnB,EAAmCtJ,EAAnC;AACAwgB,QAAAA,UAAU,GAAG,KAAK7B,aAAL,MAAwB,KAAKlY,IAAL,CAAU4Q,MAAV,CAAiB5W,KAAjB,CAArC;;AACA,YAAI,CAAC+f,UAAD,IAAe,CAAC,KAAK1D,QAAL,CAAcvT,MAAd,CAAqB,cAArB,EAAqC5C,UAArC,EAAiD4Z,WAAjD,CAApB,EAAmF;AAC/E,eAAK9Z,IAAL,CAAU0T,SAAV,CAAoBmG,UAApB;;AACA,cAAI3hB,IAAJ,EAAU;AACN,gBAAI,OAAOA,IAAI,CAACvI,GAAZ,KAAoB,QAAxB,EAAkC;AAC9B,mBAAKmQ,KAAL,CAAWsL,aAAX,CAAyBlT,IAAI,CAACvI,GAA9B;AACH;AACJ,WAJD,MAIO;AACH,iBAAKmQ,KAAL,CAAWuJ,eAAX;;AACA,iBAAKsO,WAAL;AACH;;AACD,eAAKtB,QAAL,CAAcxT,OAAd,CAAsB,cAAtB,EAAsC3C,UAAtC,EAAkD4Z,WAAlD;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH,OA/OwB;AAgPzBzN,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB,aAAKvM,KAAL,CAAWuM,OAAX;AACA,aAAKrM,IAAL,CAAUqM,OAAV;AACH;AAnPwB,KAA7B;;AAqPA,WAAOoJ,SAAP;;AACA,aAASxU,CAAT,CAAW+Y,GAAX,EAAgB;AACZ,UAAIC,OAAO,GAAG,GAAG7mB,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAAd;AACA,aAAO,YAAW;AACd,YAAID,IAAI,GAAG,GAAGmC,KAAH,CAASxD,IAAT,CAAcsB,SAAd,CAAX;;AACA5D,QAAAA,CAAC,CAACyB,IAAF,CAAOkrB,OAAP,EAAgB,UAASnc,MAAT,EAAiB;AAC7B,iBAAOkc,GAAG,CAAClc,MAAD,CAAH,CAAYzM,KAAZ,CAAkB2oB,GAAlB,EAAuB/oB,IAAvB,CAAP;AACH,SAFD;AAGH,OALD;AAMH;AACJ,GAtSe,EAAhB;;AAuSA,GAAC,YAAW;AACR;;AACA,QAAIqN,GAAJ,EAASnL,IAAT,EAAe8mB,OAAf;AACA3b,IAAAA,GAAG,GAAGjR,CAAC,CAACoD,EAAF,CAAKypB,SAAX;AACA/mB,IAAAA,IAAI,GAAG;AACHsN,MAAAA,GAAG,EAAE,QADF;AAEH0Z,MAAAA,KAAK,EAAE,UAFJ;AAGHD,MAAAA,SAAS,EAAE;AAHR,KAAP;AAKAD,IAAAA,OAAO,GAAG;AACNtd,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBrJ,CAApB,EAAuBie,QAAvB,EAAiC;AACzC,YAAI9Q,GAAJ;AACA8Q,QAAAA,QAAQ,GAAGjkB,CAAC,CAACa,OAAF,CAAUojB,QAAV,IAAsBA,QAAtB,GAAiC,GAAGne,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAA5C;AACAoC,QAAAA,CAAC,GAAGA,CAAC,IAAI,EAAT;AACAmN,QAAAA,GAAG,GAAGb,GAAG,CAACtM,CAAC,CAAC8mB,UAAH,CAAT;AACA,eAAO,KAAKrrB,IAAL,CAAUsrB,MAAV,CAAP;;AACA,iBAASA,MAAT,GAAkB;AACd,cAAIjS,MAAJ,EAAYkS,QAAZ,EAAsBnS,KAAtB,EAA6BE,KAA7B,EAAoCkS,WAApC,EAAiDC,WAAjD,EAA8DnE,QAA9D,EAAwEvW,KAAxE,EAA+EE,IAA/E,EAAqFya,MAArF,EAA6FP,SAA7F,EAAwGQ,eAAxG;;AACAptB,UAAAA,CAAC,CAACyB,IAAF,CAAOwiB,QAAP,EAAiB,UAASoJ,CAAT,EAAY;AACzBA,YAAAA,CAAC,CAACpa,SAAF,GAAc,CAAC,CAACjN,CAAC,CAACiN,SAAlB;AACH,WAFD;;AAGA6H,UAAAA,MAAM,GAAG/a,CAAC,CAAC,IAAD,CAAV;AACAitB,UAAAA,QAAQ,GAAGjtB,CAAC,CAACoT,GAAG,CAACI,IAAJ,CAAS9C,OAAV,CAAZ;AACAoK,UAAAA,KAAK,GAAGyS,SAAS,CAACtnB,CAAC,CAACyM,IAAH,CAAjB;AACAsI,UAAAA,KAAK,GAAGuS,SAAS,CAACtnB,CAAC,CAAC0M,IAAH,CAAjB;AACAua,UAAAA,WAAW,GAAGjnB,CAAC,CAACyM,IAAF,KAAW,KAAX,IAAoB,CAACoI,KAAnC;AACAqS,UAAAA,WAAW,GAAGlnB,CAAC,CAAC0M,IAAF,KAAW,KAAX,IAAoB,CAACqI,KAAnC;AACAkS,UAAAA,WAAW,KAAKpS,KAAK,GAAG0S,kBAAkB,CAACzS,MAAD,EAAS3H,GAAT,CAA/B,CAAX;AACA+Z,UAAAA,WAAW,KAAKnS,KAAK,GAAGhb,CAAC,CAACoT,GAAG,CAACI,IAAJ,CAASb,IAAV,CAAD,CAAiBW,GAAjB,CAAqBF,GAAG,CAACE,GAAJ,CAAQX,IAA7B,CAAb,CAAX;AACAmI,UAAAA,KAAK,IAAIA,KAAK,CAACxY,GAAN,CAAU,EAAV,CAAT;AACAyY,UAAAA,MAAM,GAAG0S,SAAS,CAAC1S,MAAD,EAAS3H,GAAT,CAAlB;;AACA,cAAI8Z,WAAW,IAAIC,WAAnB,EAAgC;AAC5BF,YAAAA,QAAQ,CAAC3Z,GAAT,CAAaF,GAAG,CAACE,GAAJ,CAAQ5C,OAArB;AACAqK,YAAAA,MAAM,CAACzH,GAAP,CAAW4Z,WAAW,GAAG9Z,GAAG,CAACE,GAAJ,CAAQb,KAAX,GAAmBW,GAAG,CAACE,GAAJ,CAAQiB,eAAjD;AACAwG,YAAAA,MAAM,CAAC2S,IAAP,CAAYT,QAAZ,EAAsBU,MAAtB,GAA+BvL,OAA/B,CAAuC8K,WAAW,GAAGpS,KAAH,GAAW,IAA7D,EAAmE8G,MAAnE,CAA0EuL,WAAW,GAAGnS,KAAH,GAAW,IAAhG;AACH;;AACDqS,UAAAA,eAAe,GAAGF,WAAW,GAAGpF,WAAH,GAAiB/D,IAA9C;AACAgF,UAAAA,QAAQ,GAAG,IAAInU,QAAJ,CAAa;AACpBM,YAAAA,EAAE,EAAE4F;AADgB,WAAb,CAAX;AAGAtI,UAAAA,KAAK,GAAG,IAAImI,KAAJ,CAAU;AACdlI,YAAAA,IAAI,EAAEoI,KADQ;AAEdrI,YAAAA,KAAK,EAAEsI,MAFO;AAGdpI,YAAAA,IAAI,EAAEqI;AAHQ,WAAV,EAIL5H,GAJK,CAAR;AAKAT,UAAAA,IAAI,GAAG,IAAI0a,eAAJ,CAAoB;AACvBxmB,YAAAA,IAAI,EAAEmU,KADiB;AAEvBkJ,YAAAA,QAAQ,EAAEA;AAFa,WAApB,EAGJ9Q,GAHI,CAAP;AAIAga,UAAAA,MAAM,GAAG,IAAI7F,MAAJ,CAAW;AAChBxM,YAAAA,MAAM,EAAEA,MADQ;AAEhBpI,YAAAA,IAAI,EAAEA;AAFU,WAAX,CAAT;AAIAka,UAAAA,SAAS,GAAG,IAAIzE,SAAJ,CAAc;AACtB3V,YAAAA,KAAK,EAAEA,KADe;AAEtBE,YAAAA,IAAI,EAAEA,IAFgB;AAGtBqW,YAAAA,QAAQ,EAAEA,QAHY;AAItBC,YAAAA,SAAS,EAAEhjB,CAAC,CAACgjB,SAJS;AAKtBE,YAAAA,UAAU,EAAEljB,CAAC,CAACkjB;AALQ,WAAd,EAMT/V,GANS,CAAZ;AAOA2H,UAAAA,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAACsN,GAAjB,EAAsBA,GAAtB;AACA2H,UAAAA,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAAC+mB,SAAjB,EAA4BA,SAA5B;AACH;AACJ,OAtDK;AAuDNX,MAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB;AAC5B,YAAIhD,OAAJ;AACA0E,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7B3E,UAAAA,OAAO,GAAG2E,CAAC,CAAC3B,SAAF,EAAV;AACH,SAFK,CAAN;AAGA,eAAOhD,OAAP;AACH,OA7DK;AA8DNiD,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtByB,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAAC1B,MAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OAnEK;AAoENC,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxBwB,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAACzB,OAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OAzEK;AA0ENrC,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1B,YAAIX,MAAJ;AACAwE,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7BzE,UAAAA,MAAM,GAAGyE,CAAC,CAAC9D,QAAF,EAAT;AACH,SAFK,CAAN;AAGA,eAAOX,MAAP;AACH,OAhFK;AAiFNC,MAAAA,QAAQ,EAAE,SAASA,QAAT,GAAoB;AAC1BuE,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAACxE,QAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OAtFK;AAuFNgD,MAAAA,UAAU,EAAE,SAASA,UAAT,GAAsB;AAC9BuB,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAACxB,UAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OA5FK;AA6FN/F,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACtB,YAAItT,IAAJ;AACA4a,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7B7a,UAAAA,IAAI,GAAG6a,CAAC,CAACvH,MAAF,EAAP;AACH,SAFK,CAAN;AAGA,eAAOtT,IAAP;AACH,OAnGK;AAoGNA,MAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AAClB4a,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAAC7a,IAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OAzGK;AA0GNwT,MAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACpBoH,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,UAAAA,CAAC,CAACrH,KAAF;AACH,SAFK,CAAN;AAGA,eAAO,IAAP;AACH,OA/GK;AAgHNvR,MAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBE,EAAhB,EAAoB;AACxB,YAAI2Y,OAAO,GAAG,KAAd;AAAA,YAAqB1Y,GAAG,GAAGpV,CAAC,CAACmV,EAAD,CAA5B;AACAyY,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7BC,UAAAA,OAAO,GAAGD,CAAC,CAAC5Y,MAAF,CAASG,GAAT,CAAV;AACH,SAFK,CAAN;AAGA,eAAO0Y,OAAP;AACH,OAtHK;AAuHN5Y,MAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBC,EAAtB,EAA0B;AACpC,YAAI2Y,OAAO,GAAG,KAAd;AAAA,YAAqB1Y,GAAG,GAAGpV,CAAC,CAACmV,EAAD,CAA5B;AACAyY,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7BC,UAAAA,OAAO,GAAGD,CAAC,CAAC3Y,YAAF,CAAeE,GAAf,CAAV;AACH,SAFK,CAAN;AAGA,eAAO0Y,OAAP;AACH,OA7HK;AA8HN1C,MAAAA,UAAU,EAAE,SAAS2C,UAAT,CAAoBpH,KAApB,EAA2B;AACnC,YAAImH,OAAO,GAAG,KAAd;AACAF,QAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7BC,UAAAA,OAAO,GAAGD,CAAC,CAACzC,UAAF,CAAazE,KAAb,CAAV;AACH,SAFK,CAAN;AAGA,eAAOmH,OAAP;AACH,OApIK;AAqINxrB,MAAAA,GAAG,EAAE,SAASA,GAAT,CAAa0rB,MAAb,EAAqB;AACtB,YAAIrhB,KAAJ;;AACA,YAAI,CAAC9I,SAAS,CAACuF,MAAf,EAAuB;AACnBwkB,UAAAA,MAAM,CAAC,KAAKtJ,KAAL,EAAD,EAAe,UAASuJ,CAAT,EAAY;AAC7BlhB,YAAAA,KAAK,GAAGkhB,CAAC,CAACtB,MAAF,EAAR;AACH,WAFK,CAAN;AAGA,iBAAO5f,KAAP;AACH,SALD,MAKO;AACHihB,UAAAA,MAAM,CAAC,IAAD,EAAO,UAASC,CAAT,EAAY;AACrBA,YAAAA,CAAC,CAACvB,MAAF,CAASrsB,CAAC,CAACqB,KAAF,CAAQ0sB,MAAR,CAAT;AACH,WAFK,CAAN;AAGA,iBAAO,IAAP;AACH;AACJ,OAlJK;AAmJNhP,MAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AACxB4O,QAAAA,MAAM,CAAC,IAAD,EAAO,UAASf,SAAT,EAAoB9R,MAApB,EAA4B;AACrCkT,UAAAA,MAAM,CAAClT,MAAD,CAAN;AACA8R,UAAAA,SAAS,CAAC7N,OAAV;AACH,SAHK,CAAN;AAIA,eAAO,IAAP;AACH;AAzJK,KAAV;;AA2JAhf,IAAAA,CAAC,CAACoD,EAAF,CAAKypB,SAAL,GAAiB,UAASpc,MAAT,EAAiB;AAC9B,UAAImc,OAAO,CAACnc,MAAD,CAAX,EAAqB;AACjB,eAAOmc,OAAO,CAACnc,MAAD,CAAP,CAAgBzM,KAAhB,CAAsB,IAAtB,EAA4B,GAAG+B,KAAH,CAASxD,IAAT,CAAcsB,SAAd,EAAyB,CAAzB,CAA5B,CAAP;AACH,OAFD,MAEO;AACH,eAAO+oB,OAAO,CAACtd,UAAR,CAAmBtL,KAAnB,CAAyB,IAAzB,EAA+BH,SAA/B,CAAP;AACH;AACJ,KAND;;AAOA7D,IAAAA,CAAC,CAACoD,EAAF,CAAKypB,SAAL,CAAe3b,UAAf,GAA4B,SAASA,UAAT,GAAsB;AAC9ClR,MAAAA,CAAC,CAACoD,EAAF,CAAKypB,SAAL,GAAiB5b,GAAjB;AACA,aAAO,IAAP;AACH,KAHD;;AAIA,aAAS2c,MAAT,CAAgBM,IAAhB,EAAsB9qB,EAAtB,EAA0B;AACtB8qB,MAAAA,IAAI,CAACxsB,IAAL,CAAU,YAAW;AACjB,YAAIqZ,MAAM,GAAG/a,CAAC,CAAC,IAAD,CAAd;AAAA,YAAsB6sB,SAAtB;AACA,SAACA,SAAS,GAAG9R,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAAC+mB,SAAjB,CAAb,KAA6CzpB,EAAE,CAACypB,SAAD,EAAY9R,MAAZ,CAA/C;AACH,OAHD;AAIH;;AACD,aAASyS,kBAAT,CAA4BzS,MAA5B,EAAoC3H,GAApC,EAAyC;AACrC,aAAO2H,MAAM,CAAClY,KAAP,GAAeoe,QAAf,CAAwB7N,GAAG,CAACC,OAAJ,CAAYX,IAApC,EAA0Cyb,UAA1C,GAAuD7a,GAAvD,CAA2DF,GAAG,CAACE,GAAJ,CAAQZ,IAAnE,EAAyEY,GAAzE,CAA6E8a,mBAAmB,CAACrT,MAAD,CAAhG,EAA0GsT,IAA1G,CAA+G;AAClHC,QAAAA,QAAQ,EAAE,IADwG;AAElHC,QAAAA,QAAQ,EAAE;AAFwG,OAA/G,EAGJC,UAHI,CAGO,qBAHP,EAG8B9I,WAH9B,CAG0C,UAH1C,EAGsDzK,IAHtD,CAG2D;AAC9DwT,QAAAA,UAAU,EAAE,OADkD;AAE9DC,QAAAA,QAAQ,EAAE,CAAC;AAFmD,OAH3D,CAAP;AAOH;;AACD,aAASjB,SAAT,CAAmB1S,MAAnB,EAA2B3H,GAA3B,EAAgC;AAC5B2H,MAAAA,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAACgnB,KAAjB,EAAwB;AACpB3P,QAAAA,GAAG,EAAEpC,MAAM,CAACE,IAAP,CAAY,KAAZ,CADe;AAEpB/F,QAAAA,YAAY,EAAE6F,MAAM,CAACE,IAAP,CAAY,cAAZ,CAFM;AAGpBwT,QAAAA,UAAU,EAAE1T,MAAM,CAACE,IAAP,CAAY,YAAZ,CAHQ;AAIpB0T,QAAAA,KAAK,EAAE5T,MAAM,CAACE,IAAP,CAAY,OAAZ;AAJa,OAAxB;AAMAF,MAAAA,MAAM,CAACkG,QAAP,CAAgB7N,GAAG,CAACC,OAAJ,CAAYZ,KAA5B,EAAmCwI,IAAnC,CAAwC;AACpCwT,QAAAA,UAAU,EAAE;AADwB,OAAxC;;AAGA,UAAI;AACA,SAAC1T,MAAM,CAACE,IAAP,CAAY,KAAZ,CAAD,IAAuBF,MAAM,CAACE,IAAP,CAAY,KAAZ,EAAmB,MAAnB,CAAvB;AACH,OAFD,CAEE,OAAOwQ,CAAP,EAAU,CAAE;;AACd,aAAO1Q,MAAP;AACH;;AACD,aAASqT,mBAAT,CAA6BhZ,GAA7B,EAAkC;AAC9B,aAAO;AACHwZ,QAAAA,oBAAoB,EAAExZ,GAAG,CAAC9B,GAAJ,CAAQ,uBAAR,CADnB;AAEHub,QAAAA,cAAc,EAAEzZ,GAAG,CAAC9B,GAAJ,CAAQ,iBAAR,CAFb;AAGHgB,QAAAA,eAAe,EAAEc,GAAG,CAAC9B,GAAJ,CAAQ,kBAAR,CAHd;AAIHsB,QAAAA,eAAe,EAAEQ,GAAG,CAAC9B,GAAJ,CAAQ,kBAAR,CAJd;AAKHwb,QAAAA,gBAAgB,EAAE1Z,GAAG,CAAC9B,GAAJ,CAAQ,mBAAR,CALf;AAMHyb,QAAAA,kBAAkB,EAAE3Z,GAAG,CAAC9B,GAAJ,CAAQ,qBAAR,CANjB;AAOH0b,QAAAA,gBAAgB,EAAE5Z,GAAG,CAAC9B,GAAJ,CAAQ,mBAAR,CAPf;AAQH2b,QAAAA,cAAc,EAAE7Z,GAAG,CAAC9B,GAAJ,CAAQ,iBAAR;AARb,OAAP;AAUH;;AACD,aAAS2a,MAAT,CAAgBlT,MAAhB,EAAwB;AACpB,UAAI3H,GAAJ,EAAS6Z,QAAT;AACA7Z,MAAAA,GAAG,GAAG2H,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAACsN,GAAjB,CAAN;AACA6Z,MAAAA,QAAQ,GAAGlS,MAAM,CAAC4S,MAAP,GAAgB1rB,MAAhB,CAAuBmR,GAAG,CAACM,SAAJ,CAAchD,OAArC,CAAX;;AACAzQ,MAAAA,CAAC,CAACyB,IAAF,CAAOqZ,MAAM,CAAClQ,IAAP,CAAY/E,IAAI,CAACgnB,KAAjB,CAAP,EAAgC,UAASxqB,GAAT,EAAcD,GAAd,EAAmB;AAC/CpC,QAAAA,CAAC,CAACiB,WAAF,CAAcoB,GAAd,IAAqByY,MAAM,CAACyT,UAAP,CAAkBnsB,GAAlB,CAArB,GAA8C0Y,MAAM,CAACE,IAAP,CAAY5Y,GAAZ,EAAiBC,GAAjB,CAA9C;AACH,OAFD;;AAGAyY,MAAAA,MAAM,CAACoT,UAAP,CAAkBroB,IAAI,CAAC+mB,SAAvB,EAAkCsB,UAAlC,CAA6CroB,IAAI,CAACsN,GAAlD,EAAuD+a,UAAvD,CAAkEroB,IAAI,CAACmV,IAAvE,EAA6EyK,WAA7E,CAAyFtS,GAAG,CAACC,OAAJ,CAAYZ,KAArG;;AACA,UAAIwa,QAAQ,CAAC7jB,MAAb,EAAqB;AACjB2R,QAAAA,MAAM,CAACmU,MAAP,GAAgBpP,WAAhB,CAA4BmN,QAA5B;AACAA,QAAAA,QAAQ,CAAClmB,MAAT;AACH;AACJ;;AACD,aAASwmB,SAAT,CAAmB3sB,GAAnB,EAAwB;AACpB,UAAIsd,OAAJ,EAAa9I,GAAb;AACA8I,MAAAA,OAAO,GAAGje,CAAC,CAACoB,QAAF,CAAWT,GAAX,KAAmBX,CAAC,CAACkB,SAAF,CAAYP,GAAZ,CAA7B;AACAwU,MAAAA,GAAG,GAAG8I,OAAO,GAAGle,CAAC,CAACY,GAAD,CAAD,CAAO0jB,KAAP,EAAH,GAAoB,EAAjC;AACA,aAAOlP,GAAG,CAAChM,MAAJ,GAAagM,GAAb,GAAmB,IAA1B;AACH;AACJ,GA5OD;AA6OH,CAtpDD","sourcesContent":["/*!\n * typeahead.js 1.3.1\n * https://github.com/corejavascript/typeahead.js\n * Copyright 2013-2020 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        root[\"Bloodhound\"] = factory(root[\"jQuery\"]);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            guid: function() {\n                function _p8(s) {\n                    var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n                    return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n                }\n                return \"tt-\" + _p8() + _p8(true) + _p8(true) + _p8();\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"1.3.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            ngram: ngram,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace),\n                ngram: getObjTokenizer(ngram)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function ngram(str) {\n            str = _.toStr(str);\n            var tokens = [], word = \"\";\n            _.each(str.split(\"\"), function(char) {\n                if (char.match(/\\s+/)) {\n                    word = \"\";\n                } else {\n                    tokens.push(word + char);\n                    word += char;\n                }\n            });\n            return tokens;\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.maxPendingRequests = o.maxPendingRequests || 6;\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            this.maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < this.maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.matchAnyQueryToken = o.matchAnyQueryToken;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0 && !that.matchAnyQueryToken) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        if (!that.matchAnyQueryToken) {\n                            matches = [];\n                            return false;\n                        }\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.indexResponse = o.indexResponse;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport,\n                maxPendingRequests: o.maxPendingRequests\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                matchAnyQueryToken: false,\n                sufficient: 5,\n                indexRemote: false,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = identityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function identityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.indexRemote = o.indexRemote;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                sync = sync || _.noop;\n                async = async || _.noop;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    that.indexRemote && that.add(nonDuplicates);\n                    async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define([ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(root[\"jQuery\"]);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            guid: function() {\n                function _p8(s) {\n                    var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n                    return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n                }\n                return \"tt-\" + _p8() + _p8(true) + _p8(true) + _p8();\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div role=\"listbox\" class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e = $.Event(namespace + type);\n                this.$el.trigger.call(this.$el, $e, args || []);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false,\n            diacriticInsensitive: false\n        };\n        var accented = {\n            A: \"[AaªÀ-Åà-åĀ-ąǍǎȀ-ȃȦȧᴬᵃḀḁẚẠ-ảₐ℀℁℻⒜Ⓐⓐ㍱-㍴㎀-㎄㎈㎉㎩-㎯㏂㏊㏟㏿Ａａ]\",\n            B: \"[BbᴮᵇḂ-ḇℬ⒝Ⓑⓑ㍴㎅-㎇㏃㏈㏔㏝Ｂｂ]\",\n            C: \"[CcÇçĆ-čᶜ℀ℂ℃℅℆ℭⅭⅽ⒞Ⓒⓒ㍶㎈㎉㎝㎠㎤㏄-㏇Ｃｃ]\",\n            D: \"[DdĎďǄ-ǆǱ-ǳᴰᵈḊ-ḓⅅⅆⅮⅾ⒟Ⓓⓓ㋏㍲㍷-㍹㎗㎭-㎯㏅㏈Ｄｄ]\",\n            E: \"[EeÈ-Ëè-ëĒ-ěȄ-ȇȨȩᴱᵉḘ-ḛẸ-ẽₑ℡ℯℰⅇ⒠Ⓔⓔ㉐㋍㋎Ｅｅ]\",\n            F: \"[FfᶠḞḟ℉ℱ℻⒡Ⓕⓕ㎊-㎌㎙ﬀ-ﬄＦｆ]\",\n            G: \"[GgĜ-ģǦǧǴǵᴳᵍḠḡℊ⒢Ⓖⓖ㋌㋍㎇㎍-㎏㎓㎬㏆㏉㏒㏿Ｇｇ]\",\n            H: \"[HhĤĥȞȟʰᴴḢ-ḫẖℋ-ℎ⒣Ⓗⓗ㋌㍱㎐-㎔㏊㏋㏗Ｈｈ]\",\n            I: \"[IiÌ-Ïì-ïĨ-İĲĳǏǐȈ-ȋᴵᵢḬḭỈ-ịⁱℐℑℹⅈⅠ-ⅣⅥ-ⅨⅪⅫⅰ-ⅳⅵ-ⅸⅺⅻ⒤Ⓘⓘ㍺㏌㏕ﬁﬃＩｉ]\",\n            J: \"[JjĲ-ĵǇ-ǌǰʲᴶⅉ⒥ⒿⓙⱼＪｊ]\",\n            K: \"[KkĶķǨǩᴷᵏḰ-ḵK⒦Ⓚⓚ㎄㎅㎉㎏㎑㎘㎞㎢㎦㎪㎸㎾㏀㏆㏍-㏏Ｋｋ]\",\n            L: \"[LlĹ-ŀǇ-ǉˡᴸḶḷḺ-ḽℒℓ℡Ⅼⅼ⒧Ⓛⓛ㋏㎈㎉㏐-㏓㏕㏖㏿ﬂﬄＬｌ]\",\n            M: \"[MmᴹᵐḾ-ṃ℠™ℳⅯⅿ⒨Ⓜⓜ㍷-㍹㎃㎆㎎㎒㎖㎙-㎨㎫㎳㎷㎹㎽㎿㏁㏂㏎㏐㏔-㏖㏘㏙㏞㏟Ｍｍ]\",\n            N: \"[NnÑñŃ-ŉǊ-ǌǸǹᴺṄ-ṋⁿℕ№⒩Ⓝⓝ㎁㎋㎚㎱㎵㎻㏌㏑Ｎｎ]\",\n            O: \"[OoºÒ-Öò-öŌ-őƠơǑǒǪǫȌ-ȏȮȯᴼᵒỌ-ỏₒ℅№ℴ⒪Ⓞⓞ㍵㏇㏒㏖Ｏｏ]\",\n            P: \"[PpᴾᵖṔ-ṗℙ⒫Ⓟⓟ㉐㍱㍶㎀㎊㎩-㎬㎰㎴㎺㏋㏗-㏚Ｐｐ]\",\n            Q: \"[Qqℚ⒬Ⓠⓠ㏃Ｑｑ]\",\n            R: \"[RrŔ-řȐ-ȓʳᴿᵣṘ-ṛṞṟ₨ℛ-ℝ⒭Ⓡⓡ㋍㍴㎭-㎯㏚㏛Ｒｒ]\",\n            S: \"[SsŚ-šſȘșˢṠ-ṣ₨℁℠⒮Ⓢⓢ㎧㎨㎮-㎳㏛㏜ﬆＳｓ]\",\n            T: \"[TtŢ-ťȚțᵀᵗṪ-ṱẗ℡™⒯Ⓣⓣ㉐㋏㎔㏏ﬅﬆＴｔ]\",\n            U: \"[UuÙ-Üù-üŨ-ųƯưǓǔȔ-ȗᵁᵘᵤṲ-ṷỤ-ủ℆⒰Ⓤⓤ㍳㍺Ｕｕ]\",\n            V: \"[VvᵛᵥṼ-ṿⅣ-Ⅷⅳ-ⅷ⒱Ⓥⓥⱽ㋎㍵㎴-㎹㏜㏞Ｖｖ]\",\n            W: \"[WwŴŵʷᵂẀ-ẉẘ⒲Ⓦⓦ㎺-㎿㏝Ｗｗ]\",\n            X: \"[XxˣẊ-ẍₓ℻Ⅸ-Ⅻⅸ-ⅻ⒳Ⓧⓧ㏓Ｘｘ]\",\n            Y: \"[YyÝýÿŶ-ŸȲȳʸẎẏẙỲ-ỹ⒴Ⓨⓨ㏉Ｙｙ]\",\n            Z: \"[ZzŹ-žǱ-ǳᶻẐ-ẕℤℨ⒵Ⓩⓩ㎐-㎔Ｚｚ]\"\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly, o.diacriticInsensitive);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function accent_replacer(chr) {\n            return accented[chr.toUpperCase()] || chr;\n        }\n        function getRegex(patterns, caseSensitive, wordsOnly, diacriticInsensitive) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                var escapedWord = _.escapeRegExChars(patterns[i]);\n                if (diacriticInsensitive) {\n                    escapedWord = escapedWord.replace(/\\S/g, accent_replacer);\n                }\n                escapedPatterns.push(escapedWord);\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            var id;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.$menu = $(o.menu);\n            id = this.$input.attr(\"id\") || _.guid();\n            this.$menu.attr(\"id\", id + \"_listbox\");\n            this.$hint.attr({\n                \"aria-hidden\": true\n            });\n            this.$input.attr({\n                \"aria-owns\": id + \"_listbox\",\n                role: \"combobox\",\n                \"aria-autocomplete\": \"list\",\n                \"aria-expanded\": false\n            });\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n            this.onSync(\"cursorchange\", this._updateDescendent);\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            _updateDescendent: function updateDescendent(event, id) {\n                this.$input.attr(\"aria-activedescendant\", id);\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            },\n            setAriaExpanded: function setAriaExpanded(value) {\n                this.$input.attr(\"aria-expanded\", value);\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            dataset: \"tt-selectable-dataset\",\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = _.toStr(o.name || nameGenerator());\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).attr(\"role\", \"presentation\").addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    dataset: $el.data(keys.dataset) || \"\",\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", suggestions, false, this.name);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", suggestions, true, this.name);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.dataset, that.name).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query, that.name);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query, that.name);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        var idx = Math.abs(rendered - that.limit);\n                        rendered += idx;\n                        that._append(query, suggestions.slice(0, idx));\n                        that.async && that.trigger(\"asyncReceived\", query, that.name);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion ? userSuggestionTemplate : suggestionTemplate\n            };\n            function userSuggestionTemplate(context) {\n                var template = templates.suggestion;\n                return $(template(context)).attr(\"id\", _.guid());\n            }\n            function suggestionTemplate(context) {\n                return $('<div role=\"option\">').attr(\"id\", _.guid()).text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, _.bind(function isDatasetEmpty(dataset) {\n                    var isEmpty = dataset.isEmpty();\n                    this.$node.attr(\"aria-expanded\", !isEmpty);\n                    return isEmpty;\n                }, this));\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                this.$node.on(\"mouseover\", this.selectors.selectable, function() {\n                    that.setCursor($(this));\n                });\n                this.$node.on(\"mouseleave\", function() {\n                    that._removeCursor();\n                });\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.scrollTop(0);\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.attr(\"aria-expanded\", false);\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var Status = function() {\n        \"use strict\";\n        function Status(options) {\n            this.$el = $(\"<span></span>\", {\n                role: \"status\",\n                \"aria-live\": \"polite\"\n            }).css({\n                position: \"absolute\",\n                padding: \"0\",\n                border: \"0\",\n                height: \"1px\",\n                width: \"1px\",\n                \"margin-bottom\": \"-1px\",\n                \"margin-right\": \"-1px\",\n                overflow: \"hidden\",\n                clip: \"rect(0 0 0 0)\",\n                \"white-space\": \"nowrap\"\n            });\n            options.$input.after(this.$el);\n            _.each(options.menu.datasets, _.bind(function(dataset) {\n                if (dataset.onSync) {\n                    dataset.onSync(\"rendered\", _.bind(this.update, this));\n                    dataset.onSync(\"cleared\", _.bind(this.cleared, this));\n                }\n            }, this));\n        }\n        _.mixin(Status.prototype, {\n            update: function update(event, suggestions) {\n                var length = suggestions.length;\n                var words;\n                if (length === 1) {\n                    words = {\n                        result: \"result\",\n                        is: \"is\"\n                    };\n                } else {\n                    words = {\n                        result: \"results\",\n                        is: \"are\"\n                    };\n                }\n                this.$el.text(length + \" \" + words.result + \" \" + words.is + \" available, use up and down arrow keys to navigate.\");\n            },\n            cleared: function() {\n                this.$el.text(\"\");\n            }\n        });\n        return Status;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.autoselect = !!o.autoselect;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, suggestions, async, dataset) {\n                this._updateHint();\n                if (this.autoselect) {\n                    var cursorClass = this.selectors.cursor.substr(1);\n                    this.menu.$node.find(this.selectors.suggestion).first().addClass(cursorClass);\n                }\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    if (this.select($selectable)) {\n                        $e.preventDefault();\n                        $e.stopPropagation();\n                    }\n                } else if (this.autoselect) {\n                    if (this.select(this.menu.getTopSelectable())) {\n                        $e.preventDefault();\n                        $e.stopPropagation();\n                    }\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if (this.autoselect) {\n                    if ($selectable = this.menu.getTopSelectable()) {\n                        this.autocomplete($selectable) && $e.preventDefault();\n                    }\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getActiveSelectable() || this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.input.setAriaExpanded(true);\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.input.setAriaExpanded(false);\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj, data.dataset)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj, data.dataset);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj, data.dataset)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj, data.dataset);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, suggestion, datasetName, cancelMove, id;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                suggestion = data ? data.obj : null;\n                datasetName = data ? data.dataset : null;\n                id = $candidate ? $candidate.attr(\"id\") : null;\n                this.input.trigger(\"cursorchange\", id);\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", suggestion, datasetName)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        if (typeof data.val === \"string\") {\n                            this.input.setInputValue(data.val);\n                        }\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", suggestion, datasetName);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, status, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input,\n                        menu: $menu\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    status = new Status({\n                        $input: $input,\n                        menu: menu\n                    });\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength,\n                        autoselect: o.autoselect\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(_.toStr(newVal));\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop({\n                readonly: true,\n                required: false\n            }).removeAttr(\"id name placeholder\").removeClass(\"required\").attr({\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});"]},"metadata":{},"sourceType":"script"}