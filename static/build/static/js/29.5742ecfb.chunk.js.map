{"version":3,"sources":["components/loaders/MapVisualizer.js","../node_modules/react-swipeable/es/index.js","components/MapExplorer.js","../../src/utils/errors.ts","../../src/utils/common.ts","../../src/types/types-internal.ts","../../src/utils/plugins.ts","../../src/core/scope.ts","../../src/core/finalize.ts","../../src/core/proxy.ts","../../src/core/immerClass.ts","../../src/core/current.ts","../../src/immer.ts","../../src/utils/env.ts","../../src/shared/uid.ts","../../src/web/Svg.tsx","../../src/web/ContentLoader.tsx","../../src/web/presets/FacebookStyle.tsx"],"names":["MapVisualizerLoader","width","statistic","windowWidth","window","innerWidth","mapHeight","height","MAP_LEGEND_HEIGHT","viewBox","speed","backgroundColor","STATISTIC_CONFIGS","color","cx","cy","r","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","defaultProps","preventDefaultTouchmoveEvent","delta","rotationAngle","trackMouse","trackTouch","initialState","xy","swiping","eventData","undefined","start","rotateXYByAngle","pos","angle","angleInRadians","Math","PI","cos","sin","getHandlers","set","handlerProps","onStart","event","touches","state","props","document","addEventListener","onMove","onUp","_ref","clientX","clientY","initial","concat","first","timeStamp","_ref2","_rotateXYByAngle","x","y","deltaX","deltaY","absX","abs","absY","time","velocity","sqrt","dir","getDirection","onSwiping","cancelablePageSwipe","onSwiped","cancelable","preventDefault","onEnd","cleanUpMouse","removeEventListener","e","attachTouch","el","tls","forEach","_ref3","h","_ref4","output","ref","addState","cleanUpTouch","onMouseDown","updateTransientState","Swipeable","_React$PureComponent","subClass","superClass","_this","_set","cb","transientState","type","create","constructor","__proto__","render","_this$props","className","style","_this$props$nodeName","nodeName","innerRef","children","_getHandlers","handlers","React","createElement","PureComponent","propTypes","PropTypes","func","onSwipedUp","onSwipedRight","onSwipedDown","onSwipedLeft","number","bool","string","MapVisualizer","lazy","memo","stateCode","mapCode","data","mapStatistic","setMapStatistic","regionHighlighted","setRegionHighlighted","anchor","expandTable","setAnchor","mapExplorerRef","useTranslation","t","useRef","useWindowSize","useState","MAP_META","mapType","MAP_TYPES","COUNTRY","MAP_VIEWS","STATES","DISTRICTS","mapView","setMapView","MAP_VIZS","CHOROPLETH","mapViz","setMapViz","mapData","hoveredRegion","useMemo","hoveredData","districtName","districts","produce","draft","name","STATE_NAMES","history","useCallback","option","BUBBLES","newMapView","fill","xmlns","d","strokeWidth","strokeLinecap","strokeLinejoin","fillOpacity","strokeOpacity","useHistory","panelRef","useEffect","location","hash","current","scrollIntoView","trail","styles","map","element","index","push","animationDelay","swipeHandlers","useSpring","total","getStatistic","config","tension","SPRING_CONFIG_NUMBERS","transientProps","_React$useMemo","useSwipeable","currentIndex","PRIMARY_STATISTICS","indexOf","toIndex","classnames","stickied","hidden","fallback","clientWidth","prevProps","currProps","equal","TT","meta","die","error","args","msg","Error","join","isDraft","value","DRAFT_STATE","isDraftable","proto","getPrototypeOf","Array","isArray","DRAFTABLE","isMap","isSet","each","obj","iter","enumerableOnly","getArchtype","keys","ownKeys","entry","thing","type_","has","prop","get","propOrOldValue","delete","add","is","hasMap","Map","hasSet","Set","latest","copy_","base_","shallowCopy","base","slice","descriptors","getOwnPropertyDescriptors","desc","writable","configurable","enumerable","freeze","deep","isFrozen","clear","dontMutateFrozenCollections","getPlugin","pluginKey","plugin","plugins","getCurrentScope","currentScope","usePatchesInScope","scope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer","immer_","canAutoFreeze_","unfinalizedDrafts_","revoke_","revoked_","processResult","result","baseDraft","isReplaced","useProxies_","willFinalizeES5_","modified_","finalize","maybeFreeze","generateReplacementPatches_","NOTHING","rootScope","path","childValue","finalizeProperty","scope_","finalized_","draft_","generatePatches_","parentState","targetObject","rootPath","res","assigned_","autoFreeze_","peek","markChanged","prepareCopy","createProxy","parent","proxyMap_","proxySet_","isManual_","traps","objectTraps","arrayTraps","Proxy","revocable","revoke","proxy","createES5Proxy_","currentImpl","copy","archType","hasChanges_","copyHelper","from","hasSymbol","Symbol","hasProxies","Reflect","iterator","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptor","deleteProperty","owner","defineProperty","setPrototypeOf","fn","useProxies","setUseProxies","autoFreeze","setAutoFreeze","bind","produceWithPatches","recipe","defaultBase","self","hasError","Promise","then","arg1","arg2","patches","inversePatches","_this2","p","ip","createDraft","finishDraft","applyPatches","patch","op","applyPatchesImpl","applyPatches_","SVG","animate","backgroundOpacity","baseUrl","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","title","fixedId","random","toString","substring","idClip","idGradient","idAria","rtlStyle","transform","keyTimes","dur","React.createElement","role","id","clipPath","offset","stopColor","stopOpacity","attributeName","values","repeatCount","ContentLoader","Svg","Facebook","ReactContentLoaderFacebook","rx"],"mappings":"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","file":"static/js/29.5742ecfb.chunk.js","sourcesContent":["import {STATISTIC_CONFIGS, MAP_LEGEND_HEIGHT} from '../../constants';\n\nimport React from 'react';\nimport ContentLoader from 'react-content-loader';\n\n// Margins as declared in CSS\nexport const MAP_BUFFER_MARGINS = 42;\nexport const INDIA_ASPECT_RATIO = 0.885;\n\nconst MapVisualizerLoader = ({width, statistic}) => {\n  const windowWidth = window.innerWidth;\n  // Default width for loader\n  if (!width) width = windowWidth > 769 ? 480 : windowWidth;\n  // From CSS\n  const scalingFactor = windowWidth > 769 ? 0.9 : 1;\n  const mapHeight = (scalingFactor * width) / INDIA_ASPECT_RATIO;\n  const height = MAP_BUFFER_MARGINS + MAP_LEGEND_HEIGHT + mapHeight;\n  return (\n    <ContentLoader\n      viewBox={`0 0 ${width} ${height}`}\n      height={height}\n      width={width}\n      speed={2}\n      backgroundColor={STATISTIC_CONFIGS[statistic].color}\n    >\n      <circle cx={0.4 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.5 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.6 * width} cy={height / 2} r=\"5\" />\n    </ContentLoader>\n  );\n};\n\nexport default MapVisualizerLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar defaultProps = {\n  preventDefaultTouchmoveEvent: false,\n  delta: 10,\n  rotationAngle: 0,\n  trackMouse: false,\n  trackTouch: true\n};\nvar initialState = {\n  xy: [0, 0],\n  swiping: false,\n  eventData: undefined,\n  start: undefined\n};\nvar LEFT = 'Left';\nvar RIGHT = 'Right';\nvar UP = 'Up';\nvar DOWN = 'Down';\nvar touchStart = 'touchstart';\nvar touchMove = 'touchmove';\nvar touchEnd = 'touchend';\nvar mouseMove = 'mousemove';\nvar mouseUp = 'mouseup';\n\nfunction getDirection(absX, absY, deltaX, deltaY) {\n  if (absX > absY) {\n    if (deltaX > 0) {\n      return LEFT;\n    }\n\n    return RIGHT;\n  } else if (deltaY > 0) {\n    return UP;\n  }\n\n  return DOWN;\n}\n\nfunction rotateXYByAngle(pos, angle) {\n  if (angle === 0) return pos;\n  var angleInRadians = Math.PI / 180 * angle;\n  var x = pos[0] * Math.cos(angleInRadians) + pos[1] * Math.sin(angleInRadians);\n  var y = pos[1] * Math.cos(angleInRadians) - pos[0] * Math.sin(angleInRadians);\n  return [x, y];\n}\n\nfunction getHandlers(set, handlerProps) {\n  var onStart = function onStart(event) {\n    // if more than a single touch don't track, for now...\n    if (event.touches && event.touches.length > 1) return;\n    set(function (state, props) {\n      // setup mouse listeners on document to track swipe since swipe can leave container\n      if (props.trackMouse) {\n        document.addEventListener(mouseMove, onMove);\n        document.addEventListener(mouseUp, onUp);\n      }\n\n      var _ref = event.touches ? event.touches[0] : event,\n          clientX = _ref.clientX,\n          clientY = _ref.clientY;\n\n      var xy = rotateXYByAngle([clientX, clientY], props.rotationAngle);\n      return _extends({}, state, initialState, {\n        eventData: {\n          initial: [].concat(xy),\n          first: true\n        },\n        xy: xy,\n        start: event.timeStamp || 0\n      });\n    });\n  };\n\n  var onMove = function onMove(event) {\n    set(function (state, props) {\n      if (!state.xy[0] || !state.xy[1] || event.touches && event.touches.length > 1) {\n        return state;\n      }\n\n      var _ref2 = event.touches ? event.touches[0] : event,\n          clientX = _ref2.clientX,\n          clientY = _ref2.clientY;\n\n      var _rotateXYByAngle = rotateXYByAngle([clientX, clientY], props.rotationAngle),\n          x = _rotateXYByAngle[0],\n          y = _rotateXYByAngle[1];\n\n      var deltaX = state.xy[0] - x;\n      var deltaY = state.xy[1] - y;\n      var absX = Math.abs(deltaX);\n      var absY = Math.abs(deltaY);\n      var time = (event.timeStamp || 0) - state.start;\n      var velocity = Math.sqrt(absX * absX + absY * absY) / (time || 1); // if swipe is under delta and we have not started to track a swipe: skip update\n\n      if (absX < props.delta && absY < props.delta && !state.swiping) return state;\n      var dir = getDirection(absX, absY, deltaX, deltaY);\n\n      var eventData = _extends({}, state.eventData, {\n        event: event,\n        absX: absX,\n        absY: absY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        velocity: velocity,\n        dir: dir\n      });\n\n      props.onSwiping && props.onSwiping(eventData); // track if a swipe is cancelable(handler for swiping or swiped(dir) exists)\n      // so we can call preventDefault if needed\n\n      var cancelablePageSwipe = false;\n\n      if (props.onSwiping || props.onSwiped || props[\"onSwiped\" + dir]) {\n        cancelablePageSwipe = true;\n      }\n\n      if (cancelablePageSwipe && props.preventDefaultTouchmoveEvent && props.trackTouch && event.cancelable) event.preventDefault(); // first is now always false\n\n      return _extends({}, state, {\n        eventData: _extends({}, eventData, {\n          first: false\n        }),\n        swiping: true\n      });\n    });\n  };\n\n  var onEnd = function onEnd(event) {\n    set(function (state, props) {\n      var eventData;\n\n      if (state.swiping) {\n        eventData = _extends({}, state.eventData, {\n          event: event\n        });\n        props.onSwiped && props.onSwiped(eventData);\n        props[\"onSwiped\" + eventData.dir] && props[\"onSwiped\" + eventData.dir](eventData);\n      }\n\n      return _extends({}, state, initialState, {\n        eventData: eventData\n      });\n    });\n  };\n\n  var cleanUpMouse = function cleanUpMouse() {\n    // safe to just call removeEventListener\n    document.removeEventListener(mouseMove, onMove);\n    document.removeEventListener(mouseUp, onUp);\n  };\n\n  var onUp = function onUp(e) {\n    cleanUpMouse();\n    onEnd(e);\n  };\n\n  var attachTouch = function attachTouch(el) {\n    if (el && el.addEventListener) {\n      // attach touch event listeners and handlers\n      var tls = [[touchStart, onStart], [touchMove, onMove], [touchEnd, onEnd]];\n      tls.forEach(function (_ref3) {\n        var e = _ref3[0],\n            h = _ref3[1];\n        return el.addEventListener(e, h);\n      }); // return properly scoped cleanup method for removing listeners\n\n      return function () {\n        return tls.forEach(function (_ref4) {\n          var e = _ref4[0],\n              h = _ref4[1];\n          return el.removeEventListener(e, h);\n        });\n      };\n    }\n  };\n\n  var onRef = function onRef(el) {\n    // \"inline\" ref functions are called twice on render, once with null then again with DOM element\n    // ignore null here\n    if (el === null) return;\n    set(function (state, props) {\n      // if the same DOM el as previous just return state\n      if (state.el === el) return state;\n      var addState = {}; // if new DOM el clean up old DOM and reset cleanUpTouch\n\n      if (state.el && state.el !== el && state.cleanUpTouch) {\n        state.cleanUpTouch();\n        addState.cleanUpTouch = null;\n      } // only attach if we want to track touch\n\n\n      if (props.trackTouch && el) {\n        addState.cleanUpTouch = attachTouch(el);\n      } // store event attached DOM el for comparison, clean up, and re-attachment\n\n\n      return _extends({}, state, {\n        el: el\n      }, addState);\n    });\n  }; // set ref callback to attach touch event listeners\n\n\n  var output = {\n    ref: onRef // if track mouse attach mouse down listener\n\n  };\n\n  if (handlerProps.trackMouse) {\n    output.onMouseDown = onStart;\n  }\n\n  return [output, attachTouch];\n}\n\nfunction updateTransientState(state, props, attachTouch) {\n  var addState = {}; // clean up touch handlers if no longer tracking touches\n\n  if (!props.trackTouch && state.cleanUpTouch) {\n    state.cleanUpTouch();\n    addState.cleanUpTouch = null;\n  } else if (props.trackTouch && !state.cleanUpTouch) {\n    // attach/re-attach touch handlers\n    if (state.el) {\n      addState.cleanUpTouch = attachTouch(state.el);\n    }\n  }\n\n  return _extends({}, state, addState);\n}\n\nfunction useSwipeable(props) {\n  var trackMouse = props.trackMouse;\n  var transientState = React.useRef(_extends({}, initialState, {\n    type: 'hook'\n  }));\n  var transientProps = React.useRef();\n  transientProps.current = _extends({}, defaultProps, props);\n\n  var _React$useMemo = React.useMemo(function () {\n    return getHandlers(function (cb) {\n      return transientState.current = cb(transientState.current, transientProps.current);\n    }, {\n      trackMouse: trackMouse\n    });\n  }, [trackMouse]),\n      handlers = _React$useMemo[0],\n      attachTouch = _React$useMemo[1];\n\n  transientState.current = updateTransientState(transientState.current, transientProps.current, attachTouch);\n  return handlers;\n}\nvar Swipeable =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inheritsLoose(Swipeable, _React$PureComponent);\n\n  function Swipeable(props) {\n    var _this;\n\n    _this = _React$PureComponent.call(this, props) || this;\n\n    _this._set = function (cb) {\n      _this.transientState = cb(_this.transientState, _this.props);\n    };\n\n    _this.transientState = _extends({}, initialState, {\n      type: 'class'\n    });\n    return _this;\n  }\n\n  var _proto = Swipeable.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        className = _this$props.className,\n        style = _this$props.style,\n        _this$props$nodeName = _this$props.nodeName,\n        nodeName = _this$props$nodeName === void 0 ? 'div' : _this$props$nodeName,\n        innerRef = _this$props.innerRef,\n        children = _this$props.children,\n        trackMouse = _this$props.trackMouse;\n\n    var _getHandlers = getHandlers(this._set, {\n      trackMouse: trackMouse\n    }),\n        handlers = _getHandlers[0],\n        attachTouch = _getHandlers[1];\n\n    this.transientState = updateTransientState(this.transientState, this.props, attachTouch);\n    var ref = innerRef ? function (el) {\n      return innerRef(el), handlers.ref(el);\n    } : handlers.ref;\n    return React.createElement(nodeName, _extends({}, handlers, {\n      className: className,\n      style: style,\n      ref: ref\n    }), children);\n  };\n\n  return Swipeable;\n}(React.PureComponent);\nSwipeable.propTypes = {\n  onSwiped: PropTypes.func,\n  onSwiping: PropTypes.func,\n  onSwipedUp: PropTypes.func,\n  onSwipedRight: PropTypes.func,\n  onSwipedDown: PropTypes.func,\n  onSwipedLeft: PropTypes.func,\n  delta: PropTypes.number,\n  preventDefaultTouchmoveEvent: PropTypes.bool,\n  nodeName: PropTypes.string,\n  trackMouse: PropTypes.bool,\n  trackTouch: PropTypes.bool,\n  innerRef: PropTypes.func,\n  rotationAngle: PropTypes.number\n};\nSwipeable.defaultProps = defaultProps;\n\nexport { DOWN, LEFT, RIGHT, Swipeable, UP, useSwipeable };\n","import MapVisualizerLoader from './loaders/MapVisualizer';\n\nimport {\n  MAP_META,\n  MAP_TYPES,\n  MAP_VIEWS,\n  MAP_VIZS,\n  PRIMARY_STATISTICS,\n  SPRING_CONFIG_NUMBERS,\n  STATE_NAMES,\n  STATISTIC_CONFIGS,\n  UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport {formatNumber, getStatistic, capitalize} from '../utils/commonFunctions';\n\nimport {\n  DotFillIcon,\n  ArrowLeftIcon,\n  OrganizationIcon,\n} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  Suspense,\n  lazy,\n} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {animated, useSpring} from 'react-spring';\nimport {useSwipeable} from 'react-swipeable';\nimport {useWindowSize} from 'react-use';\n\nconst MapVisualizer = lazy(() => import('./MapVisualizer'));\n\nfunction MapExplorer({\n  stateCode: mapCode = 'TT',\n  data,\n  mapStatistic,\n  setMapStatistic,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  expandTable,\n}) {\n  const {t} = useTranslation();\n  const mapExplorerRef = useRef();\n  const {width} = useWindowSize();\n\n  const [mapView, setMapView] = useState(\n    MAP_META[mapCode].mapType === MAP_TYPES.COUNTRY\n      ? MAP_VIEWS.STATES\n      : MAP_VIEWS.DISTRICTS\n  );\n  const [mapViz, setMapViz] = useState(\n    MAP_META[mapCode].mapType === MAP_TYPES.COUNTRY\n      ? MAP_VIZS.CHOROPLETH\n      : MAP_VIZS.CHOROPLETH\n  );\n\n  const mapMeta = MAP_META[mapCode];\n  const mapData =\n    mapMeta.mapType === MAP_TYPES.COUNTRY ? data : {[mapCode]: data[mapCode]};\n\n  const hoveredRegion = useMemo(() => {\n    const hoveredData =\n      (regionHighlighted.districtName\n        ? data[regionHighlighted.stateCode]?.districts?.[\n            regionHighlighted.districtName\n          ]\n        : data[regionHighlighted.stateCode]) || {};\n\n    return produce(hoveredData, (draft) => {\n      draft.name =\n        regionHighlighted.districtName ||\n        STATE_NAMES[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n  const handleTabClick = useCallback(\n    (option) => {\n      switch (option) {\n        case MAP_VIZS.CHOROPLETH:\n          setMapViz(MAP_VIZS.CHOROPLETH);\n          return;\n\n        case MAP_VIZS.BUBBLES:\n          setMapViz(MAP_VIZS.BUBBLES);\n          return;\n\n        default:\n          return;\n      }\n    },\n    [setMapViz]\n  );\n\n  const handleDistrictClick = useCallback(() => {\n    const newMapView =\n      mapView === MAP_VIEWS.DISTRICTS ? MAP_VIEWS.STATES : MAP_VIEWS.DISTRICTS;\n    if (newMapView === MAP_VIEWS.STATES) {\n      setRegionHighlighted({\n        stateCode: regionHighlighted.stateCode,\n        districtName: null,\n      });\n    }\n    setMapView(newMapView);\n  }, [mapView, setRegionHighlighted, regionHighlighted.stateCode]);\n\n  const ChoroplethIcon = useMemo(\n    () => (\n      <svg\n        width=\"314\"\n        height=\"314\"\n        viewBox=\"0 0 314 314\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M78.2861 145.778C80.6671 155.387 84.6108 164.28 92.421 170.488C94.5409 174.766 93.7381 180.115 96.2412 184.535C99.7619 190.751 102.898 195.156 110.758 195.156C119.259 195.156 127.582 192.241 132.576 184.963C136.539 179.187 143.562 174.194 150.658 178.968C156.039 182.587 157.864 191.253 161.949 196.312C168.044 203.859 175.962 212.131 184.107 217.339C190.795 221.615 199.602 221.297 207.368 220.551C214.111 219.903 220.088 212.137 223.71 207.189C227.102 202.555 230.602 198.075 233.006 192.843C238.463 180.961 236.721 162.008 225.62 153.958C213.23 144.974 196.881 145.725 183.343 139.654C175.796 136.27 175.843 122.587 174.174 115.758C172.492 108.876 170.655 99.867 164.581 95.3733C155.36 88.5509 146.436 93.7458 137.075 96.444C133.325 97.525 131.816 100.817 129.095 103.424L129.093 103.426C126.105 106.29 121.531 110.674 117.974 112.632C113.709 114.979 111.262 119.456 105.834 119.612C104.487 119.651 98.6801 120.375 97.7693 119.227C94.2704 114.814 92.1979 113.445 86.6906 113.445C83.0636 113.445 77.14 118.241 77.14 122.31C77.14 130.086 76.4094 138.205 78.2861 145.778Z\"\n          strokeWidth=\"10\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        />\n      </svg>\n    ),\n    []\n  );\n\n  const BubblesIcon = useMemo(\n    () => (\n      <svg\n        width=\"22\"\n        height=\"27\"\n        viewBox=\"-1 -5 22 27\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <circle cx=\"5.5\" cy=\"5.5\" r=\"5.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"5.5\" cy=\"5.5\" r=\"5\" strokeOpacity=\"0.5\" />\n        <circle cx=\"6.5\" cy=\"11.5\" r=\"3.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"6.5\" cy=\"11.5\" r=\"3\" strokeOpacity=\"0.5\" />\n        <circle cx=\"13.5\" cy=\"9.5\" r=\"6.5\" fillOpacity=\"0.4\" />\n        <circle cx=\"13.5\" cy=\"9.5\" r=\"6\" strokeOpacity=\"0.5\" />\n      </svg>\n    ),\n    []\n  );\n\n  const history = useHistory();\n  const panelRef = useRef();\n\n  useEffect(() => {\n    if (history.location.hash === '#MapExplorer') {\n      panelRef.current.scrollIntoView();\n    }\n  }, [history]);\n\n  const trail = useMemo(() => {\n    const styles = [];\n\n    [0, 0, 0, 0, 0, 0, 0].map((element, index) => {\n      styles.push({\n        animationDelay: `${index * 250}ms`,\n      });\n      return null;\n    });\n\n    return styles;\n  }, []);\n\n  const spring = useSpring({\n    total: getStatistic(hoveredRegion, 'total', mapStatistic),\n    config: {tension: 250, ...SPRING_CONFIG_NUMBERS},\n  });\n\n  const swipeHandlers = useSwipeable({\n    onSwipedRight: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex =\n        currentIndex > 0 ? currentIndex - 1 : PRIMARY_STATISTICS.length - 1;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    },\n    onSwipedLeft: () => {\n      const currentIndex = PRIMARY_STATISTICS.indexOf(mapStatistic);\n      const toIndex =\n        currentIndex < PRIMARY_STATISTICS.length - 1 ? currentIndex + 1 : 0;\n      setMapStatistic(PRIMARY_STATISTICS[toIndex]);\n    },\n  });\n\n  const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n\n  return (\n    <div\n      className={classnames(\n        'MapExplorer',\n        {stickied: anchor === 'mapexplorer'},\n        {\n          hidden:\n            anchor && (!expandTable || width < 769) && anchor !== 'mapexplorer',\n        }\n      )}\n    >\n      {/*<div className=\"panel\" ref={panelRef}>\n        <div className=\"panel-left fadeInUp\" style={trail[0]}>\n          <h2 className={classnames(mapStatistic)}>\n            {t(hoveredRegion.name)}\n            {hoveredRegion.name === UNKNOWN_DISTRICT_KEY &&\n              ` [${t(STATE_NAMES[regionHighlighted.stateCode])}]`}\n          </h2>\n\n          {regionHighlighted.stateCode && (\n            <h1 className={classnames('district', mapStatistic)}>\n              <animated.div>\n                {spring.total.interpolate((total) =>\n                  formatNumber(\n                    total,\n                    statisticConfig.format !== 'short'\n                      ? statisticConfig.format\n                      : 'int',\n                    mapStatistic\n                  )\n                )}\n              </animated.div>\n              <span>{t(capitalize(statisticConfig.displayName))}</span>\n            </h1>\n          )}\n        </div>\n\n         <div className={classnames('panel-right', `is-${mapStatistic}`)}>\n          <div className=\"switch-type\">\n            <div\n              className={classnames('choropleth fadeInUp', {\n                'is-highlighted': mapViz === MAP_VIZS.CHOROPLETH,\n              })}\n              onClick={handleTabClick.bind(this, MAP_VIZS.CHOROPLETH)}\n              style={trail[1]}\n            >\n              {ChoroplethIcon}\n            </div>\n            <div\n              className={classnames('bubble fadeInUp', {\n                'is-highlighted': mapViz === MAP_VIZS.BUBBLES,\n              })}\n              onClick={handleTabClick.bind(this, MAP_VIZS.BUBBLES)}\n              style={trail[2]}\n            >\n              {BubblesIcon}\n            </div>\n\n            {mapMeta.mapType === MAP_TYPES.COUNTRY && (\n              <React.Fragment>\n                <div className=\"divider\" />\n                <div\n                  className={classnames('boundary fadeInUp', {\n                    'is-highlighted': mapView === MAP_VIEWS.DISTRICTS,\n                  })}\n                  onClick={handleDistrictClick.bind(this)}\n                  style={trail[3]}\n                >\n                  <OrganizationIcon />\n                </div>\n              </React.Fragment>\n            )}\n\n            {mapMeta.mapType === MAP_TYPES.STATE && (\n              <div\n                className=\"back fadeInUp\"\n                onClick={() => {\n                  history.push('/#MapExplorer');\n                }}\n                style={trail[4]}\n              >\n                <ArrowLeftIcon />\n              </div>\n            )}\n          </div>\n\n          {(expandTable || width < 769) && (\n            <div className=\"switch-statistic fadeInUp\" style={trail[5]}>\n              {PRIMARY_STATISTICS.map((statistic) => (\n                <div\n                  key={statistic}\n                  className={classnames('statistic-option', `is-${statistic}`, {\n                    'is-highlighted': mapStatistic === statistic,\n                  })}\n                  onClick={setMapStatistic.bind(this, statistic)}\n                >\n                  <DotFillIcon />\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div> */}\n\n      <div\n        ref={mapExplorerRef}\n        className=\"fadeInUp\"\n        style={trail[3]}\n        {...swipeHandlers}\n      >\n        {mapStatistic && (\n          <Suspense\n            fallback={\n              <MapVisualizerLoader\n                className=\"map-loader\"\n                {...{\n                  width: mapExplorerRef.current?.clientWidth,\n                  statistic: mapStatistic,\n                }}\n              />\n            }\n          >\n            <MapVisualizer\n              {...{mapCode, mapView, mapViz}}\n              data={mapData}\n              {...{regionHighlighted, setRegionHighlighted}}\n              statistic={mapStatistic}\n            ></MapVisualizer>\n          </Suspense>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.stateCode, currProps.stateCode)) {\n    return false;\n  } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  } else if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.data?.TT?.meta?.['last_updated'],\n      currProps.data?.TT?.meta?.['last_updated']\n    )\n  ) {\n    return false;\n  } else if (!equal(prevProps.data?.TT?.total, currProps.data?.TT?.total)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(MapExplorer, isEqual);\n","const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t19: \"plugin not loaded\",\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t}\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtypeObject,\n\tArchtypeArray,\n\tArchtypeMap,\n\tArchtypeSet,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\treturn !proto || proto === Object.prototype\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors ||\n\tfunction getOwnPropertyDescriptors(target: any) {\n\t\t// Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n\t\tconst res: any = {}\n\t\townKeys(target).forEach(key => {\n\t\t\tres[key] = Object.getOwnPropertyDescriptor(target, key)\n\t\t})\n\t\treturn res\n\t}\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === ArchtypeObject) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): 0 | 1 | 2 | 3 {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? ArchtypeArray\n\t\t: isMap(thing)\n\t\t? ArchtypeMap\n\t\t: isSet(thing)\n\t\t? ArchtypeSet\n\t\t: ArchtypeObject\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === ArchtypeMap\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === ArchtypeMap ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === ArchtypeMap) thing.set(propOrOldValue, value)\n\telse if (t === ArchtypeSet) {\n\t\tthing.delete(propOrOldValue)\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return base.slice()\n\tconst descriptors = getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tlet keys = ownKeys(descriptors)\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key: any = keys[i]\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\nexport function freeze(obj: any, deep: boolean): void {\n\tif (isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tSetState,\n\tImmerScope,\n\tProxyObjectState,\n\tProxyArrayState,\n\tES5ObjectState,\n\tES5ArrayState,\n\tMapState,\n\tDRAFT_STATE\n} from \"../internal\"\n\nexport type Objectish = AnyObject | AnyArray | AnyMap | AnySet\nexport type ObjectishNoSet = AnyObject | AnyArray | AnyMap\n\nexport type AnyObject = {[key: string]: any}\nexport type AnyArray = Array<any>\nexport type AnySet = Set<any>\nexport type AnyMap = Map<any, any>\n\nexport const ArchtypeObject = 0\nexport const ArchtypeArray = 1\nexport const ArchtypeMap = 2\nexport const ArchtypeSet = 3\n\nexport const ProxyTypeProxyObject = 0\nexport const ProxyTypeProxyArray = 1\nexport const ProxyTypeES5Object = 4\nexport const ProxyTypeES5Array = 5\nexport const ProxyTypeMap = 2\nexport const ProxyTypeSet = 3\n\nexport interface ImmerBaseState {\n\tparent_?: ImmerState\n\tscope_: ImmerScope\n\tmodified_: boolean\n\tfinalized_: boolean\n\tisManual_: boolean\n}\n\nexport type ImmerState =\n\t| ProxyObjectState\n\t| ProxyArrayState\n\t| ES5ObjectState\n\t| ES5ArrayState\n\t| MapState\n\t| SetState\n\n// The _internal_ type used for drafts (not to be confused with Draft, which is public facing)\nexport type Drafted<Base = any, T extends ImmerState = ImmerState> = {\n\t[DRAFT_STATE]: T\n} & Base\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyTypeES5Array,\n\tProxyTypeES5Object,\n\tProxyTypeMap,\n\tProxyTypeSet,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\trootState: ImmerState,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(__DEV__ ? 18 : 19, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tplugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeMap\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeSet\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyTypeProxyObject ||\n\t\tstate.type_ === ProxyTypeProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyTypeES5Object,\n\tProxyTypeES5Array,\n\tProxyTypeSet,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE],\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumarable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyTypeES5Object || state.type_ === ProxyTypeES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// finalize all children of the copy\n\t\teach(result as any, (key, childValue) =>\n\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyTypeSet && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\tif (scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyTypeProxyArray : (ProxyTypeProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(state, prop: string /* strictly not, but helps TS */, value) {\n\t\tstate.assigned_[prop] = true\n\t\tif (!state.modified_) {\n\t\t\tif (is(value, peek(latest(state), prop)) && value !== undefined)\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyTypeProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\t// This is a very special case, if the prop is a getter defined by the\n\t\t// prototype, we should invoke it with the draft as context!\n\t\tif (desc) return `value` in desc ? desc.value : desc.get?.call(state.draft_)\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tisMinified,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = __DEV__ ? true /* istanbul ignore next */ : !isMinified\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t\tthis.produce = this.produce.bind(this)\n\t\tthis.produceWithPatches = this.produceWithPatches.bind(this)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce(base: any, recipe?: any, patchListener?: any) {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches(arg1: any, arg2?: any, arg3?: any): any {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is disabled in production.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches(base: Objectish, patches: Patch[]) {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches.slice(i + 1))\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtypeMap,\n\tArchtypeSet,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === ArchtypeSet ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase ArchtypeMap:\n\t\t\treturn new Map(value)\n\t\tcase ArchtypeSet:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/* istanbul ignore next */\nfunction mini() {}\nexport const isMinified = mini.name !== \"mini\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","export default (): string =>\n  Math.random()\n    .toString(36)\n    .substring(6)\n","import * as React from 'react'\n\nimport uid from '../shared/uid'\nimport { IContentLoaderProps } from './'\n\nconst SVG: React.FC<IContentLoaderProps> = ({\n  animate,\n  backgroundColor,\n  backgroundOpacity,\n  baseUrl,\n  children,\n  foregroundColor,\n  foregroundOpacity,\n  gradientRatio,\n  uniqueKey,\n  interval,\n  rtl,\n  speed,\n  style,\n  title,\n  ...props\n}) => {\n  const fixedId = uniqueKey || uid()\n  const idClip = `${fixedId}-diff`\n  const idGradient = `${fixedId}-animated-diff`\n  const idAria = `${fixedId}-aria`\n\n  const rtlStyle = rtl ? { transform: 'scaleX(-1)' } : null\n  const keyTimes = `0; ${interval}; 1`\n  const dur = `${speed}s`\n\n  return (\n    <svg\n      aria-labelledby={idAria}\n      role=\"img\"\n      style={{ ...style, ...rtlStyle }}\n      {...props}\n    >\n      {title ? <title id={idAria}>{title}</title> : null}\n      <rect\n        role=\"presentation\"\n        x=\"0\"\n        y=\"0\"\n        width=\"100%\"\n        height=\"100%\"\n        clipPath={`url(${baseUrl}#${idClip})`}\n        style={{ fill: `url(${baseUrl}#${idGradient})` }}\n      />\n\n      <defs role=\"presentation\">\n        <clipPath id={idClip}>{children}</clipPath>\n\n        <linearGradient id={idGradient}>\n          <stop\n            offset=\"0%\"\n            stopColor={backgroundColor}\n            stopOpacity={backgroundOpacity}\n          >\n            {animate && (\n              <animate\n                attributeName=\"offset\"\n                values={`${-gradientRatio}; ${-gradientRatio}; 1`}\n                keyTimes={keyTimes}\n                dur={dur}\n                repeatCount=\"indefinite\"\n              />\n            )}\n          </stop>\n\n          <stop\n            offset=\"50%\"\n            stopColor={foregroundColor}\n            stopOpacity={foregroundOpacity}\n          >\n            {animate && (\n              <animate\n                attributeName=\"offset\"\n                values={`${-gradientRatio / 2}; ${-gradientRatio / 2}; ${1 +\n                  gradientRatio / 2}`}\n                keyTimes={keyTimes}\n                dur={dur}\n                repeatCount=\"indefinite\"\n              />\n            )}\n          </stop>\n\n          <stop\n            offset=\"100%\"\n            stopColor={backgroundColor}\n            stopOpacity={backgroundOpacity}\n          >\n            {animate && (\n              <animate\n                attributeName=\"offset\"\n                values={`0; 0; ${1 + gradientRatio}`}\n                keyTimes={keyTimes}\n                dur={dur}\n                repeatCount=\"indefinite\"\n              />\n            )}\n          </stop>\n        </linearGradient>\n      </defs>\n    </svg>\n  )\n}\n\nSVG.defaultProps = {\n  animate: true,\n  backgroundColor: '#f5f6f7',\n  backgroundOpacity: 1,\n  baseUrl: '',\n  foregroundColor: '#eee',\n  foregroundOpacity: 1,\n  gradientRatio: 2,\n  id: null,\n  interval: 0.25,\n  rtl: false,\n  speed: 1.2,\n  style: {},\n  title: 'Loading...',\n}\n\nexport default SVG\n","import * as React from 'react'\n\nimport { Facebook, IContentLoaderProps } from '.'\nimport Svg from './Svg'\n\nconst ContentLoader: React.FC<IContentLoaderProps> = props =>\n  props.children ? <Svg {...props} /> : <Facebook {...props} />\n\nexport default ContentLoader\n","import * as React from 'react'\n\nimport { IContentLoaderProps } from '..'\nimport ContentLoader from '../ContentLoader'\n\nconst ReactContentLoaderFacebook: React.FC<IContentLoaderProps> = props => (\n  <ContentLoader viewBox=\"0 0 476 124\" {...props}>\n    <rect x=\"48\" y=\"8\" width=\"88\" height=\"6\" rx=\"3\" />\n    <rect x=\"48\" y=\"26\" width=\"52\" height=\"6\" rx=\"3\" />\n    <rect x=\"0\" y=\"56\" width=\"410\" height=\"6\" rx=\"3\" />\n    <rect x=\"0\" y=\"72\" width=\"380\" height=\"6\" rx=\"3\" />\n    <rect x=\"0\" y=\"88\" width=\"178\" height=\"6\" rx=\"3\" />\n    <circle cx=\"20\" cy=\"20\" r=\"20\" />\n  </ContentLoader>\n)\n\nexport default ReactContentLoaderFacebook\n"],"sourceRoot":""}